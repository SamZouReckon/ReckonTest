["/*7e49c682d75337fb7462fe38918766961d08f38d",42,439506,440149,86502,":\"resources/images/icons/rm-menu.svg",615710,41,526718,2250,",\"data\"",528968,27361,"Consts\",{alternateClassName:\"RM.Consts\",singleton:true,",622018,70,"20000,STORE_LOAD_TIME_OUT:20000,VERSION:0.1",622118,536,",NoAccessMsg:\"No access rights\"});Ext.define(\"RM.component.RMAmount",602730,39,"rmamountfield\",config:{",604442,32,"\"showDisplayValue\",focus:\"showInputFld\"},cls:\"rm-flatfield\",currencyMode:true,decimalPlaces:2,trailingZerosUpTo:2,placeHolder:\"\"",526784,40,668108,108,"this.inputEl=this.element.down(\"input\");this.displayEl=this.inputEl.insertHtml(\"afterEnd\",'<div class=\"x-input-el x-form-field rm-field-input-formatted\"></div>',true);this.displayEl.on(\"tap\",this.focus,this);this.initComplete=true;this.showDisplayValue()},getValue:function(){this.showValidation(true);",477264,34,",setValue",239406,45,"if(this.initComplete){this.showDisplayValue()}return a},applyValu",550692,43,"return RM.util.MathHelpers.roundToEven(a,this.getDecimalPlaces())},showDisplayValue:function(){if(this.displayVal){this.displayEl.show()}else{this.displayEl.hide()}},showInputFld:function(){if(!this.getReadOnly()){this.displayEl.hide()}},onChange:function(b,c,a){if(!b.inChangeEvent){b.inChangeEvent=true;var d;if(!Ext.isNumeric(c)){d=null}else{d=this.applyValue(parseFloat(c))}this.updateValue(d);this.setDisplayValue(d);if(String(d)!=String(a)){this.fireEvent(\"change\",this,d,a);this.fireEvent(\"valueChange\",d,a)}b.inChangeEvent=false}},setDisplayValue:function(a){if(Ext.isNumeric(a)){if(this.getCurrencyMode()){this.displayVal=RM.AppMgr.formatCurrency(a,this.getDecimalPlaces())}else{this.displayVal=RM.AppMgr.numberWithCommas(a,this.getDecimalPlaces())}this.displayVal=this.handleTrailingZeros(this.displayVal);this.displayEl.setHtml(this.displayVal)}else{this.displayVal=null;this.displayEl.setHtml(\"\")}this.showDisplayValue(",567388,34,"callParent(arguments);this.showDisplayValue(",588254,76,",handleTrailingZeros:function(d){var b=d.indexOf(\".\");if(b!==-1&&this.getTrailingZerosUpTo()>0){var c=false;var a=this.getDecimalPlaces()-this.getTrailingZerosUpTo();d=d.split(\"\").reverse().filter(function(f,e){if(e>=a||f!==\"0\"){c=true;return true}return c}).reverse().join(\"\")}else{d=d.replace(/([0-9]+)\\.0+$/,\"$1\")}return d",564444,32,"hone",597984,37,"rmphonefield\",config:{clearIcon:false,",494586,37,",listeners:{blur:\"onFieldBlur\"},cls:\"rm-flatfield\"",526784,40,668108,110,"getValue:function(){this.showValidation(true);",477264,34,",setValue",239406,45,"return a},onFieldBlur:function(){var a=this.getValue();if(a==\"\"){this.element.down(\"input\").dom.value=\"\"}",294438,59,598891,91,"view.TestScreen\",{extend:Ext.Panel,xtype:\"testscreen",588400,68,592469,39,"html:\"Test Screen\"},",635792,39,711440,68,"itemId:\"testScreenForm\",defaults:{",589040,36,"items:[{xtype:\"textfield\",label:\"Test1\",name:\"Test1\",clearIcon:true},{xtype:\"textfield\",label:\"Test2\",name:\"Test2\",placeHolder:\"enter\"},{xtype:\"textfield\",label:\"Test3\",name:\"Test3\"},{xtype:\"rmamountfield\",label:\"Quantity\",name:\"Quantity\",labelWidth:120,rmmandatory:true,readOnly:false,decimalPlaces:4,maxValue:100,currencyMode:false,listeners:{change:function(b,c,a){console.log(\"rmamountfield2 change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"rmamountfield\",label:\"Item Price\",clearIcon:true,name:\"ItemPrice\",labelWidth:120",733325,37,",readOnly:false,decimalPlaces:8,listeners:{change:function(b,c,a){console.log(\"rmamountfield2 change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"textfield\",label:\"Test5\",name:\"Test5\"},{xtype:\"rmphonefield\",label:\"Bus Phone\",labelWidth:120,name:\"BusPhone\"",733325,37,",readOnly:false,listeners:{change:function(b,c,a){console.log(\"rmphonefield change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"textfield\",label:\"Test6\",name:\"Test6\"}]}]",556305,41,"alternateClassName:\"RM.PermissionsMgr\",",619119,32,556378,57,".map(function(b){return b.toLowerCase?b.toLowerCase():b});this.triggerUpdateEvent()},getPermission:function(b){var a=this.permissions.indexOf(b.toLowerCase())>-1;return a",556500,48,"a+\"_\"+b)},canApprove",556714,34,"Approve\")},canAddEdit:function(a){if(a==\"Items\"){return false}return this.canDo(a,\"AddEdit\")},canView",556714,34,"V",556645,50,"D",556696,52,"Report\")},canSelec",556560,35,"Select\")},triggerUpdateEvent:function(){this.app.fireEvent(\"rm-permissionsupdated",556754,37,"alternateClassName:\"RM.EventMgr\",",556791,1226,558116,173,"green",558387,72,"'+RM.AppMgr.formatCurrency(a.NetPositionIncome,0,true)+'</span></div><div class=\"rm-reddoticon",558665,70,"'+RM.AppMgr.formatCurrency(a.NetPositionExpenses,0,true)+'</span>",558823,108,"'+RM.AppMgr.formatCurrency(a.NetPositionIncome-a.NetPositionExpenses,0",559009,228,"msg\",flex:1},",559228,50,",{itemId:\"blankCont\",flex:1",673103,33,559310,203,"d){var b=this.getComponent(1);var e=RM.PermissionsMgr.canView(\"Invoices\");var a=RM.PermissionsMgr.canView(\"Bills\");var c=b.getComponent(\"msg\");c.setHidden(e||a);c",560723,43,"'+RM.Consts.NoAccessMsg+\"</div>\");b.getComponent(\"invoices\").setHidden(!e);b.getComponent(\"bills\").setHidden(!a);b.getComponent(\"blankCont\").setHidden(!(e||a)||(e&&a));if(!e&&!a){return}b",559536,96,"d",559633,197,"'+RM.AppMgr.formatCurrency(d.InvoicesOverdueAmount,0",559882,56,"b",559958,91,"'+d.Bill",559641,110,"Bill",559758,32,"Due",560174,38,"'+RM.AppMgr.formatCurrency(d.BillsOverdueAmount,0",559882,55,"},onBillsTap:function(){RM.ViewMgr.showBills()",560290,2006,"c){try",562298,37,"c==null||c",562345,139,"c.length;a++){this.addBudget(c[a],a)}this.paintChart(c)}catch(b){console.log(\"**** Exception in BudgetOverview setViewData \"+b.message)}",562539,1736,"scrollable:\"vertical\",cls:\"rm-dashboard",564314,129,",",606698,36,"hidden:true,itemId:\"noaccesscont\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-noaccess-icon.svg\",width:68,height:62,margin:\"28px auto\"},{xtype:\"component\",html:\"You do not have enough access </br>rights to view the dashboard\",cls:\"rm-update-title\",margin:\"-8 0 30 0\"",651911,34,"tap the top left button to </br>gain access to other parts of this book.\",cls:\"rm-update-msg\",margin:\"20 0 20 0",617294,34,"SecurePanel\",{extend:Ext.Panel,xtype:\"securepanel\",config:{permissionFor:\"",571167,32,"this.checkPermissions()}}},checkPermissions:function(){var a=this.getPermissionFor();if(a&&!RM.core.PermissionsMgr.canView(a)){RM.AppMgr.showErrorMsgBox(\"You are not permitted to view this screen\"",602648,37,565658,37,564743,1252,"sv",565997,47," width: 7px; height: 6",566041,605,"sv",565997,47," width: 7px; height: 6",566692,545,"Cls:\"rm-sortsearch",612461,37,"search.sv",567274,395,"sv",567671,60,"sv",567733,124,"sv",567859,83,"component.Secure",565695,34,"securebutton\",config:{permissionFor:\"",571167,32,"this.checkPermissions()",566991,42,");RM.AppMgr.application.on({\"rm-permissionsupdated\":this.checkPermissions,scope:this})},checkPermissions:function(){var a=this.getPermissionFor();if(!a){return}var b=false;if(typeof(a)===\"string\"){b=RM.core.PermissionsMgr.canAddEdit(a)}else{b=RM.core.PermissionsMgr.canDo(a.name,a.action)}if(b){this.show()}else{this.hide()",686335,32,"s\",{extend:RM.component.SecurePanel,xtype:\"invoices\",config:{permissionFor:\"Invoices\",",568016,157,"xtype:\"securebutton\",permissionFor:\"Invoices",575582,86,"Due date\",value:\"duedate\"},",673040,38,"Customer\",value:\"customer",617294,34,564473,233,",lastUpdatedDateFormat:\"d/m/Y h:iA\",},fetchLatest:function(){this.getList().getStore().loadPage(1,{callback:function(b,a,c){if(c){",523114,59,"}},scope:this})",568748,677,"{[RM.AppMgr.formatCurrency",569454,4814,"{[RM.AppMgr.formatCurrency",574297,1096,"RM.component.SecurePanel,xtype:\"contacts\",config:{permissionFor:\"Contacts\",",568016,82,"Contact",672896,43,"xtype:\"securebutton\",permissionFor:{name:\"Contacts\",action:\"AddEdit\"},",737376,61,759498,47,"All",593016,44,575715,573,"Mobil",576290,86,"0.1",576379,309,"RM.HomeSettingsMgr.getSetting(\"PrivacyPolicyUrl\")",576912,54,576768,118,"RM.HomeSettingsMgr.getSetting(\"TermsUrl\")",576912,178,"RM.HomeSettingsMgr.getSetting(\"AppInfoUrl\")",577116,1017,"index:\"Cashbooks\",",578133,76,"CashbookMgr.selectCashBook()}},{index:\"Dashboard\",",578236,112,"invoices\",index:\"I",578357,92,",data:{permsRequired:true}},{xtype:\"timesheets\",index:\"T",578460,96,",data:{permsRequired:true}},{xtype:\"expenses\",index:\"ExpenseClaim",578573,95,",data:{permsRequired:true}},{xtype:\"contacts\",index:\"C",578679,92,",data:{permsRequired:true",578770,99,",setSelectedItem:function(b){var a=this.store.getData().indexOfKey(b);if(a>0){this.list.select(a)}},isItemSelected:function(b){var a=this.store.getData().indexOfKey(b);if(a>0){return this.list.isSelected(a)}return false",526784,42,"RM.AppMgr.application.on({\"rm-permissionsupdated\":this.applyPermissions,scope:this})},applyPermissions:function(){this.store.clearFilter();this.store.filterBy(function(b){var c=b.get(\"data\");if(c&&c.permsRequired){var a=b.get(\"index\");return RM.PermissionsMgr.canView(a)}else{return true}})",578868,259,":\"resources/images/icons/rm-settings.svg",654672,60,579217,260,579510,111,"svg\" style= \"width: 90px; height: 90px;",579624,441,"alternateClassName:\"RM.ViewMgr\",singleton:true,defaultBackAnimation:",648624,32,580079,179,"this.hideKeyPad();",580258,60,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",580925,35,"appBackStack.pop();this.showDashboard(b);",580320,37,"b=b||this.defaultBackAnimation;a.onAfter(\"erased\",function(){this.destroy()});",580399,87,"this.hideKeyPad();c=c||this.defaultBackAnimation;var d=this.appBackStack.pop();var e=[d];d.onAfter(\"erased\",function(){e.forEach(function(f){f.destroy()})});while(this.appBackStack.length>0",580496,67,"=b){this.showPanel(a,c);break}e.push(a)}},appPause:function(){document.activeElement.blur();",580650,92,"this.showBackStack(\"onDeviceBack\");",580650,66,"else{if(this.formBackHandler){this.formBackHandler.call(this.formB",580791,112,"mainNavContainer.isItemSelected(\"Cashbooks\")){this.confirmExitApp(",581068,37,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",580925,35,582220,33,648624,33,";this.mainNavContainer.setSelectedItem(\"Dashboard\"",581068,39,"this.confirmExitApp()}else{this.back()}}}}}}},confirmExitApp:function(){",608063,52,581159,64,581244,152,"regFormBackHandler:function(b,a){this.formBackHandler=b;this.formBackHandlerScope=a},deRegFormBackHandler:function(){this.formBackHandler=null;this.formB",581374,509,"dashboardShown=true;this.mainNavContainer.setSelectedItem(\"Dashboard\"",581919,102,"isItemSelected(\"Dashboard\"",582038,47,"setSelectedItem(\"Bills\"",581919,43,582147,47,"setSelectedItem(\"Invoices\"",582213,93,"setSelectedItem(\"Timesheets\"",581919,43,582368,47,"setSelectedItem(\"Expenses\"",581919,43,582477,88,"this.hideKeyPad();",582565,193,"this.hideKeyPad();",582758,240,"console.log(\"stack length = \"+this.appBackStack.length",582996,149,"hideKeyPad();",583140,1034,",hideKeyPad:function(){",624070,35,"ctiveElement.blur()}},setPostAnimationCallback:function(a,b){if(!a.listeners){a.listeners={}}a.listeners.animationend=b",584173,1045,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,585302,577,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,585963,452,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,586499,76,559280,52,"if(RM.PermissionsMgr.canAddEdit(\"Items\")){this.add(",586576,81,")}",586709,277,"{[RM.AppMgr.formatCurrency",587015,614,"a){if(!Ext.fly(a.target).hasCls(\"x-clear-icon\")){this.fireEvent(\"tap\",this,a)}",587657,461,598892,72,",getValue:function(){this.showValidation(true);",477264,49,588345,123,686495,57,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",759431,32,686612,165,603792,34,687021,36,588830,651,"alternateClassName:\"RM.Selectors\",",619119,32,589513,1418,"re.HomeSettingsMgr\",{alternateClassName:\"RM.HomeSettingsMgr\",singleton:true,load",681143,34,"s(\"HomeSettings\",null,function(a){this.homeSettings=a},this,function(a){})},getSetting:function(b){for(var a=0;a<this.homeSettings.length;a++){if(this.homeSettings[a].Key.toLowerCase()==b.toLowerCase()){return this.homeSettings[a].Value}}return null}});Ext.define(\"RM.core.CashbookMgr\",{alternateClassName:\"RM.CashbookMgr\",singleton:true,config:{cashbookId:null,currentCashbook:null},getTaxPreferences:function(){return this.getCurrentCashbook().TaxPreference},getSalesPreferences:function(){return this.getCurrentCashbook().SalesPreferences},loadLastCashbook:function(a){if(this.getCashbookId()){this.setCashbook(this.getCashbookId());if(a){a()}}",624903,72,"setCashbookId(a.CashBookId)",624998,45,"c",625044,64,625119,178,"_currentCashbook.Dashboard",625310,65,"c,a,b){RM.AppMgr",625388,50,"c},function(d){this.setCashbookId(c);this.setCurrentCashbook(d[0",623147,33,"GSTCodes\").setData(d",625503,75,"d[0].AccountingCategories);if(d[0].AmountTaxStatuses){",623150,52,"d[0].AmountTaxStatuses)}else{",623150,109,"able",623261,57,"de tax",623261,36,"EXCLUSIVE,Name:\"Exclude tax\"}])}",623033,50,"d",625656,48,"this.getCurrentCashbook().Permissions)",625793,48,"});Ext.define(\"RM.component.SecureFormPanel",617354,32,"secureformpanel\",config:{permissionFor:\"",571167,32,"this.checkPermissions()}}},checkPermissions:function(){var a=this.getPermissionFor();if(a&&!RM.core.PermissionsMgr.canAddEdit(a)){this.getFieldsArray().forEach(function(b){if(b.setReadOnly){b.setReadOnly(true)}if(b.setPlaceHolder){b.setPlaceHolder(\"\")}})}this.getFieldsArray().forEach(function(d){var c=d.config.permissionFor;if(c){var b=RM.PermissionsMgr.canDo(c.name,c.action);if(c.invoke){d[c.invoke].apply(d,[b])}else{if(c.invokeWithInverse){d[c.invoke].apply(d,[!b])}else{d.setHidden(!b)}}}})},scrollShowField:function(e,b,c,a){if(this.keyCb&&this.keyFldEleId!==b){this.keyCb.onFieldLostFocus.call(this.keyCb)}this.keyFldEleId=b;this.keyCb=a;var d=this;d.clearScrollTimer();d.scrollTimer=window.setTimeout(function(){d.scrollTimer=null;d.getScrollable().getScroller().scrollTo(0,e.element.dom.offsetTop,true)},300);this.showKeyPad(c)},showKeyPad:function(b){if(!this.keypad){this.rootContainer=this.getRootContainer(this);this.rootContainer.element.on({tap:this.handleTapInEntireScreen,scope:this})}if(!this.keypad||b!==this.keypadType){var a=",743448,41,"keypadType:b,listeners:{keytap:this.onKeyTap,scope:this}};this.keypad=this.add(a)}else{this.keypad.show()}this.keypadType=b;",651310,35,"Keypad,this)},hideKeypad:function(){this.keypad.hide();this.scrollTop();this.keyCb.onFieldLostFocus.call(this.keyCb",651263,33,"onKeyTap:function(a){this.keyCb.onKeyTap.call(this.keyCb,a);if(a===\"done\"){this.hideKeypad()}if(a===\"cancel\"){this.hideKeypad()}},handleTapInEntireScreen:function(a){if(this.keyCb&&this.keyFldEleId!==a.target.id){this.keyCb.onFieldLostFocus.call(this.keyCb);this.hideKeypad();this.keyCb=null}},getRootContainer:function(a){while(a.getParent()){a=a.getParent()}return a},scrollTop:function(){var a=this;a.clearScrollTopTimer();if(!a.scrollTimer){this.scrollTopTimer=window.setTimeout(function(){a.getScrollable().getScroller().scrollTo(0,0,false)},300)}},clearScrollTimer:function(){if(this.scrollTimer){window.clearTimeout(this.scrollTimer)}},clearScrollTopTimer:function(){if(this.scrollTopTimer){window.clearTimeout(this.scrollTopTimer)}",590910,239,"this.element.on(\"tap\",function(b){if(Ext.fly(b.target).hasCls(\"x-clear-icon\")){this.setValue(null)}},this);var a=this.getPhonePicker();if(a){a.setListeners({",598417,100,",scope:this}",591147,307,",getValue:function(){this.showValidation(true);",477264,49,667996,361,",getValue:function(){this.showValidation(true);",477264,49,"RM.view.ContactDetail\",{extend:RM.component.Secure",592276,36,"permissionFor:\"Contacts\",",603232,111,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",711332,36,686622,55,"xtype:\"securebutton\",",592542,51,",permissionFor:{name:\"Contacts\",action:\"AddEdit\"}}]},{xtype:\"secureformpanel\",permissionFor:\"Contacts",592614,111,"enter\"",686800,52,592783,38,"\"Display ",593916,32,592880,99,"labelWidth:\"10em",592977,231,593337,480,"\",label:\"First name\",rmmandatory:true",593847,45,593904,34,",hidden:true},{name:\"BusinessName\",label:\"Business name\",border:\"0 0 1 0\",rmmandatory:true,hidden:true},{name:\"BranchName\",label:\"Branch name\",hidden:true,border:\"1 0 1 0\"",593938,213,"rmphone",594656,32,594189,143,"rmphonefiel",655039,42,594384,266,"rmphone",594656,173,"rmphonefiel",655039,42,"name:\"Fax",594395,56,"ext",594946,50,",labelWidth:\"4em",594995,505,"alternateClassName:\"RM.ContactsMgr\",",619119,34,620592,130,595664,1571,"if(!c){return}",597235,998,"1",598234,360,"how();",598581,38,598638,60,"a?this.showValidation(true):this.showValidation(false);",598698,58,"callParent([valueInField])",219166,34,"duration",588255,93,598982,378,"this",296062,37,";return b},showClearIcon:function(){var a=this;if(a.getClearIcon()&&!a.getDisabled()&&!a.getReadOnly()){a",293817,60,"a},resetPicker:function(){var a=this;",599393,240,"b){if(!this.config.rmmandatory){this.addClearButton(b);this.clearButton.setHidden(!a.getValue())}",598434,83,",scope:this}})},updateValue",279215,39,588255,75,",getValue:function(){this.showValidation(true);",477264,34,",addClearButton:function(a){if(this.clearButtonAdded){return}var b=a.getToolbar();var c=",652406,33,"e,f){var d=e.up(\"datepicker\");d.fireEvent(\"change\",d,null);d.hide()},text:\"Clear\"};this.clearButton=b.add(c);this.clearButtonAdded=true",591453,173,";this.privateReadOnly=false",292015,35,591661,137,"if(this.privateReadOnly){return}",591798,428,",setReadOnly:function(a){this.privateReadOnly=a",245152,43,599749,33,"RM.component.Secure",599786,164,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",711332,42,"Time Sheet",608640,64,592542,63,"secure",600157,2026,"alternateClassName:\"RM.TimeSheetsMgr\",",619119,34,602217,504,710281,141,"itemId:\"doneContainer",649647,41,"40,cls:\"rm-keypad-topbar\"},items:[{text:\"CANCEL\",itemId:\"cancel\",},{itemId:\"bar\",},{text:\"DONE\",itemId:\"done\",}]",638831,36,710856,82,710505,290,710796,59,"itemId:\"dotContainer",649647,85,".\",itemId:\"dotBtn\"},{text:\"\",itemId:\"blankBtn\",hidden:true},{text:\"0\",itemId",649740,55,",itemId:\"backspace\"}]}]},initialize:function(){if(!this.config.keypadType){var b=this.getComponent(\"doneContainer\");b.setHidden(true)}if(this.config.keypadType===\"phone\"){var c=this.getComponent(\"dotContainer\");var a=c.getComponent(\"dotBtn\");var d=c.getComponent(\"blankBtn\");d.setHidden(false);a.setHidden(true",554749,32,"KeyTap:function(a,b){this.fireEvent(\"keytap\",(a.getText()?a.getText().toLowerCase():a.getItemId().toLowerCase()));b.stopPropagation(",573418,32,"Detail\",{extend:RM.component.Secure",603196,94,686495,39,707392,32,"back.svg\",iconCls:\"rm-backbtniconcls",711332,42,603413,221,"rrowimgbtn rm-photobtnfont",612464,34,"photo.svg\",iconCls:\"rm-photobtniconsize",603700,43,"secure",603743,598,"rmamount",604350,108,"decimalPlaces:2,prefix:\"$\"",604544,855,"alternateClassName:\"RM.ExpensesMgr\",",619119,32,605431,752,"TaxStatus:function(a){this.taxStatus",606223,53,"nvoiceDate:function(a){this.invoiceDate",606268,175,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",606459,520,"(b.LineText||b.Description||b.ItemName)",606992,262,"svg\",height:30,padding:0,iconCls:\"rm-lineitemcrossbg\",margin:\"-6",607289,75,"RM.AppMgr.formatCurrency",607394,215,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",607625,536,"(c.LineText||c.Description||c.ItemName)",608174,262,"RM.component.Secure",608440,36,"permissionFor:\"Invoices\",",585792,87,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",608591,134,":\"resources/images/icons/rm-settings.svg",608757,107,"secureformpanel\",permissionFor:\"Invoices",608873,280,609167,189,"clearIcon:true",609355,1751,",listeners:[{element:\"element\",event:\"tap\",fn:function(){this.toggleOptions()},scope:this}]",611106,1151,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,50,612335,54,"secure",612389,52,603647,44,"addnote.svg\",iconCls:\"rm-btniconsize\",iconAlign:\"left\",permissionFor:\"Invoices",612526,1398,614207,93,"},{text:\"Time\",itemId:\"time\",permissionFor:\"Timesheets_BillEntry\"",614330,37,"permissionFor:\"ExpenseClaims_BillEntry\"}],",614508,53,"a,d",620142,33,614059,95,"e){this.hide();a.call(d,e.getItemId())},scope:this}});var c=0;this.items.forEach(function(e){if(!e.permissionFor||RM.PermissionsMgr.getPermission(e.permissionFor)){b.add(e);if(e.itemId){c+=1}}});if(c>1){this.popup=b;b.show();",651310,41,"}else{a.call(d,this.items[1].itemId)}",599671,47,614437,434,614976,39,"var e=this.getItemId();if(e==5||e==10||e==20){e=e+\"%\"}a.call(b,e",614932,45,615094,661,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",672846,43,615826,122,"secure",615948,45,"ext",615993,62,"extselectfield\",label:\"Item type\",itemId:\"itemT",616081,165,"itemId:\"itemName\",labelWidth:\"7em",616244,92,616451,206,"rmamount",616663,38,"cls:\"rm-flatfield rm-cursor-blinkbg",604420,38,"decimalPlaces:2,prefix:\"$\",border:\"0",609821,35,"ccount\",itemId:\"account",616795,226,"ext",617021,146,"clearIcon",617178,1671,686495,57,":\"resources/images/icons/rm-back.svg",618944,175,"alternateClassName:\"RM.InvoicesMgr\",",619119,170," RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled?\"APPROVED\":\"UNPAID\";case ",619776,38,619343,88,"getInitialInvoiceStatus:function(){if(RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled){return RM.Consts.InvoiceStatus.DRAFT}else{return ",619737,32,"}",619429,235,"this.getInitialInvoiceStatus()",619693,189,"b,e",581422,59,"ustomerInvoicesC\");a.showView(c,d,b",619971,2036,"Ext.define(\"RM.util.MathHelpers\",{singleton:true,roundToEven:function(d,e){e=e||0;var h=Math.pow(10,e);var f=+(d*h);var g=Math.floor(f);var c=f-g;var a;var b=1e-8;if(c-b<0.5&&c+b>0.5&&g%2==0){a=g}else{a=Math.round(f)}return a/h}})",622655,86,"isUserLoggedIn=false;Ext.Ajax.setDefaultHeaders({\"X-APIV\":RM.Consts.Api.VERSION})",622782,251,623429,36,".init(a)",623531,36,".init(a)",623649,40,".init(a)",623767,50,"RM.HomeSettingsMgr.load",623827,765,"RM.CashbookMgr.getCashbookId()){RM.CashbookMgr.loadLastCashbook(function(){RM.ViewMgr.back()})}else{RM.CashbookMgr",624705,169,"RM.CashbookMgr.selectCashBook()}},this",625839,177,"RM.CashbookMgr",626020,49,"RM.ViewMgr.clearBackStack();this.logoutFromServer();this.login",626090,166,";this.login",626254,32,"if(this.isUserLoggedIn){",626672,37,626323,84,"isUserLoggedIn=false}",626414,231,"){this.getServerRec(c+\"/\"+e,{},a,b,d)},getServerRecs:function(b,f,a,c,d){var e=this;if(b.substr(0,4)!==\"http\"){b=e.getApiUrl(b)}Ext.Ajax.request({url:b",627191,74,"e",628608,50,627319,57,"c,h.recs",627387,32,"c",627420,155,";e.setLoadingTimer()},getServerRec:function(b,e,a,c,d){return this.getServerRecs(b,e,function(f){if(a){a.call(c,f[0])}},c,d",627574,477,"&&j.status!=401",628051,344,"d,e,h,g){var f=this;f.setLoadingTimer();var c=function(k,j,l){f",628608,63,"d,k,j,l)}}",628420,33,"k,j,l){if(l){c(k,j,l)}},scope:f",628692,200,"c){if(navigator.connection&&navigator.connection.type===\"none\"){this.showOkMsgBox(\"It looks like your device has no internet connection, please connect and try again.\");return}if(c",628899,35,"c.statusText===\"communication failure\"){this.showOkMsgBox(\"The connection failed, please try again or contact support.\")}else{if(c.status==412){var a=Ext.decode(c.statusText);this.showAppStop(a)}else{var b=c.statusText?\" \"+c.statusText:\"\";this.showErrorMsgBox(\"There was an error, please try again or contact support: <br/><br/> (\"+c.status+b+\")\")}",628999,113,"&&this.appTypeId!==RM.Consts.App.WEB_CONTAINER){b=\"production\"}this.apiLocation=b;if(b==\"staging",629169,33,".reckoncloud.com.au/api\"}else{if(b==\"production\"){this.baseApiUrl=\"https://mobile",629687,32,"preproduction\"){this.baseApiUrl=\"https://preprodmobile",629687,34,"v",629163,33,629353,43,"qa",629163,33,"r1mobileqa",629285,35,629467,84,"this.baseApiUrl=\"/api\"",629855,1522,"showInvalidEmail",631226,36,"\"Please enter a valid email address.\"",631374,74,"AppStop",620736,71,"AppStopC\");c.showView(a,b",631441,138,"sv",631581,92,"5",631674,391,"sv",632067,52,"sv",631581,72,"e,height:55,width:65",632213,1458,"c,b){if(Ext.isNumber(c)){c=RM.util.MathHelpers.roundToEven(c,b)}else{c=0}var a=c.toFixed(b||1).replace(/\\B(?=(\\d{3})+\\.)/g,\",\");if(!b){a=a.replace(\".0\",\"\")}return a",633770,88,"\\.)/g,\",\")},formatCurrency:function(d,c,e){if(isNaN(d)){d=0}if(!c&&c!==0){c=2}var a=(d<0);var b=this.numberWithCommas(Math.abs(d),c);d=\"$\"+b;if(a&&e){return\"(\"+d+\")\"}return(((a)?\"-\":\"\")+d)},unformatCurrency:function(a){return parseFloat(a.replace(/(\\()?(-)?(\\$)?(,)?(\\))?/g,\"\")",633871,133,"validateEmail:function(a){var b=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\\.([a-zA-Z])+([a-zA-Z])+/;if(b.test(a)){return true}else{return false}",634002,620,";Ext.create(\"RM.view.TestScreen\",{xtype:\"testscreen\",fullscreen:true}",634621,162,"controller.TestScreen",671040,44,"testScreen:\"testscreen\",testScreenForm:\"testscreen #testScreenForm\",},control:{testscreen:{show:\"onShow\"},\"testscreen #save\":{tap:\"save\"}}",644810,32,"TestScreenForm().getValues();console.log(Ext.encode(a))},onShow:function(){var a={Test1:\"A Text field\",Quantity:25.12345,ItemPrice:52625.123456789,BusPhone:\"072367672\"};this.getTestScreenForm().setValues",647600,36,634797,200,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",608591,42,635067,67,"width:\"4em",635132,225,"Production\",value:\"production\"},{text:\"Pre Production\",value:\"preproduction\"},{text:\"Staging\",value:\"staging\"},{text:\"QA Server\",value:\"qa",635381,63," IIS\",value:\"devlocaliis",635561,264,"width:\"7em",635823,771,"});Ext.define(\"RM.view.AppStop\",{extend:Ext.Panel,xtype:\"appstop\",config:{",605952,32,579008,96,"]},",606698,43,"\"vbox\",align:\"center\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-update-icon.svg\",height:40,width:40,margin:\"25px auto\"},{xtype:\"component\",html:\"A new update has been released!\",cls:\"rm-update-title\",margin:\"-8 0 5 0\"},{xtype:\"component\",html:\"Click below to update for security & stability.\",cls:\"rm-update-msg\",margin:\"0 0 25 0\"},{xtype:\"button\",itemId:\"update\",text:\"Update app >\",cls:\"rm-photopreviewbtn",595388,95,"ntroller.AppStop",671040,44,"appStop:\"appstop\"},control:{\"appstop #update\":{tap:\"onUpdate\"}}},showView:function(a){this.stopErr=a;RM.ViewMgr.showPanel2({xtype:\"appstop\"})},onUpdate",437371,34,"window.open(this.stopErr.AndroidUpgradeUrl,\"_system\")}if(Ext.os.is.iOS){window.open(this.stopErr.IosUpgradeUrl)}",636630,938,"menu",637568,1120,",zIndex:1000",638688,747,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,639519,93,"5",639615,2494,642169,203,"usinessNam",642783,32,"BusinessName]\",branchNam",642783,32,"BranchName]\",firstNam",642783,32,"FirstName]\",surnam",642783,33,"urn",642493,466,",hide:\"onHide",642958,573,"RM.ViewMgr.regFormBackHandler(this.back,this);",643531,178,647036,34,"ReadOnly(!this.isCreate);",680207,44,643763,293,658032,34,"FormBackHandler()",680892,58,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getContactForm())}",681129,54,644108,151,";if(Ext.isDefined(b.SaveSupport)&&!b.SaveSupport){this.setEditable(false)}if(b.ViewNotice){RM.AppMgr.showOkMsgBox(b.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack(",644285,246,"!a.FirstNameBranchName){this.getFirst",644572,42,"IsPerson==true&&!a.SurnameBusinessName){this.getSurn",644573,41,"IsPerson==false&&!a.SurnameBusinessName){this.getBusiness",644572,40,"!a.Description",644629,62,"Email!==\"\"&&!RM.AppMgr.validateEmail(a.Email)",736108,47,";RM.AppMgr.showInvalidEmailMsg();return b",690816,49,644812,93,"if(a.IsPerson===true){a.FirstNameBranchName=a.FirstName;a.SurnameBusinessName=a.Surname}else{a.FirstNameBranchName=a.BranchName;a.SurnameBusinessName=a.BusinessName}delete a.FirstName;delete a.Surname;delete a.BranchName;delete a.BusinessName",644904,83,"a.IsActive=true",644986,217,"RM.AppMgr.showOkMsgBox(c)}",685087,89,685213,179,645480,708,"usinessName().setHidden(false",647243,33,"false);this.getFirstName().setHidden(true);this.getSurname().setHidden(true",646306,193,646155,33,"usinessName().setHidden(true",647243,33,"true);this.getFirstName().setHidden(false);this.getSurname().setHidden(false",646680,409,";this.getFirstName().setValue(a.FirstNameBranchName);this.getSurname().setValue(a.SurnameBusinessName",647088,58,";this.getBusinessName().setValue(a.SurnameBusinessName);this.getBranchName().setValue(a.FirstNameBranchName",647145,108,647323,486,"btniconcls\",width:\"2.6em",612464,34,"back.svg",647839,2903,"sv",650744,495,"sv",651241,590,":\"resources/images/icons/rm-settings.svg",654672,60,668831,35,651956,996,"console.log(\"EnterPin onShow\");",652952,349,";RM.AppMgr.logoutFromServer",653299,477,"RM.AppMgr.showOkMsgBox",653781,365,"menu",637568,133,654279,363,":\"resources/images/icons/rm-settings.svg",654672,142,"M",654815,975,";RM.AppMgr.logoutFromServer",637248,106,655894,257,"menu",637568,126,656277,42,"window.open(RM.HomeSettingsMgr.getSetting(\"SignupUrl\"),\"_blank\",\"location=no\"",656348,600,"RM.AppMgr.showOkMsgBox",656953,342,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",672846,37,657360,1074,",function(b,c){RM.AppMgr.showOkMsgBox(c)},\"Setting p",653795,51,653711,35,658471,1005,659504,391,",function(a){if(a.length==0){RM.AppMgr.showOkMsgBox(\"You do not have any books to select.\",RM.AppMgr.lock,RM.AppMgr)}},this,null,null,function(){RM.AppMgr.login()",667184,164,660058,148,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,"Customer",585309,72,660370,2086,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",608591,42,662526,875,"{[RM.AppMgr.formatCurrency",663430,136,"{[RM.AppMgr.formatCurrency",663595,72,"return RM.AppMgr.formatCurrency(b,2,true)",759776,86,"}]",639712,32,663907,172,",zeroLineItemsCheckBox:\"budgetlineitems rmcheckbox\"},control:{budgetlineitems:{show:\"onShow\"},",664090,113,"c,b){this.budgetId=c;this.budgetName=b;",664208,90,"},onShow:function(){this.hideZeroLineItems=this.hideZeroLineItems||false;this.getBudgetTitle().setHtml(this.budgetName);this.getZeroLineItemsCheckBox().setValue(this.hideZeroLineItems);var a=",664508,40,735823,42,"BudgetLineItems\"));a.filter(\"BudgetId\",this.budgetI",664459,54,"hideZeroLineItems=a",664578,38,"var a=",664508,40,";a.removeAll();a.filter(\"IncludeZeroItems\",!this.hideZeroLineItems);RM.AppMgr.loadStore",728654,68,"Bill",660688,45,664791,2800,",noaccessCont:\"dashboard #noaccess",667586,44,"init:function(){this.callParent();RM.AppMgr.application.on({\"rm-permissionsupdated\":this.showDashboardData,scope:this})",667628,100,")},showDashboardData:function(){var a=RM.PermissionsMgr.canView(\"PAndLReport\");var e=RM.PermissionsMgr.canView(\"Invoices\");var c=RM.PermissionsMgr.canView(\"Bills\");var d=RM.PermissionsMgr.canView(\"AccountEnquiryReport\");var b=RM.PermissionsMgr.canView(\"Budgets\");if(this.getNoaccessCont()){this.getNoaccessCont().setHidden(a||e||c||d||b)}if(this.getDashboardCont()){if(a",667805,36,"this.dashboardData)}if(e||c){this.getAlerts().setViewData(this.dashboardData)}if(d){",667876,34,"this.dashboardData.TopExpenses)}if(b){",667925,37,"this.dashboardData.BudgetOverview)}this.getNetPosition().setHidden(!a);this.getAlerts().setHidden(!(e||c));this.getTopExpenses().setHidden(!d);this.getBudgetOverview().setHidden(!b)}",668356,339,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,668779,87,"username and",668865,91,"textfield\",itemId:\"username\",label:\"Usernam",687553,37,687136,32,654962,32,668953,44,"rmmandatory:true,labelWidth:\"4em",601295,50,669073,748,"userName:\"forgotpassword #username",669819,421,"){var c=true;var b=this.getEmail().getValue();var a=this.getUserName().getValue();this.getEmail().showValidation(true);this.getUserName().showValidation(true);if(b==\"\"&&a",736104,44,"this.getUserName().showValidation(false);c=false;RM.AppMgr.showInvalidFormMsg();return c}",670254,48,"c=false}if(a==\"\"){this.getUserName().showValidation(false);c=false;RM.AppMgr.showInvalidFormMsg();return c}if(!RM.AppMgr.validateEmail(b)",736108,40,"c=false;RM.AppMgr.showInvalidEmailMsg();return c}if(!c",746526,40,"c},onSend",746575,36,670434,87,"UserName().getValue(),Email",670512,38,"a",670551,36,"b,a){this.showFail(a",670607,101,"your password reset details",670745,268,"view.CustomerInvoices\",{extend:RM.component.Secure",567977,39,"permissionFor:\"Invoices\",layout:\"fit\",items:[{xtype:\"titlebar\",docked:\"top\",title:\"A Title\",itemId:\"title",672751,67,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls\",align:\"left\"},{text:\"ADD\",itemId:\"add\",align:\"right\",xtype:\"securebutton\",permissionFor:\"Invoices",575582,86,"Due date\",value:\"duedate",569019,33,617296,39,"sList",618702,34,"slist\",config:{layout:\"fit\",control:{list:{itemtap:\"onItem",617504,36,"ustomerId=this.config.customerId;",673131,74,"var b=(this.config.sortVal==\"duedate\");",714652,36,"Invoices\");if(b",665407,34,"}else{a.setGroupField(null)}this.loadList()",587066,32,673236,56,"b",673296,137,677087,210,"reload:function(){this.loadList()},setS",675786,53,"clearSearch",675850,47,",loadList",714640,48,"Invoic",735819,53,"s\")",731087,36,676825,88,641661,166,677296,192,"RM.AppMgr.showOkMsgBox(b)})",673484,313,"{[RM.AppMgr.formatCurrency",674320,36,"div>",757087,34,674062,38,673938,353,"{[RM.AppMgr.formatCurrency",674320,1188,671024,60,"C",671085,43,"Title:\"customer",675624,32,671172,42,"\"customerinvoices #back\":{tap:\"back\"},",671214,88,"\"onSearch\",searchclear:\"onSearchClear",671546,146,"c,d,b,e){this.invoicesTitle=c;this.customerId=d;this.customerName=b;",671694,92,676420,35,"e)",676575,47,"Title('<span style=\"text-shadow:none; font-weight:normal;\">'+this.invoicesTitle+\"</span>\"",739163,37,671950,42,"activeList.reload()}",696767,35,"CustomerInvoices();a.removeAt(2);this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false,customerId:this.customerId})},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",677497,179,701552,34,"});Ext.define(\"RM.component.CustInvSummaryLis",711151,32,"invsummarylist\",config:{layout:\"fit\",control:{list:{select:\"onItemSelect",566990,63,568352,395,");",714652,36,"CustomerInvoic",735819,46,"CustomerInvoices\"));RM.AppMgr.loadStore(a)",672144,173,"reload:function(){this.loadList()},setS",675786,53,"clearSearch",675850,47,",loadList",714640,48,"CustomerInvoices\"",715611,32,676880,33,739901,196,"nvoice",660688,45,"Invoices:\"invoices",675639,51,675720,72,"\"onSearch\",searchclear:\"onSearchClear\"},\"",671510,40,671558,150,676154,37,708394,45,"if(!this.dataLoaded){this.onSort(\"duedate\");this.dataLoaded=true}else{this.activeList.reload()}",739164,36,"nvoice\"){this.activeList.reload()}",696767,35,"Invoices();a.removeAt(2);if(b==\"customer\"){this.activeList=a.add({xtype:\"custinvsummarylist\"})}else{this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false})}},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",672314,94,"});Ext.define(\"RM.util.FormUtils\",{singleton:true,makeAllFieldsReadOnly:function(a){a.getFieldsArray().forEach(function(b){if(b.setReadOnly){b.setReadOnly(true)}if(b.setPlaceHolder){b.setPlaceHolder(\"\")}})",687871,37,677983,726,",hide:\"onHide",678708,228,"change",678948,309,",dateFld:{change:\"onInvoiceDateChange",671581,111,"c,f,a,e){this.lineItemsDirty=false;",679374,33,"f?f",643248,37,"e",716928,43,"c){var d=new Date();d.setHours(0,0,0,0);",679472,57,"InvoicesMgr.getInitialInvoiceStatus(),AmountTaxStatus:RM.CashbookMgr.getTaxPreferences().SalesFigures,Date:d,Discount:\"None\",Amount:0,DiscountTotal:0,Tax:0,Subtotal:0,Paid:0,BalanceDue:0",679601,76,"&&RM.PermissionsMgr.canAddEdit(\"Invoices\"",679676,108,"RM.ViewMgr.regFormBackHandler(this.back,this);",679784,134,680034,85,"if(!this.dataLoaded){",680119,76,643728,35,680251,56,"this.detailsData;if(b.CustomerId){",680560,78,"applyTaxRules",682848,32,680662,127,";this.getLineItems().setInvoiceDate(this.getDateFld().getValue());this.getLineItems().setTaxStatus(b.AmountTaxStatus",679911,66,"b.Status));this.dataLoaded=true}}",658030,36,"FormBackHandler",739162,38,680847,103,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getInvoiceForm())}",681093,38,"applyTaxRules:function(){var b=this.getAmountsFld();var a=RM.CashbookMgr.getTaxPreferences();b.setReadOnly(!this.isEditable||!a.AllowTaxEdit);if(this.isCreate){if(a.IsTaxTracking){b.setHidden(false);b.setValue(a.SalesFigures)}else{b.setHidden(true);b.setValue(RM.Consts.TaxStatus.NON_TAXED)}}else{var c=a.IsTaxTracking||b.getValue()!==RM.Consts.TaxStatus.NON_TAXED;b.setHidden(!c)}",681129,103,679913,64,"c.Status));",681232,282,"RM.AppMgr.formatCurrency",681536,54,"c.Notes=c.Notes?c",717593,51,"c);this.applyTaxRules",682848,32,"c.AmountTaxStatus;if((Ext.isDefined(c.SaveSupport)&&!c.SaveSupport)||this.detailsData.Paid>0){this.isEditable=false;this.setEditable(false)}",681652,59,"CustomerId(c.CustomerId);b.setTaxStatus(c.AmountTaxStatus);b.setInvoiceDate(c.Date",681855,63,680062,42,"false);this.dataLoaded=true;if(c.ViewNotice){RM.AppMgr.showOkMsgBox(c.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack(",681944,157,"this.goBack();RM.AppMgr.showOkMsgBox",682106,716,"e,d,a){if(!this.dataLoaded){return}this.detailsData.AmountTaxStatus=d;this.previousAmountTaxStatus=a;var b=this;function c(){b.calculateBreakdown();b.getLineItems().setTaxStatus(d);b.previousAmountTaxStatus=d}if(d===RM.Consts.TaxStatus.NON_TAXED&&this.taxModificationsExist()){RM.AppMgr.showYesNoMsgBox(\"This change will remove the modified tax information on all your line items, are you sure you want to do this?\",function(f){if(f===\"yes\"){c()}else{e.suspendEvents();e.setValue(a);this.detailsData.AmountTaxStatus=a;e.resumeEvents(true)}},this)}else{c()}},onInvoiceDateChanged:function(b,c,a){if(!this.dataLoaded){return}this.calculateBreakdown();this.getLineItems().setInvoiceDate(c",682891,476,"d",685627,35,"var c",683404,39,"b={CustomerId:d.CustomerId,InvoiceDate:d.Date,AmountTaxStatus:d",683482,87,"d",691154,41,"entage=d",685839,34,"d",691244,44,"d.Discount.replace(\"$\",\"\")}}if(b.PreviousAmountTaxStatus!==b.AmountTaxStatus){if(b.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED){c=c.map(function(e){e.TaxGroupId=null;e.Tax=null;e.TaxIsModified=false;return e})}else{c=c.map(function(e){e.TaxGroupId=e.DefaultTaxGroupId;return e})}}b.LineItems=c.map(function(e){return{InvoiceLineItemId:e.InvoiceLineItemId,ItemType:e.ItemType,ItemID:e.ItemId,Proje",741406,37,"UnitPriceExTax:e.UnitPriceExTax,DiscountAmount:e.DiscountAmount,DiscountAmountExTax:e.DiscountAmountExTax,DiscountAmountTax:e.DiscountAmountTax,DiscountPercentage:e.DiscountPercentage,TaxGroupID:e.TaxGroupId,Tax:e.Tax,TaxIsModified:e.TaxIsModified}}",686080,34,"Calc\",true,b,function a(e){var l=e[0];var h=this.detailsData;h.Amount=l.TotalIncludingTax;h.AmountExTax=l.TotalExcludingTax;h.Tax=l.Tax;h.Subtotal=l.Subtotal;h.DiscountTotal=l.Discount||0;h.Paid=l.AmountPaid;h.BalanceDue=l.BalanceDue;var g=this.getLineItems();g.removeAllItems();for(var f=0;f<c.length;f++){var k=c[f];var j=null;Ext.Array.some(l.Items,function(m){if(m.InvoiceLineItemId===k.InvoiceLineItemId){j=m;return true}});if(!j){c[f]=null}else{Ext.apply(k,j)}}c=Ext.Array.clean(c);g.setTaxStatus(b.AmountTaxStatus);g.addLineItems(c",684608,42,"e){RM.AppMgr.showOkMsgBox(e);this.goBack(",684660,76,"RM.AppMgr.formatCurrency",684785,32,684818,808,"c",685627,35,"c",685663,49,724765,34,"delete b.DiscountPerc;delete b.DiscountAmount;if(b",691154,42,"b",685839,34,"b",691244,44,"b",685919,34,"b.Discount;b",719440,42,"b)){if(c.LineItems.length>0){var a=1;c.LineItems.forEach(function(d){d.lineNo=a;if(d.IsNew){delete d.InvoiceLineItemId}a+=1});",741726,43,"b",686080,51,"b",686132,111,"d,e){RM.AppMgr.showOkMsgBox(e",686255,82,",taxModificationsExist:function(){var b",683404,39,"a=false;Ext.Array.some(b,function(c){if(c.TaxIsModified||c.TaxGroupId!==c.DefaultTaxGroupId){a=true;return true}});return a",590910,32,602724,207,"this.on(\"keyup\",this.valChange);this.on(\"blur\",this.numberPrecision",588254,76,603006,140,",valChange:function(a,f,c){var g=this.getValue();console.log(f.browserEvent.keyCode);if(!(47<f.browserEvent.keyCode<58||f.browserEvent.keyCode==190)){f.stopEvent()}if(g===null||g===undefined){console.log(g);return}var b=g.toString();var d=b.length;if(this.config.decimalPlaces&&b.indexOf(\".\")!=-1){if(d-1>(b.indexOf(\".\")+this.config.decimalPlaces)){this.setValue(b.substring(0,d-1))}}console.log(this.getValue()",633572,49,"&&Ext.isNumber(this.config.decimalPlaces)){this.setValue(a.toFixed(this.config.decimalPlaces))}},getValue:function(){this.showValidation(true);",477264,49,686352,133,686495,57,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",759431,32,686612,126,"secureformpanel\",permissionFor:\"Invoices",686747,40,592732,51,588830,43,588798,32,"ItemPath",686861,60,711783,33,"clearIcon",600416,37,",permissionFor:{action:\"Select\",name:\"Projects\"},",687066,40,"readOnly:true",604619,70,687175,43,"itemId:\"descriptionField",687216,41,"[\"rm-flatfield\",\"rm-flatfield-last\"],placeHolder:\"enter\"},{xtype:\"container\",itemId:\"detailsFields\",defaults:{clearIcon:false},hidden:true,items:[{xtype:\"rmamountfield\",name:\"UnitPrice",687337,91,",decimalPlaces:8,prefix:\"$\"},{xtype:\"rmamount",588992,67,"decimalPlaces:4,trailingZerosUpTo:0,currencyMode:false,prefix:\"\"",610062,40,"label:\"Discount\",readOnly:true,placeHolder:\"none\",value:0,cls:[\"rm-flatfield\"]},{xtype:\"rmamountfield\",name:\"Amount\",itemId:\"Amount\",label:\"Amount\",value:0",711782,34,"decimalPlaces:2,prefix:\"$",609821,34,589104,48,"TaxGroupId\",itemId",687609,77,"autoSelect:false",733758,40,"rmamountfield\",name:\"Tax\",itemId:\"Tax\",label:\"Tax\",labelWidth:\"7em\",cls:[\"rm-flatfield\",\"rm-flatfield-last\"],decimalPlaces:2,prefix:\"$\",clearIcon:true}]}]}]},showDetailsFields:function(){this.down(\"#descriptionField\").removeCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(false)},hideDetailsFields:function(){this.down(\"#descriptionField\").addCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(true)},hideTaxFields:function(){this.down(\"#TaxGroupId\").setHidden(true);this.down(\"#Tax\").setHidden(true);this.down(\"#Amount\").addCls([\"rm-flatfield-last\"])},setTaxModified:function(a){var b=this.down(\"#Tax\");if(a){b.addCls([\"rm-field-warning\"]);b.setLabel(\"Tax (modified)\");b.removeCls(\"clear-icon-hidden\")}else{b.removeCls([\"rm-field-warning\"]);b.setLabel(\"Tax\");b.addCls(\"clear-icon-hidden\")}}});Ext.define(\"RM.util.PseudoGuid\",{singleton:true,currentIndex:1,guidMask:",729566,38,",next:function(){var b=this.currentIndex.toString();var a=new RegExp(\"0{\"+b.length+\"}$\");var c=this.guidMask.replace(a,b);this.currentIndex+=1;if(this.currentIndex>999999999999){this.currentIndex=1}return c",687871,214,688092,34,":\"invoicelineitem field[name=UnitPrice]\",quantity:\"invoicelineitem field[name=Quantity]\",discount:\"invoicelineitem field[name=Discount]\",taxCode:\"invoicelineitem field[name=TaxGroupId]\",tax:\"invoicelineitem field[name=Tax]\",amount:\"invoicelineitem field[name=Amount",688295,32,688334,49,"field[name=ProjectID]\",itemId:\"invoicelineitem field[name=ItemId]\",projectName:\"invoicelineitem field[name=ProjectName]\",",688411,174,",unitPrice:{valueChange:\"unitPriceChanged\"},tax:{valueChange:\"taxAmountChanged\",clearicontap:function(){this.taxAmountChanged(null,null)}},taxCode:{change:\"taxCodeChanged\"},quantity:{valueChange:\"quantityChanged\"},discount:{change:\"discountChanged\"},projectName:{change:\"projectChanged\"}}},isTaxInclusive:function(){return this.taxStatusCode===RM.Consts.TaxStatus.INCLUSIVE},showView:function(e,f,d,g,a,c){this.ignoreEvents=false",688645,42,"taxStatusCode=d.taxStatus;this.invoiceDate=d.invoiceDate",716893,36,"if(g){this.isCreate=false;this.detailsData=g}else{this.isCreate=true;this.detailsData={IsNew:true,InvoiceLineItemId:RM.util.PseudoGuid.next(),UnitPriceAccuracy:2,Quantity:1,TaxGroupId:null,TaxIsModified:false",688972,131,"b",689104,70,"getAdd",679871,47,680034,37,"Tax().setReadOnly(!RM.CashbookMgr.getTaxPreferences().AllowTaxEdit);if(!this.initShow){b.reset();b",721916,37,"DiscountDisplayValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);var a=RM.util.MathHelpers.roundToEven(this.isTaxInclusive()?this.detailsData.UnitPrice:this.detailsData.UnitPriceExTax,this.detailsData.UnitPriceAccuracy);this.getUnitPrice().setValue(a);if(this.taxStatusCode===RM.Consts.TaxStatus.NON_TAXED){this.getItemDetail().hideTaxFields()}this.setTaxModified(this.detailsData.TaxIsModified);if(this.detailsData.ItemId){this.getItemDetail().showDetailsFields()}this.initialFormValues=b.getValues();this.initShow",717836,73,"Item",717918,44,"setEditable:function(a){if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getItemForm())}},setTaxModified:function(a){this.detailsData.TaxIsModified=a;this.getItemDetail().setTaxModified(a)},setDiscountDisplayValue:function(b,a){var c;if(b){c=b+\"%\"}else{if(a){c=RM.AppMgr.formatCurrency(a,2)}else{c=\"\"}}this.getDiscount().setValue(c",689813,133,"||0,function(c){b.setValue(c==0?\"",689992,304,"this.itemChanged(c[0])},this)}}}}},goB",741152,34,685231,104,"add",685339,51,723904,42,690587,66,"UnitPriceExTax){this.getUnitPrice",690784,141,"delete c.Amount;delete c.UnitPrice;delete c.Tax;delete c.Discount;var b=Ext.apply(this.detailsData,c);b.ItemType=a;b.Quantity=b.Quantity||1;",691328,85,",itemChanged:function(a){this.detailsData.ItemName=a.Name;this.detailsData.DefaultTaxGroupId=a.SaleTaxCodeID;this.detailsData.UnitPriceExTax=a.UnitPriceExTax;this.setTaxModified(false);this.ignoreEvents=tru",690338,39,"a.ItemId,ItemName:a.ItemPath,TaxGroupId:a.SaleTaxCodeID,Description:a.SalesDescription,UnitPrice:this.isTaxInclusive()?\"\":a.UnitPriceExTax});this.ignoreEvents=false;var b=this;this.getServerCalculatedValues(\"Item\",function(){b.getItemDetail().showDetailsFields()})},unitPriceChanged:function(b,a){if(this.ignoreControlEvents()){return}var c=b.toString().split(\".\");if(c.length==2&&c[1].length>1){this.detailsData.UnitPriceAccuracy=c[1].length}else{this.detailsData.UnitPriceAccuracy=2}if(!this.isTaxInclusive()){this.detailsData.UnitPriceExTax=b}this.getServerCalculatedValues(\"UnitPrice\")},discountChanged:function(c,b,a){if(this.ignoreControlEvents()){return}this.detailsData.DiscountAmount=null;this.detailsData.DiscountAmountExTax=null;this.detailsData.DiscountPercentage=null;if(b.indexOf(\"%\")>-1){this.detailsData.DiscountPercentage=parseFloat(b.replace(\"%\",\"\"))}else{if(b.indexOf(\"$\")>-1){if(this.isTaxInclusive()){this.detailsData.DiscountAmount=RM.AppMgr.unformatCurrency(b)}else{this.detailsData.DiscountAmountExTax=RM.AppMgr.unformatCurrency(b)}}}this.getServerCalculatedValues(\"Discount\")},taxAmountChanged:function(b,a){if(this.ignoreControlEvents()){return}if(!b){this.detailsData.TaxIsModified=false}else{this.detailsData.TaxIsModified=true}this.getServerCalculatedValues(\"Tax\")},taxCodeChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Tax\")},projectChanged:function(c,b,a){if(this.ignoreControlEvents()){return}if(!b){this.getProjectId().setValue(null)}if(this.getItemId().getValue()){}},quantityChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Quantity\")},getServerCalculatedValues:function(f,b){var d={AmountTaxStatus:this.taxStatusCode,PreviousAmountTaxStatus:this.taxStatusCode,CustomerId:this.customerId,InvoiceDate:this.invoiceDate,LineItems:[]};var c",741214,36,"e={ChangeStatus:2,ItemId:c.ItemId,Quantity:c.Quantity||1,TaxGroupID:c.TaxGroupId,TaxIsModified:this.detailsData.TaxIsModified,Tax:this.detailsData.TaxIsModified?c.Tax:null,UnitPriceExTax:this.detailsData.UnitPriceExTax};if(this.detailsData.DiscountPercentage){e.DiscountPercentage=this.detailsData.DiscountPercentage}else{e.DiscountAmountExTax=this.detailsData.DiscountAmountExTax;e.DiscountAmountTax=this.detailsData.DiscountAmountTax}switch(f){case\"UnitPrice\":e.UnitPrice=this.getUnitPrice().getValue();e.UnitPriceIsModified=true;break;case\"Quantity\":e.QuantityIsModified=true;break;case\"Discount\":if(!e.DiscountPercentage){e.DiscountAmount=this.isTaxInclusive()?this.detailsData.DiscountAmount:this.detailsData.DiscountAmountExTax;e.DiscountAmountExTax=this.isTaxInclusive()?null:this.detailsData.DiscountAmount;e.DiscountAmountTax=null}e.DiscountIsModified=true;break}d.LineItems.push(e",686080,34,"Calc\",true,d,function a(j){var g=j[0].Items[0];this.ignoreEvents=true;this.detailsData.UnitPriceExTax=g.UnitPriceExTax;this.detailsData.UnitPrice=g.UnitPrice;this.detailsData.Amount=g.Amount;this.detailsData.AmountExTax=g.AmountExTax;this.detailsData.AmountTax=g.AmountTax;this.detailsData.Tax=g.Tax;this.detailsData.DiscountedTaxAmount=g.DiscountedTaxAmount;this.detailsData.DiscountedTaxExclAmount=g.DiscountedTaxExclAmount;this.detailsData.DiscountAmount=g.DiscountAmount;this.detailsData.DiscountAmountExTax=g.DiscountAmountExTax;this.detailsData.DiscountAmountTax=g.DiscountAmountTax;this.setDiscountDisplayValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);this.setTaxModified(g.TaxIsModified);var h=RM.util.MathHelpers.roundToEven(this.isTaxInclusive()?g.UnitPrice:this.detailsData.UnitPriceExTax,this.detailsData.UnitPriceAccuracy);this.getItemForm().setValues({UnitPrice:h,Amount:RM.util.MathHelpers.roundToEven(g.Amount,2),Tax:RM.util.MathHelpers.roundToEven(g.Tax,2)});this.ignoreEvents=false;if(b){b()}},this,function(g){alert(g)},\"Working...\")},ignoreControlEvents:function(){if(!this.initShow||this.ignoreEvents){return true}",687871,37,691449,1444,"RM.component.Secure",692897,40,"permissionFor:\"Invoices\",",585792,87,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,693108,4017,"display:inline",697135,1291,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,698510,905,"{[RM.AppMgr.formatCurrency",574297,62,694093,758,")",568640,109,602784,50,695209,296,700720,1648,"display:inline",697135,70,702448,2467,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,704999,580,705606,146,706125,57,705807,126,"{1}</span></div></tr>'+(a.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED?\"\":'",706335,37,"row\"><span>Total (excluding tax)",705757,49,"{2",705936,119,"{3}</span></div></tr>')+'",706335,37,705741,65,"{4",705936,67,706252,61,"{5",705936,56,706372,71,"{6",706446,40,"Currency(a.Subtotal),this.formatCurrency(a.DiscountTotal),this.formatCurrency(a.AmountExTax),this.formatCurrency(a.Tax),this.formatCurrency(a.Amount),this.formatCurrency(a.Paid),this.formatCurrency(a.BalanceDue)))},formatCurrency:function(a){return RM.AppMgr.formatCurrency(a,2",706736,251,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,707071,183," rm-invoiceactionbtnlabel",612464,35,"ccept.svg\",iconCls:\"rm-invoiceactioniconcls",707298,92," rm-invoiceactionbtnlabel",612464,34,707424,108," rm-invoiceactionbtnlabel",612464,34,"email.svg\",iconCls:\"rm-invoiceactioniconcls",707575,105," rm-invoiceactionbtnlabel",707680,42,"svg\",iconCls:\"rm-invoiceactioniconcls",707725,804,"var a=!(",708563,59,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",708526,36,"a);var b=!(",708746,58,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",708710,35,"b",708622,90,708805,171,"slidenavigationview\");RM.AppMgr.showSuccessMsgBox(\"Invoice \"+this.invoiceData.InvCode+\" was Approved.\")},this,function(a,b){RM.AppMgr.showOkMsgBox",709012,1157,"RM.AppMgr.loadStore(this.getHistory",664659,72,711133,157,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",711318,179,"secureformpanel\"",711517,42,"component\",height:1},{xtype:\"rmamoun",711565,55,"rencyMode:false,decimalPlaces:4,prefix:\"\",clearIcon:false,maxValue:100",603952,33,"enter\"},{xtype:\"rmamoun",711705,58,"decimalPlaces:2,prefix:\"$",603935,50,"enter",595388,95,711984,258,"rmamountfield\":{focus:\"onFieldFocus",712348,150,"console.log(\"CustomDiscount showView\")",712497,270,"parseFloat(b.replace(\"%\",\"\")",712783,53,"RM.AppMgr.unformatCurrency(b",712875,33,"Focus:function(a){console.log(\"focus\"",712651,40,713079,105,"validateForm:function(){console.log(\"validateForm\");",713493,321,"RM.AppMgr.formatCurrency",713847,38,713886,2747,",hide:\"onHide",716632,499,"RM.ViewMgr.regFormBackHandler(this.back,this);",717131,713,658032,34,"FormBackHandler(",682123,33,722058,35,717909,1647,"RM.AppMgr.showSuccessMsgBox(\"Timesheet saved\"",645120,35,"timesheet\");this.goBack()},this",719568,57,"RM.AppMgr.showOkMsgBox",719630,884,"text",720520,170,",hide:\"onHide",720689,538,"RM.ViewMgr.regFormBackHandler(this.back,this);",721227,403,721645,383,658032,34,"FormBackHandler(",682123,33,722058,226,"sv",722286,59,"sv",722347,3635,";RM.AppMgr.itemUpdated(\"expense\"",725981,1337,"var f=Ext.decode(e.responseText);if(f.success){",725917,55,"RM.AppMgr.itemUpdated(\"expense\");this.goBack()},this)}else{RM.AppMgr.showOkMsgBox(f.eventMsg)}},failure:function(e){",627525,34,"e)",727353,5657,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,175,"secure",733213,149,",labelWidth:\"4",609678,33,733392,169,"svg\" style=\"margin-right: 10px; width: 18px; height: 18px;",733591,197,",permissionFor:{name:\"SalesPreferences\",action:\"View\"}",733788,228,",listeners:{focus:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)},keyup:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)}}",734016,2078,"this.getEmail().showValidation(true);",736174,33,"true);if(a.Email==\"\"&&a.Subject",736104,44,736174,47,";RM.AppMgr.showInvalidFormMsg();return b}",736094,127,";RM.AppMgr.showInvalidFormMsg();return b}if(!RM.AppMgr.validateEmail(a.Email)",736108,47,";RM.AppMgr.showInvalidEmailMsg();return b",690816,49,736270,278,",\"Sending...\"",736548,697,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,50,742958,61,575566,55,737437,70,",maxRows:1",705104,33,"AddNot",734687,45,737590,669,"var a=this.getNoteText().getValue();if(a",738257,32,"a)}else{RM.AppMgr.showOkMsgBox(\"Please enter some text for the note\")}",738319,3616,"itemTypeFld:\"createitem #itemType\",itemNameFld:\"createitem #itemName",741933,125,"createitem:{show:\"onShow\"},",742058,57,"save",655535,33,657852,40,742194,175,"how:function(){this.initialFormValues",742389,37,644810,33,742399,43,"RM.Consts.ItemStatus.ACTIVE",736394,52,742541,92,"RM.AppMgr.showOkMsgBox(c)})}",682124,32,722058,35,"CreateItem",717918,44,723904,42,"ItemType){this.getItemType",723968,42,"Name",690593,60,"SaleCategoryID){this.getAcctCa",723967,41,644768,44,"goB",741152,34,685231,159,742679,36,"Old",743565,40,742755,139,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",743759,67,575520,46,743019,542,743565,40,742755,45,615648,89,707392,32,"back.svg\",iconCls:\"rm-backbtniconcls",711332,42,"Pay invoic",711391,49,"PAY\",itemId:\"pay",575582,40,"ecure",733213,36,"rmamountfield\",name:\"AmountPaid",604369,34,"labelWidth:150",601296,49,"Enter\",decimalPlaces:2,prefix:\"$",609821,34,"Bank Account\",rmmandatory:true,labelWidth:150,usePicker:true,name:\"BankAccountID\",store:\"BankAccounts\",displayField:\"Description\",valueField:\"BankAccountID\",autoSelect:false,placeHolder:\"S",610009,36,609822,33,"Payment Method\",rmmandatory:true,labelWidth:150,usePicker:true,name:\"PaymentMethodID\",store:\"PaymentMethods\",displayField:\"Description\",valueField:\"PaymentMethodID\",autoSelect:false,placeHolder:\"Select",600688,32,595390,91,744437,423,"acceptPaymentForm:\"acceptpayment formpanel\",amountPaid:\"acceptpayment textfield[name=AmountPaid]\",bankAccount:\"acceptpayment extselectfield[name=BankAccountID]\",paymentMethod:\"acceptpayment extselectfield[name=PaymentMethodID]",745004,112,745148,55,"pay\":{tap:\"onPay",745313,107,"b){this.invoiceId=b.InvoiceId;this.fullAmount=b.BalanceDue;this.accountsReceivableCategoryID=b.AccountsReceivableCategoryID;this.customerId=b.CustomerId",745476,64,"this.loadSelectFields();",708396,43,"var a=this.getAcceptPaymentForm();a.setValues({AmountPaid:this.fullAmount})},loadSelectFields:function(){",709783,36,"BankAccounts\");b",728064,40,"BankAccount\"));RM.AppMgr.loadStore(b,function(){},this);",714652,36,"PaymentMethod",735820,45,"PaymentMethod\")",735955,35,"},this)",747003,163,"Payment Accepted",747246,45,"slidenavigationview\"",644287,42,"!a.AmountPaid){this.getAmountPaid",690784,37,"a.BankAccountID){this.getBankAccount",690784,37,"a.PaymentMethodID){this.getPaymentMethod",690784,70,";return false}if(a.AmountPaid>this.fullAmount){this.getAmountPaid().showValidation(false);RM.AppMgr.showErrorMsgBox(\"Payment Amount cannot be more than the balance due amount of \"+RM.AppMgr.formatCurrency(this.fullAmount));b=false}return b},onPay",747012,39,"Form().getValues();a.InvoiceID=this.invoiceId;a.AccountsReceivableCategoryID=this.accountsReceivableCategoryID;a.CustomerSupplierID=this.customerId",736394,51,"AcceptPayment\",true,a",746887,75,"b,c){RM.AppMgr.showOkMsgBox(c)})}},onB",736943,74,"pay invoice",737030,77,747367,3409,"idProperty:\"AcctCatName\",",750776,3923,"ageSize:8",754697,2445,"'+RM.AppMgr.formatCurrency(b.get(\"PeriodAmount\"",757214,634,"TestScreenC\",\"CoreSettingsC\",\"AppStop",757860,1357,55391,32,".prototype.isNotPreventable=/^(select|a|input|textarea)$/i",759217,158,":\"resources/images/icons/rm-back.svg\",iconCls:\"rm-backbtniconcls",733038,56,"Item",585309,62,759525,366]