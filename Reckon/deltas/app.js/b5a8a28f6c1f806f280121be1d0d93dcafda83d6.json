["/*f2ba3312b2b976046f2f0f6753eeb8d1163a68bc",42,439506,440149,88829,",\"data\"",528978,27361,"Consts\",{alternateClassName:\"RM.Consts\",singleton:true,",621922,70,"60000,STORE_LOAD_TIME_OUT:60000,VERSION:0.1",622022,536,",NoAccessMsg:\"No access rights\"",556316,40,"alternateClassName:\"RM.PermissionsMgr\",",619023,32,556388,57,".map(function(b){return b.toLowerCase?b.toLowerCase():b});this.triggerUpdateEvent()},getPermission:function(b){var a=this.permissions.indexOf(b.toLowerCase())>-1;return a",556510,48,"a+\"_\"+b)},canApprov",556670,35,"Approve\")},canAddEdit",556671,34,"AddEdit\")},canView",556671,34,"V",556655,50,"D",556706,52,"Report\")},canSelect",556671,34,"Select\")},triggerUpdateEvent:function(){this.app.fireEvent(\"rm-permissionsupdated",556764,37,"alternateClassName:\"RM.EventMgr\",",556801,1829,"Expenses))+'</span>",558650,170,558828,236,"msg\",flex:1},",559055,50,",{itemId:\"blankCont",559096,244,"d){var b=this.getComponent(1);var e=RM.PermissionsMgr.canView(\"Invoices\");var a=RM.PermissionsMgr.canView(\"Bills\");var c=b.getComponent(\"msg\");c.setHidden(e||a);c",560550,43,"'+RM.Consts.NoAccessMsg+\"</div>\");b.getComponent(\"invoices\").setHidden(!e);b.getComponent(\"bills\").setHidden(!a);b.getComponent(\"blankCont\").setHidden(!(e||a)||(e&&a));if(!e&&!a){return}b",559363,96,"d",559460,226,"d",559687,78,"b",559785,91,"'+d.Bill",559468,110,559959,36,"Due soon",559624,62,"d.Bill",559695,69,"},onBillsTap:function(){RM.ViewMgr.showBills()",560117,2006,"c){try",562125,37,"c==null||c",562172,139,"c.length;a++){this.addBudget(c[a],a)}this.paintChart(c)}catch(b){console.log(\"**** Exception in BudgetOverview setViewData \"+b.message)}",562366,1736,"scrollable:\"vertical\",cls:\"rm-dashboard",564141,129,",",606572,36,"hidden:true,itemId:\"noaccesscont\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-noaccess-icon.png\",width:75,height:69,margin:\"25px auto\"},{xtype:\"component\",html:\"You do not have enough access </br>rights to view the dashboard\",cls:\"rm-update-title\",margin:\"-5 0 30 0\"",668841,34,"tap the top left button to </br>gain access to other parts of this book.\",cls:\"rm-update-msg\",margin:\"20 0 20 0",617200,34,"SecurePanel\",{extend:Ext.Panel,xtype:\"securepanel\",config:{permissionFor:\"\"",611343,37,"heckPermissions()}}},checkPermissions:function(){var a=this.getPermissionFor();if(a&&!RM.core.PermissionsMgr.canView(a)){RM.AppMgr.showErrorMsgBox(\"You are not permitted to view this screen\"",602523,37,565485,37,564570,3199,"component.Secure",565522,34,"securebutton\",config:{permissionFor:\"\"",611343,37,"heckPermissions()",648879,42,");RM.AppMgr.application.on({\"rm-permissionsupdated\":this.checkPermissions,scope:this})},checkPermissions:function(){var a=this.getPermissionFor();if(!a){return}var b=false;if(typeof(a)===\"string\"){b=RM.core.PermissionsMgr.canAddEdit(a)}else{b=RM.core.PermissionsMgr.canDo(a.name,a.action)}if(b){this.show()}else{this.hide()",686363,32,"s\",{extend:RM.component.SecurePanel,xtype:\"invoices\",config:{permissionFor:\"Invoices\",",737232,58,567901,99,"xtype:\"securebutton\",permissionFor:\"Invoices",733248,39,698668,47,"Due date\",value:\"duedate",568846,41,"Customer\",value:\"customer",617200,34,564300,233,",lastUpdatedDateFormat:\"d/m/Y h:iA\",",568575,6645,"RM.component.SecurePanel,xtype:\"contacts\",config:{permissionFor:\"Contacts\",",737232,58,575313,74,"xtype:\"securebutton\",permissionFor:{name:\"Contacts\",action:\"AddEdit\"},",686703,61,698668,47,575495,708,"0.1",576206,309,"RM.HomeSettingsMgr.getSetting(\"PrivacyPolicyUrl\")",576541,172,"RM.HomeSettingsMgr.getSetting(\"TermsUrl\")",576541,54,576793,124,"RM.HomeSettingsMgr.getSetting(\"AppInfoUrl\")",576943,1017,"index:\"Cashbooks\",",577960,76,"CashbookMgr.selectCashBook()}},{index:\"Dashboard\",",578063,112,"invoices\",index:\"I",578184,92,",data:{permsRequired:true}},{xtype:\"timesheets\",index:\"T",578287,96,",data:{permsRequired:true}},{xtype:\"expenses\",index:\"ExpenseClaim",578400,95,",data:{permsRequired:true}},{xtype:\"contacts\",index:\"C",578506,92,",data:{permsRequired:true",578597,99,",setSelectedItem:function(b){var a=this.store.getData().indexOfKey(b);if(a>0){this.list.select(a)}},isItemSelected:function(b){var a=this.store.getData().indexOfKey(b);if(a>0){return this.list.isSelected(a)}return false",557792,40,");RM.AppMgr.application.on({\"rm-permissionsupdated\":this.applyPermissions,scope:this})},applyPermissions:function(){this.store.clearFilter();this.store.filterBy(function(b){var c=b.get(\"data\");if(c&&c.permsRequired){var a=b.get(\"index\");return RM.PermissionsMgr.canView(a)}else{return true}})",578695,1207,"alternateClassName:\"RM.ViewMgr\",singleton:true,defaultBackAnimation:",648592,32,579916,179,"this.hideKeyPad();",580095,60,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",580762,35,"appBackStack.pop();this.showDashboard(b);",580157,37,"b=b||this.defaultBackAnimation;a.onAfter(\"erased\",function(){this.destroy()});",580236,87,"this.hideKeyPad();c=c||this.defaultBackAnimation;var d=this.appBackStack.pop();var e=[d];d.onAfter(\"erased\",function(){e.forEach(function(f){f.destroy()})});while(this.appBackStack.length>0",580333,67,"=b){this.showPanel(a,c);break}e.push(a)}},appPause:function(){document.activeElement.blur();",580487,92,"this.showBackStack(\"onDeviceBack\");",580487,66,"else{if(this.formBackHandler){this.formBackHandler.call(this.formB",580628,112,"mainNavContainer.isItemSelected(\"Cashbooks\")){this.confirmExitApp(",580905,37,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",580762,35,582057,33,648592,33,";this.mainNavContainer.setSelectedItem(\"Dashboard\"",580905,39,"this.confirmExitApp()}else{this.back()}}}}}}},confirmExitApp",737020,64,580996,64,581081,152,"regFormBackHandler:function(b,a){this.formBackHandler=b;this.formBackHandlerScope=a},deRegFormBackHandler:function(){this.formBackHandler=null;this.formB",581211,509,"dashboardShown=true;this.mainNavContainer.setSelectedItem(\"Dashboard\"",582271,43,581799,59,"isItemSelected(\"Dashboard\"",581875,47,"setSelectedItem(\"Bills\"",582271,43,581984,47,"setSelectedItem(\"Invoices\"",582050,93,"setSelectedItem(\"Timesheets\"",582271,43,582205,47,"setSelectedItem(\"Expenses\"",582271,131,"this.hideKeyPad();",582402,193,"this.hideKeyPad();",582595,240,"console.log(\"stack length = \"+this.appBackStack.length",582833,149,"hideKeyPad();this.mainView",692175,37,583027,984,",hideKeyPad:function(){",623974,35,"ctiveElement.blur()}},setPostAnimationCallback:function(a,b){if(!a.listeners){a.listeners={}}a.listeners.animationend=b",584010,2426,"]",557792,50,";if(RM.PermissionsMgr.canAddEdit(\"Items\")){this.add(",660366,32,586469,49,")}",586570,920,"a){if(!Ext.fly(a.target).hasCls(\"x-clear-icon\")){this.fireEvent(\"tap\",this,a)}",587518,461,591101,73,"getValue:function(){this.showValidation(true);",477264,49,588206,1134,"alternateClassName:\"RM.Selectors\",",619023,32,589372,1418,"re.HomeSettingsMgr\",{alternateClassName:\"RM.HomeSettingsMgr\",singleton:true,load",644010,34,"s(\"HomeSettings\",null,function(a){this.homeSettings=a},this,function(a){})},getSetting:function(b){for(var a=0;a<this.homeSettings.length;a++){if(this.homeSettings[a].Key.toLowerCase()==b.toLowerCase()){return this.homeSettings[a].Value}}return null}});Ext.define(\"RM.core.CashbookMgr\",{alternateClassName:\"RM.CashbookMgr\",singleton:true,config:{cashbookId:null,currentCashbook:null},getTaxPreferences:function(){return this.getCurrentCashbook().TaxPreference},getSalesPreferences:function(){return this.getCurrentCashbook().SalesPreferences},loadLastCashbook:function(a){if(this.getCashbookId()){this.setCashbook(this.getCashbookId());if(a){a()}}",624807,72,"setCashbookId(a.CashBookId)",624902,45,"c",624948,64,625023,178,"_currentCashbook.Dashboard",625214,65,"c,a,b){RM.AppMgr",625292,50,"c},function(d){this.setCashbookId(c);this.setCurrentCashbook(d[0",623051,33,"GSTCodes\").setData(d",625407,75,"d[0].AccountingCategories);if(d[0].AmountTaxStatuses){",623054,52,"d[0].AmountTaxStatuses)}else{",623054,109,"able",623165,57,"de tax",623165,36,"EXCLUSIVE,Name:\"Exclude tax\"}])}",622937,50,"d",625560,48,"this.getCurrentCashbook().Permissions)",625697,48,"});Ext.define(\"RM.component.SecureFormPanel",617260,32,"secureformpanel\",config:{permissionFor:\"\"",611343,37,"heckPermissions()}}},checkPermissions:function(){var a=this.getPermissionFor();if(a&&!RM.core.PermissionsMgr.canAddEdit(a)){this.getFieldsArray().forEach(function(b){if(b.setReadOnly){b.setReadOnly(true)}if(b.setPlaceHolder){b.setPlaceHolder(\"\")}})}this.getFieldsArray().forEach(function(d){var c=d.config.permissionFor;if(c){var b=RM.PermissionsMgr.canDo(c.name,c.action);if(c.invoke){d[c.invoke].apply(d,[b])}else{if(c.invokeWithInverse){d[c.invoke].apply(d,[!b])}else{d.setHidden(!b)}}}})},scrollShowField:function(e,b,c,a){if(this.keyCb&&this.keyFldEleId!==b){this.keyCb.onFieldLostFocus.call(this.keyCb)}this.keyFldEleId=b;this.keyCb=a;var d=this;d.clearScrollTimer();d.scrollTimer=window.setTimeout(function(){d.scrollTimer=null;d.getScrollable().getScroller().scrollTo(0,e.element.dom.offsetTop,true)},300);this.showKeyPad(c)},showKeyPad:function(b){if(!this.keypad){this.rootContainer=this.getRootContainer(this);this.rootContainer.element.on({tap:this.handleTapInEntireScreen,scope:this})}if(!this.keypad||b!==this.keypadType){var a=",743556,41,"keypadType:b,listeners:{keytap:this.onKeyTap,scope:this}};this.keypad=this.add(a)}else{this.keypad.show()}this.keypadType=b;",565200,35,"Keypad,this)},hideKeypad:function(){this.keypad.hide();this.scrollTop();this.keyCb.onFieldLostFocus.call(this.keyCb",651231,33,"onKeyTap:function(a){this.keyCb.onKeyTap.call(this.keyCb,a);if(a===\"done\"){this.hideKeypad()}if(a===\"cancel\"){this.hideKeypad()}},handleTapInEntireScreen:function(a){if(this.keyCb&&this.keyFldEleId!==a.target.id){this.keyCb.onFieldLostFocus.call(this.keyCb);this.hideKeypad();this.keyCb=null}},getRootContainer:function(a){while(a.getParent()){a=a.getParent()}return a},scrollTop:function(){var a=this;a.clearScrollTopTimer();if(!a.scrollTimer){this.scrollTopTimer=window.setTimeout(function(){a.getScrollable().getScroller().scrollTo(0,0,false)},300)}},clearScrollTimer:function(){if(this.scrollTimer){window.clearTimeout(this.scrollTimer)}},clearScrollTopTimer:function(){if(this.scrollTopTimer){window.clearTimeout(this.scrollTopTimer",596888,32,710340,140,"itemId:\"doneContainer",649615,41,"40,cls:\"rm-keypad-topbar\"},items:[{text:\"CANCEL\",itemId:\"cancel\",},{itemId:\"bar\",},{text:\"DONE\",itemId:\"done\",}]",638767,36,649618,82,649267,290,649558,59,"itemId:\"dotContainer",710911,87,",itemId:\"dotBtn\"},{text:\"\",itemId:\"blankBtn\",hidden:true},{text:\"0\",itemId",649708,55,",itemId:\"backspace\"}]}]},initialize:function(){if(!this.config.keypadType){var b=this.getComponent(\"doneContainer\");b.setHidden(true)}if(this.config.keypadType===\"phone\"){var c=this.getComponent(\"dotContainer\");var a=c.getComponent(\"dotBtn\");var d=c.getComponent(\"blankBtn\");d.setHidden(false);a.setHidden(true",554759,32,"KeyTap:function(a,b){this.fireEvent(\"keytap\",(a.getText()?a.getText().toLowerCase():a.getItemId().toLowerCase()));b.stopPropagation(",591311,32,"PhoneField\",{extend:RM.component.ExtTextField,xtype:\"rmphone",597896,33,"is.isInitializing=true;this.readOnlyField=a.readOnly||",591437,72,695216,41,"this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(b,a){console.log(this.getId()+\" onFieldFocus\");if(this.fieldMaskEl){this.clearCursorBlinkTimer()}if(this.readOnlyField){return}this.fieldMaskEl=a.target.nextElementSibling;this.showCursor();this.owningPanel=b.up(\"panel\");this.revertBackVal=this.getValue();this.owningPanel.scrollShowField(b,a.target.id,\"phone\",this)},onFieldLostFocus:function(){console.log(this.getId()+\" onFieldLostFocus\");this.clearCursorBlinkTimer();this.fireValueChangeEvent(this.getValue())},onKeyTap:function(b){if(b===\"bar\"||b===\"blankbtn\"){return}if(b===\"done\"){return}if(b===\"cancel\"){this.setValue(this.revertBackVal);return}var d=this.getValue();var a=d.toString();var c=a.length;if(b===\"backspace\"){if(c>0){a=a.slice(0,-1);this.setValue(a)}}else{this.setValue(a+b)}},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c}return c},showCursor:function(b){var a=this;a.cursorBlink",587695,39,"a.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"}a.myCursorOff=!a.myCursorOff},500)},clearCursorBlinkTimer:function(){console.log(this.getId()+\" clearCursorBlinkTimer\");if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(c){var b=parseFloat(c)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){this.fireEvent(\"valueChange\",b,a)}",598830,32,590801,207,"this.element.on(\"tap\",function(b){if(Ext.fly(b.target).hasCls(\"x-clear-icon\")){this.setValue(null)}},this);var a=this.getPhonePicker();if(a){a.setListeners({",598284,100,",scope:this}",591006,307,",getValue:function(){this.showValidation(true);",477264,49,668008,361,",getValue:function(){this.showValidation(true);",477264,49,"RM.view.ContactDetail\",{extend:RM.component.Secure",592135,36,"permissionFor:\"Contacts\",",737232,62,592233,176,"xtype:\"securebutton\",",615791,51,",permissionFor:{name:\"Contacts\",action:\"AddEdit\"}}]},{xtype:\"secureformpanel\",permissionFor:\"Contacts",592481,207,"\"Display ",593783,32,592747,99,"labelWidth:\"10em",592844,231,593204,814,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",594048,151,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",594229,288,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",594547,149,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",594726,88,"xt",594813,50,",labelWidth:\"4em",594862,505,"alternateClassName:\"RM.ContactsMgr\",",619023,34,620496,130,595531,1571,"if(!c){return}",597102,998,"1",598101,360,"how();",598448,38,598505,60,"a?this.showValidation(true):this.showValidation(false);",598565,58,"callParent([valueInField]",591695,35,"duration",591098,75,598831,396,"this",296062,37,";return b},showClearIcon:function(){var a=this;if(a.getClearIcon()&&!a.getDisabled()&&!a.getReadOnly()){a",293817,60,"a},resetPicker:function(){var a=this;",599260,240,"b){if(!this.config.rmmandatory){this.addClearButton(b);this.clearButton.setHidden(!a.getValue())}",598301,83,",scope:this}})},updateValue",279215,39,591098,76,"getValue:function(){this.showValidation(true);",477264,34,",addClearButton:function(a){if(this.clearButtonAdded){return}var b=a.getToolbar();var c=",652384,33,"e,f){var d=e.up(\"datepicker\");d.fireEvent(\"change\",d,null);d.hide()},text:\"Clear\"};this.clearButton=b.add(c);this.clearButtonAdded=true",591312,173,";this.privateReadOnly=false",292015,35,591520,137,"if(this.privateReadOnly){return}",591657,428,",setReadOnly:function(a){this.privateReadOnly=a",245152,43,599616,33,"RM.component.Secure",599653,379,"secure",600032,2026,"alternateClassName:\"RM.TimeSheetsMgr\",",619023,34,602092,504,"RMAmountField\",{extend:RM.component.ExtTextField,xtype:\"rmamount",597896,33,"is.isInitializing=true;this.readOnlyField=a.readOnly||false;a.trailingZerosUpTo=a.trailingZerosUpTo==0||a.trailingZerosUpTo?a.trailingZerosUpTo:2;a.prefix=a.prefix||\"\"",591442,67,695216,41,"this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(b,a){if(this.fieldMaskEl){this.clearCursorBlinkTimer()}if(this.readOnlyField){return}this.fieldMaskEl=a.target.nextElementSibling;this.showCursor();this.inEditMode=true;this.owningPanel=b.up(\"panel\");this.revertBackVal=this.getValue();this.owningPanel.scrollShowField(b,a.target.id,\"amount\",this)},onFieldLostFocus:function(){this.inEditMode=false;this.clearCursorBlinkTimer();var a=this.getValue();if(a==\".\"){a=\"0.0\"}if(this.config.decimalPlaces&&a!=\"\"){this.setValue(this.config.prefix+this.formatVal(a))}this.fireValueChangeEvent(a)},onKeyTap:function(b){if(b===\"bar\"){return}if(b===\"done\"){return}if(b===\"cancel\"){this.setValue(this.revertBackVal);return}var e=this.getValue();var a=this.config.prefix+e.toString();var d=a.length;var c=a.indexOf(\".\");if(b===\"backspace\"){if(d>0){a=a.slice(0,-1);this.setValue(a)}}else{if(this.config.decimalPlaces){if((b!=\".\"&&d-1<c+this.config.decimalPlaces)||c<0){if(a==this.config.prefix+\"0\"&&b!=\".\"){a=this.config.prefix}this.setValue(a+b)}}else{if(c!=-1&&b==\".\"){return}if(a==this.config.prefix+\"0\"){a=this.config.prefix}this.setValue(a+b)}}},get",599088,39,");var a=b.toString();if(this.config.prefix){a=a.replace(/,/g,\"\")}if(this.config.prefix&&a.indexOf(this.config.prefix)!=-1){a=a.slice(this.config.prefix.length)}return a},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c;if(this.config.decimalPlaces&&c!==\"\"){c=this.formatVal(c)}}if(c.indexOf(this.config.prefix)==-1&&c!==\"\"){c=this.config.prefix+this.formatVal(c)}if(!this.inEditMode){this.fireValueChangeEvent(b)}return c},showCursor:function(){var a=this;a.cursorBlink",587695,39,"a.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"}a.myCursorOff=!a.myCursorOff},500)},clearCursorBlinkTimer:function(){if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(d){var c=d?d.toString():\"\";c=c.replace(/,/g,\"\");if(c.indexOf(this.config.prefix)!=-1){d=c.slice(this.config.prefix.length)}var b=parseFloat(d)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){if(this.valBeforeChange!==undefined){this.fireEvent(\"valueChange\",b,a)}this.valBeforeChange=b}},formatVal:function(e){var c=parseFloat(e).toString();var f=c.indexOf(\".\");if(f!==-1){var b=c.length-f-1;var d=this.config.trailingZerosUpTo-b;if(d>0){for(i=0;i<d;i++){c=c+\"0\"}}}else{if(this.config.trailingZerosUpTo>0){c=c+\".\";for(i=0;i<this.config.trailingZerosUpTo;i++){c=c+\"0\"}}}if(this.config.prefix){if(c.indexOf(\".\")!=-1){var a=c.split(\".\");a[0]=a[0]",633739,37,";c=a[0]+\".\"+a[1];return c}else{return c",633739,38,"}else{return c}",603020,47,"RM.component.Secure",603071,546,"secure",603617,598,"rmamount",604224,70," rm-cursor-blinkbg",654935,37,",decimalPlaces:2,prefix:\"$",687053,34,600364,33,604484,789,"alternateClassName:\"RM.ExpensesMgr\",",619023,32,605305,752,"TaxStatus:function(a){this.taxStatus",606097,53,"nvoiceDate:function(a){this.invoiceDate",606142,175,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",606333,520,"(b.LineText||b.Description||b.ItemName)",596208,51,606917,566,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",607499,536,"(c.LineText||c.Description||c.ItemName)",608048,262,"RM.component.Secure",608314,36,"permissionFor:\"Invoices\",",737232,125,585776,40,608515,239,"secureformpanel\",permissionFor:\"Invoices",608763,280,610042,32,",rmmandator",604047,43,"ue",609292,55,609200,46,"clearIcon:true",609245,1751,",listeners:[{element:\"element\",event:\"tap\",fn:function(){this.toggleOptions()},scope:this}]",610996,1291,"secure",612287,138,",permissionFor:\"Invoices",612424,1398,584140,38,614143,55,"},{text:\"Time\",itemId:\"time\",permissionFor:\"Timesheets_BillEntry\"",614228,37,"permissionFor:\"ExpenseClaims_BillEntry\"}],",613821,55,"d",620046,33,613957,95,"e){this.hide();a.call(d,e.getItemId())},scope:this}});var c=0;this.items.forEach(function(e){if(!e.permissionFor||RM.PermissionsMgr.getPermission(e.permissionFor)){b.add(e);if(e.itemId){c+=1}}});if(c>1){this.popup=b;b.show();",565200,41,"}else{a.call(d,this.items[1].itemId)}",614288,481,"},",562960,35,"){var e=this.getItemId();if(e==5||e==10||e==20){e=e+\"%\"}a.call(b,e",614830,45,614992,862,"secure",615854,45,"ext",615899,62,"extselectfield\",label:\"Item type\",itemId:\"itemT",615987,165,"itemId:\"itemName\",labelWidth:\"7em",616150,92,616357,206,"rmamount",616569,38,"cls:\"rm-flatfield rm-cursor-blinkbg",654935,37,",decimalPlaces:2,prefix:\"$\",border:\"0",609711,35,"ccount\",itemId:\"account",616701,226,687549,33,588990,99,"autoSelect:false,clearIcon",617084,1939,"alternateClassName:\"RM.InvoicesMgr\",",619023,170," RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled?\"APPROVED\":\"UNPAID\";case ",619680,38,619247,88,"getInitialInvoiceStatus:function(){if(RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled){return RM.Consts.InvoiceStatus.DRAFT}else{return ",619641,32,"}",619333,235,"this.getInitialInvoiceStatus()",619597,189,"b,e",581600,58,"CustomerInvoicesC\");a.showView(c,d,b",619875,2036,622560,85,"isUserLoggedIn=false;Ext.Ajax.setDefaultHeaders({\"X-APIV\":RM.Consts.Api.VERSION})",622686,251,623333,36,".init(a)",623435,36,".init(a)",623553,40,".init(a)",623671,50,"RM.HomeSettingsMgr.load",623731,765,"RM.CashbookMgr.getCashbookId()){RM.CashbookMgr.loadLastCashbook(function(){RM.ViewMgr.back()})}else{RM.CashbookMgr",624609,169,"RM.CashbookMgr.selectCashBook()}},this",625743,177,"RM.CashbookMgr",625924,49,"RM.ViewMgr.clearBackStack();this.logoutFromServer();this.login",625994,166,";this.login",626158,32,"if(this.isUserLoggedIn){",626576,37,626227,84,"isUserLoggedIn=false}",626318,231,"){apiUrl=this.getApiUrl(c)+\"/\"+e;this.getServerRec(apiUrl,{},a,b,d)},getServerRecs:function(b,f,a,c,d){var e=this;if(b.substr(0,4)!==\"http\"){b=e.getApiUrl(b)}Ext.Ajax.request({url:b",627095,74,"e",628512,50,627223,57,"c,h.recs",627291,32,"c",627324,155,";e.setLoadingTimer()},getServerRec:function(b,e,a,c,d){return this.getServerRecs(b,e,function(f){if(a){a.call(c,f[0])}},c,d",627478,477,"&&j.status!=401",627955,344,"d,e,h,g){var f=this;f.setLoadingTimer();var c=function(k,j,l){f",628512,63,"d,k,j,l)}}",628324,33,"k,j,l){if(l){c(k,j,l)}},scope:f",628596,200,"c){if(navigator.connection&&navigator.connection.type===\"none\"){this.showOkMsgBox(\"It looks like your device has no internet connection, please connect and try again.\");return}if(c",628803,35,"c.statusText===\"communication failure\"){this.showOkMsgBox(\"The connection failed, please try again or contact support.\")}else{if(c.status==412){var a=Ext.decode(c.statusText);this.showAppStop(a)}else{var b=c.statusText?\" \"+c.statusText:\"\";this.showErrorMsgBox(\"There was an error, please try again or contact support: <br/><br/> (\"+c.status+b+\")\")}",628903,113,"&&this.appTypeId!==RM.Consts.App.WEB_CONTAINER){b=\"production\"}this.apiLocation=b;if(b==\"staging",629073,33,".reckoncloud.com.au/api\"}else{if(b==\"production",629073,33,629591,32,"preproduction\"){this.baseApiUrl=\"http://preprodmobile",629591,34,"v",629067,33,629257,43,"qa",629067,33,"r1mobileqa",629189,35,629371,84,"this.baseApiUrl=\"/api\"",629759,1522,"showInvalidEmail",631130,36,"\"Please enter a valid email address.\"",631278,74,"AppStop",620640,71,"AppStopC\");c.showView(a,b",631345,2563,"validateEmail:function(a){var b=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\\.([a-zA-Z])+([a-zA-Z])+/;if(b.test(a)){return true}else{return false}",633906,1375,"Production\",value:\"production\"},{text:\"Pre Production\",value:\"preproduction\"},{text:\"Staging\",value:\"staging\"},{text:\"QA Server\",value:\"qa",635305,63," IIS\",value:\"devlocaliis",635485,1045,"});Ext.define(\"RM.view.AppStop\",{extend:Ext.Panel,xtype:\"appstop\",config:{",576059,32,651680,96,"]},",606572,43,"\"vbox\",align:\"center\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-update-icon.png\",height:40,width:40,margin:\"25px auto\"},{xtype:\"component\",html:\"A new update has been released!\",cls:\"rm-update-title\",margin:\"-14 0 5 0\"},{xtype:\"component\",html:\"Click below to update for security & stability.\",cls:\"rm-update-msg\",margin:\"0 0 25 0\"},{xtype:\"button\",itemId:\"update\",text:\"Update app >\",cls:\"rm-photopreviewbtn",687823,104,"AppStop",716032,44,"appStop:\"appstop\"},control:{\"appstop #update\":{tap:\"onUpdate\"}}},showView:function(a){this.stopErr=a;RM.ViewMgr.showPanel2({xtype:\"appstop\"})},onUpdate",437371,34,"window.open(this.stopErr.AndroidUpgradeUrl,\"_system\")}if(Ext.os.is.iOS){window.open(this.stopErr.IosUpgradeUrl",658912,32,"Module",738479,45,636647,6254,",hide:\"onHide",642900,573,"RM.ViewMgr.regFormBackHandler(this.back,this);",643473,178,643661,337,658028,34,"FormBackHandler()",680920,58,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getContactForm())",643995,206,";if(Ext.isDefined(b.SaveSupport)&&!b.SaveSupport){this.setEditable(false)}if(b.ViewNotice){RM.AppMgr.showOkMsgBox(b.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack()})",723968,41,644271,283,"!a.Description",644571,138,"a.Email!==\"\"&&!RM.AppMgr.validateEmail(a.Email)",670282,40,"b=false;RM.AppMgr.showInvalidEmailMsg();return b",724205,49,"save",641388,33,644791,138,"a.IsActive=true",644928,217,"RM.AppMgr.showOkMsgBox",645150,1025,"ranchName().showValidation(true",646544,35,646199,347,"console.log(this.getBranchName().getValue());",644500,36,"this.getBranchName().getValue()",646544,6386,"console.log(\"EnterPin onShow\");",652930,349,";RM.AppMgr.logoutFromServer",653277,477,"RM.AppMgr.showOkMsgBox",653759,2019,";RM.AppMgr.logoutFromServer",637184,106,655882,425,"window.open(RM.HomeSettingsMgr.getSetting(\"SignupUrl\"),\"_blank\",\"location=no\"",656336,600,"RM.AppMgr.showOkMsgBox",656941,2531,659500,391,",function(a){if(a.length==0){RM.AppMgr.showOkMsgBox(\"You do not have any books to select.\",RM.AppMgr.lock,RM.AppMgr)}},this,null,null,function(){RM.AppMgr.login()}",698128,168,660059,4032,",zeroLineItemsCheckBox:\"budgetlineitems rmcheckbox\"},control:{budgetlineitems:{show:\"onShow\"},",664102,113,"c,b){this.budgetId=c;this.budgetName=b;",664220,90,"},onShow:function(){this.hideZeroLineItems=this.hideZeroLineItems||false;this.getBudgetTitle().setHtml(this.budgetName);this.getZeroLineItemsCheckBox().setValue(this.hideZeroLineItems);var a",664349,42,714768,41,"BudgetLineItems\"));a.filter(\"BudgetId\",this.budgetI",664471,54,"hideZeroLineItems=a",664590,38,"var a",664349,42,"a.removeAll();a.filter(\"IncludeZeroItems\",!this.hideZeroLineItems);RM.AppMgr.loadStore",728720,68,"Bill",738479,45,664803,2800,",noaccessCont:\"dashboard #noaccess",667598,44,"init:function(){this.callParent();RM.AppMgr.application.on({\"rm-permissionsupdated\":this.showDashboardData,scope:this})",667640,100,")},showDashboardData:function(){var a=RM.PermissionsMgr.canView(\"PAndLReport\");var e=RM.PermissionsMgr.canView(\"Invoices\");var c=RM.PermissionsMgr.canView(\"Bills\");var d=RM.PermissionsMgr.canView(\"AccountEnquiryReport\");var b=RM.PermissionsMgr.canView(\"Budgets\");if(this.getNoaccessCont()){this.getNoaccessCont().setHidden(a||e||c||d||b)}if(this.getDashboardCont()){if(a",667817,36,"this.dashboardData)}if(e||c){this.getAlerts().setViewData(this.dashboardData)}if(d){",667888,34,"this.dashboardData.TopExpenses)}if(b){",667937,37,"this.dashboardData.BudgetOverview)}this.getNetPosition().setHidden(!a);this.getAlerts().setHidden(!(e||c));this.getTopExpenses().setHidden(!d);this.getBudgetOverview().setHidden(!b)}",668368,518,"username and",668885,91,"textfield\",itemId:\"username\",label:\"Usernam",687579,37,592560,56,668965,52,"rmmandatory:true,labelWidth:\"4",588783,39,669080,761,"userName:\"forgotpassword #username",669839,421,"){var c=true;var b=this.getEmail().getValue();var a=this.getUserName().getValue();this.getEmail().showValidation(true);this.getUserName().showValidation(true);if(b==\"\"&&a",670278,44,"this.getUserName().showValidation(false);c=false;RM.AppMgr.showInvalidFormMsg();return c}",670274,48,"c=false}if(a==\"\"){this.getUserName().showValidation(false);c=false;RM.AppMgr.showInvalidFormMsg();return c}if(!RM.AppMgr.validateEmail(b)",670282,40,"c=false;RM.AppMgr.showInvalidEmailMsg();return c}if(!c",690848,40,"c},onSend",713780,36,670454,87,"UserName().getValue(),Email",670532,38,"a",670571,36,"b,a){this.showFail(a",670627,101,"your password reset details",670765,268,"view.CustomerInvoices\",{extend:RM.component.Secure",567804,39,"permissionFor:\"Invoices\",layout:\"fit\",items:[{xtype:\"titlebar\",docked:\"top\",title:\"A Title\",itemId:\"title",588319,104,",align:\"left\"},{text:\"ADD\",itemId:\"add\",align:\"right\",xtype:\"securebutton\",permissionFor:\"Invoices",733248,39,698668,47,"Due date\",value:\"duedate",568846,33,601440,32,"InvoicesList",618608,34,"slist\",config:{layout:\"fit\",control:{list:{itemtap:\"onItemTap",605712,33,"ustomerId=this.config.customerId;",673159,74,"var b=(this.config.sortVal==\"duedate\");",714718,36,"Invoices\");if(b",665419,34,"}else{a.setGroupField(null)}this.loadList(",673231,89,"b",673324,137,677115,210,"reload:function(){this.loadList()},setS",675814,53,"clearSearch",675878,47,",loadList",729374,48,"Invoices",728126,44,"Invoices\")",676817,124,715822,166,677324,192,"RM.AppMgr.showOkMsgBox(b)})",673512,2024,"Customer",675536,52,"C",671105,43,"Title:\"customer",675652,32,671192,42,"\"customerinvoices #back\":{tap:\"back\"},",671234,88,"\"onSearch\",searchclear:\"onSearchClear",671566,146,"c,d,b,e){this.invoicesTitle=c;this.customerId=d;this.customerName=b;",671714,92,676448,35,"e",679791,36,"sTitle().setTitle('<span style=\"text-shadow:none; font-weight:normal;\">'+this.invoicesTitle+\"</span>\"",739247,37,671970,42,"activeList.reload()}",702053,35,"CustomerInvoices();a.removeAt(2);this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false,customerId:this.customerId})},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",677525,179,"b",639968,33,"});Ext.define(\"RM.component.CustInvSummaryLis",711209,32,"invsummarylist\",config:{layout:\"fit\",control:{list:{select:\"onItemSelect",605712,59,"add(",568179,395,");",714718,36,"CustomerInvoices",728126,44,"CustomerInvoices\"));RM.AppMgr.loadStore(a)",641099,74,672238,99,"reload:function(){this.loadList()},setS",675814,53,"clearSearch",675878,47,",loadList",729374,48,"Invoices\"",715677,32,676908,33,"RM.AppMgr.loadStore(a",677740,200,691439,36,738479,45,"Invoices:\"invoices",675667,51,675748,72,"\"onSearch\",searchclear:\"onSearchClear\"},\"",671530,40,675966,134,"){",676168,51,705561,45,"if(!this.dataLoaded){this.onSort(\"duedate\");this.dataLoaded=true}else{this.activeList.reload()}",739248,36,"nvoice\"){this.activeList.reload()}",702053,35,"Invoices();a.removeAt(2);if(b==\"customer\"){this.activeList=a.add({xtype:\"custinvsummarylist\"})}else{this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false})}},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",672334,94,"});Ext.define(\"RM.util.FormUtils\",{singleton:true,makeAllFieldsReadOnly:function(a){a.getFieldsArray().forEach(function(b){if(b.setReadOnly){b.setReadOnly(true)}if(b.setPlaceHolder){b.setPlaceHolder(\"\")",675503,40,641805,50,678061,676,",hide:\"onHide",678736,228,"change",678976,309,",dateFld:{change:\"onInvoiceDateChange",714607,93,679375,32,"lineItemsDirty=false;",679402,92,"this.dataLoaded=false",679493,64,"InvoicesMgr.getInitialInvoiceStatus(),AmountTaxStatus:RM.CashbookMgr.getTaxPreferences().SalesFigures,",680336,32,"Amount:0,DiscountTotal:0,Tax:0,Subtotal:0,Paid:0,BalanceDue:0",679629,76,"&&RM.PermissionsMgr.canAddEdit(\"Invoices\"",679704,108,"RM.ViewMgr.regFormBackHandler(this.back,this);",679812,134,680062,273,"this.detailsData;if(b.CustomerId){",680588,78,"applyTaxRules",682876,32,680690,127,";this.getLineItems().setInvoiceDate(this.getDateFld().getValue());this.getLineItems().setTaxStatus(b.AmountTaxStatus",679939,66,"b.Status));this.dataLoaded=true}}",658026,36,"FormBackHandler",739246,38,680875,103,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getInvoiceForm())}",681121,38,"applyTaxRules:function(){var b=this.getAmountsFld();var a=RM.CashbookMgr.getTaxPreferences();b.setReadOnly(!this.isEditable||!a.AllowTaxEdit);if(this.isCreate){if(a.IsTaxTracking){b.setHidden(false);b.setValue(a.SalesFigures)}else{b.setHidden(true);b.setValue(RM.Consts.TaxStatus.NON_TAXED)}}else{var c=a.IsTaxTracking||b.getValue()!==RM.Consts.TaxStatus.NON_TAXED;b.setHidden(!c)",643995,55,681211,49,679941,64,"c.Status));",681260,358,"c.Notes=c.Notes?c",717659,51,"c);this.applyTaxRules(",681631,49,"if((Ext.isDefined(c.SaveSupport)&&!c.SaveSupport)||this.detailsData.Paid>0){this.isEditable=false;this.setEditable(false)}",681680,59,"CustomerId(c.CustomerId);b.setTaxStatus(c.AmountTaxStatus);b.setInvoiceDate(c.Date",681883,63,680090,42,"false);this.dataLoaded=true;if(c.ViewNotice){RM.AppMgr.showOkMsgBox(c.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack(",681972,157,"this.goBack();RM.AppMgr.showOkMsgBox",682134,716,"c,b,a){if(!this.dataLoaded){return}this.detailsData.AmountTaxStatus=b;this.previousAmountTaxStatus=a;this.calculateBreakdown();this.getLineItems().setTaxStatus(b)},onInvoiceDateChanged:function(b,c,a){if(!this.dataLoaded){return}this.calculateBreakdown();this.getLineItems().setInvoiceDate(c",682919,476,"d",685655,35,"var c",683432,39,"b={CustomerId:d.CustomerId,InvoiceDate:d.Date,AmountTaxStatus:d",683510,87,"d",691180,41,"entage=d",683647,34,"d",691270,44,"d.Discount.replace(\"$\",\"\")}}if(b.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED){c=c.map(function(e){e.TaxGroupId=null;e.Tax=null;return e})}b.LineItems=c.map(function(e){return{InvoiceLineItemId:e.InvoiceLineItemId,ItemType:e.ItemType,ItemID:e.ItemId,Proje",741490,37,"UnitPriceExTax:e.UnitPriceExTax,DiscountAmount:e.DiscountAmount,DiscountAmountExTax:e.DiscountAmountExTax,DiscountPercentage:e.DiscountPercentage,TaxGroupID:e.TaxGroupId,Tax:e.Tax,TaxIsModified:e.TaxIsModified}}",686108,34,"Calc\",true,b,function a(e){var l=e[0];var h=this.detailsData;h.Amount=l.TotalIncludingTax;h.AmountExTax=l.TotalExcludingTax;h.Tax=l.Tax;h.Subtotal=l.Subtotal;h.DiscountTotal=l.Discount||0;h.Paid=l.AmountPaid;h.BalanceDue=l.BalanceDue;var g=this.getLineItems();g.removeAllItems();for(var f=0;f<c.length;f++){var k=c[f];var j=null;Ext.Array.some(l.Items,function(m){if(m.InvoiceLineItemId===k.InvoiceLineItemId){j=m;return true}});if(!j){c[f]=null}else{Ext.apply(k,j)}}c=Ext.Array.clean(c);g.setTaxStatus(b.AmountTaxStatus);g.addLineItems(c",684636,42,"e){RM.AppMgr.showOkMsgBox(e);this.goBack(",684688,966,"c",685655,35,"c",685691,51,"1;c.LineItems.forEach(function(d){d.lineNo=a;if(d.IsNew){delete d.InvoiceLineItemId}a+=1}",724825,40,"delete b.DiscountPerc;delete b.DiscountAmount;if(b",691180,42,"b",683647,34,"b",691270,44,"b",685947,34,"b.Discount;b",685993,42,"b)){if(c",686043,64,"b",686108,51,"b",686160,111,"d,e){RM.AppMgr.showOkMsgBox(e)}",656879,33,686318,65,602586,220,"this.on(\"keyup\",this.valChange);this.on(\"blur\",this.numberPrecision",591097,216,",valChange:function(a,f,c){var g=this.getValue();console.log(f.browserEvent.keyCode);if(!(47<f.browserEvent.keyCode<58||f.browserEvent.keyCode==190)){f.stopEvent()}if(g===null||g===undefined){console.log(g);return}var b=g.toString();var d=b.length;if(this.config.decimalPlaces&&b.indexOf(\".\")!=-1){if(d-1>(b.indexOf(\".\")+this.config.decimalPlaces)){this.setValue(b.substring(0,d-1))}}console.log(this.getValue()",633476,49,"&&Ext.isNumber(this.config.decimalPlaces)){this.setValue(a.toFixed(this.config.decimalPlaces))}},getValue:function(){this.showValidation(true);",477264,49,686380,384,"secureformpanel\",permissionFor:\"Invoices",686773,40,686827,71,604428,36,687064,58,600397,48,"clearIcon",600453,37,",permissionFor:{action:\"Select\",name:\"Projects\"},",600651,53,604507,56,687201,43,"itemId:\"descriptionField",687242,41,"[\"rm-flatfield\",\"rm-flatfield-last\"],placeHolder:\"enter\"},{xtype:\"container\",itemId:\"detailsFields\",defaults:{clearIcon:false},hidden:true,items:[{xtype:\"rmamountfield\",name:\"UnitPrice",687363,70," rm-cursor-blinkbg\",placeHolder:\"enter\",decimalPlaces:2,prefix:\"$\"},{xtype:\"rmamount",588851,65," rm-cursor-blinkbg\",decimalPlaces:4,trailingZerosUpTo:0,prefix:\"",687200,32,"iscount\",label:\"Discount\",placeHolder:\"none\",value:0,cls:[\"rm-flatfield\"]},{xtype:\"rmamountfield\",name:\"Amount\",itemId:\"Amount\",label:\"Amount\",value:0",711848,34,"decimalPlaces:2,prefix:\"$",609711,34,"Tax code\"",687598,51,"itemId:\"TaxGroupId",589024,65,"autoSelect:false",589088,40,"rmamountfield\",name:\"Tax\",itemId:\"Tax\",label:\"Tax\",labelWidth:\"7em\",cls:[\"rm-flatfield\",\"rm-cursor-blinkbg\",\"rm-flatfield-last\"],decimalPlaces:2,prefix:\"$\",clearIcon:true}]}]}]},showDetailsFields:function(){this.down(\"#descriptionField\").removeCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(false)},hideDetailsFields:function(){this.down(\"#descriptionField\").addCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(true)},hideTaxFields:function(){this.down(\"#TaxGroupId\").setHidden(true);this.down(\"#Tax\").setHidden(true);this.down(\"#Amount\").addCls([\"rm-flatfield-last\"])},setTaxModified:function(a){var b=this.down(\"#Tax\");if(a){b.addCls([\"rm-field-warning\"]);b.setLabel(\"Tax (modified)\");b.removeCls(\"clear-icon-hidden\")}else{b.removeCls([\"rm-field-warning\"]);b.setLabel(\"Tax\");b.addCls(\"clear-icon-hidden\")}}});Ext.define(\"RM.util.PseudoGuid\",{singleton:true,currentIndex:1,guidMask:",729632,38,",next:function(){var b=this.currentIndex.toString();var a=new RegExp(\"0{\"+b.length+\"}$\");var c=this.guidMask.replace(a,b);this.currentIndex+=1;if(this.currentIndex>999999999999){this.currentIndex=1}return c",691438,37,687934,177,688118,34,":\"invoicelineitem field[name=UnitPrice]\",quantity:\"invoicelineitem field[name=Quantity]\",discount:\"invoicelineitem field[name=Discount]\",taxCode:\"invoicelineitem field[name=TaxGroupId]\",tax:\"invoicelineitem field[name=Tax]\",amount:\"invoicelineitem field[name=Amount",688321,32,688360,49,"field[name=ProjectID]\",itemId:\"invoicelineitem field[name=ItemId]\",projectName:\"invoicelineitem field[name=ProjectName]\",",688437,174,",unitPrice:{valueChange:\"unitPriceChanged\"},tax:{valueChange:\"taxAmountChanged\",clearicontap:function(){this.taxAmountChanged(null,null)}},taxCode:{change:\"taxCodeChanged\"},quantity:{valueChange:\"quantityChanged\"},discount:{change:\"discountChanged\"},projectName:{change:\"projectChanged\"}}},isTaxInclusive:function(){return this.taxStatusCode===RM.Consts.TaxStatus.INCLUSIVE},showView:function(e,f,d,g,a,c){this.ignoreEvents=false",688671,42,"taxStatusCode=d.taxStatus;this.invoiceDate=d.invoiceDate",716959,36,"if(g){this.detailsData=g}else{this.isCreate=true;this.detailsData={IsNew:true,InvoiceLineItemId:RM.util.PseudoGuid.next(),Quantity:1,TaxGroupId:null,TaxIsModified:false}}",740777,65,689065,135,"getAdd",679899,47,680062,37,"Tax().setReadOnly(!RM.CashbookMgr.getTaxPreferences().AllowTaxEdit);if(!this.initShow)",721970,49,"DiscountValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);if(!this.isTaxInclusive()){this.getUnitPrice().setValue(this.detailsData.UnitPriceExTax)}if(this.taxStatusCode===RM.Consts.TaxStatus.NON_TAXED){this.getItemDetail().hideTaxFields()}this.setTaxModified(this.detailsData.TaxIsModified);if(this.detailsData.ItemId){this.getItemDetail().showDetailsFields()}",717850,36,";this.initShow",717902,73,"Item",717984,44,"setEditable:function(a){if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getItemForm())}},setTaxModified:function(a){this.detailsData.TaxIsModified=a;this.getItemDetail().setTaxModified(a)},getDiscountValue:function(){var b=this.getDiscount().getValue();var a={};if(b",618426,32,"entage=parseFloat(b.replace(\"%\",\"\"))}else{if(b",685911,35,"parseFloat(b.replace(\"$\",\"\"))}}return a},setDiscountValue:function(b,a){if(b){this.detailsData.Discount=b+\"%\"}else{if(a){this.detailsData.Discount=\"$\"+Ext.Number.toFixed(a,2)}else{this.detailsData.Discount=\"\"}}this.getDiscount().setValue(this.detailsData.Discount",689839,133,"||0,function(c){b.setValue(c==0?\"",690018,304,"this.itemChanged(c[0])},this)}}}}},go",639967,35,645261,104,"add",719309,51,690571,108,"UnitPriceExTax){this.getUnitPrice",690640,37,690847,110,"Ext.apply(this.detailsData,c);b.ItemType=a;b.Quantity=b.Quantity||1;var d=this.getDiscountValue();b.DiscountPercentage=d.DiscountPercentage;b.DiscountAmount=d.DiscountAmount;",691354,85,",itemChanged:function(a){this.detailsData.ItemName=a.Name;this.detailsData.UnitPriceExTax=a.UnitPriceExTax;this.setTaxModified(false);this.ignoreEvents=tru",690364,39,"a.ItemId,ItemName:a.ItemPath,TaxGroupId:a.SaleTaxCodeID,Description:a.SalesDescription,UnitPrice:this.isTaxInclusive()?\"\":a.UnitPriceExTax});this.ignoreEvents=false;var b=this;this.getServerCalculatedValues(\"Item\",function(){b.getItemDetail().showDetailsFields()})},unitPriceChanged:function(b,a){if(this.ignoreControlEvents()){return}if(!this.isTaxInclusive()){this.detailsData.UnitPriceExTax=b}this.getServerCalculatedValues(\"UnitPrice\")},discountChanged:function(c,b,a){if(this.ignoreControlEvents()){return}this.detailsData.Discount=b;this.getServerCalculatedValues(\"Discount\")},taxAmountChanged:function(b,a){if(this.ignoreControlEvents()){return}if(!b){this.detailsData.TaxIsModified=false}else{this.detailsData.TaxIsModified=true}this.getServerCalculatedValues(\"Tax\")},taxCodeChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Tax\")},projectChanged:function(c,b,a){if(this.ignoreControlEvents()){return}if(!b){this.getProjectId().setValue(null)}if(this.getItemId().getValue()){}},quantityChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Quantity\")},getServerCalculatedValues:function(g,b){var d={AmountTaxStatus:this.taxStatusCode,PreviousAmountTaxStatus:this.taxStatusCode,CustomerId:this.customerId,InvoiceDate:this.invoiceDate,LineItems:[]}",690913,42,"e={ChangeStatus:2,ItemId:c.ItemId,Quantity:c.Quantity||1,TaxGroupID:c.TaxGroupId,TaxIsModified:this.detailsData.TaxIsModified,Tax:this.detailsData.TaxIsModified?c.Tax:null,UnitPriceExTax:this.detailsData.UnitPriceExTax};var f=this.getDiscountValue();if(f.DiscountPercentage){e.DiscountPercentage=f.DiscountPercentage}else{e.DiscountAmountExTax=this.detailsData.DiscountAmountExTax}switch(g){case\"UnitPrice\":e.UnitPrice=this.getUnitPrice().getValue();e.UnitPriceIsModified=true;break;case\"Quantity\":e.QuantityIsModified=true;break;case\"Discount\":if(!e.DiscountPercentage){e.DiscountAmount=f.DiscountAmount}e.DiscountIsModified=true;break}d.LineItems.push(e",686108,34,"Calc\",true,d,function a(j){var h=j[0].Items[0];this.ignoreEvents=true;this.detailsData.AmountExTax=h.AmountExTax;this.detailsData.AmountTax=h.AmountTax;this.detailsData.DiscountedTaxAmount=h.DiscountedTaxAmount;this.detailsData.DiscountedTaxExclAmount=h.DiscountedTaxExclAmount;if(g===\"UnitPrice\"){this.detailsData.UnitPriceExTax=h.UnitPriceExTax}this.setTaxModified(h.TaxIsModified);this.getItemForm().setValues({UnitPrice:this.isTaxInclusive()?h.UnitPrice:this.detailsData.UnitPriceExTax,Amount:h.Amount,Tax:h.Tax});this.setDiscountValue(e.DiscountPercentage,h.DiscountAmount);this.detailsData.DiscountAmountExTax=h.DiscountAmountExTax;this.ignoreEvents=false;if(b){b()}},this,function(h){alert(h)},\"Working...\")},ignoreControlEvents:function(){if(!this.initShow||this.ignoreEvents){return true",691437,1482,"RM.component.Secure",692923,40,"permissionFor:\"Invoices\",",737232,173,693136,4023,"display:inline",702420,70,"Time",701903,38,697281,5129,"display:inline",702420,3209,705656,146,706175,59,"0",706366,56,705915,90,"'+(a.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED?\"\":'",706127,48,"Total (excluding tax)",705807,51,"2",706366,56,706042,65,"3}</span></div></tr>')+'",706127,48,705802,56,706365,57,706291,74,"5",706366,129,"6",706496,49,"Subtotal",706551,57,"AmountExTax",706586,47,"Amount",706641,1946,"var a=!(",708621,59,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",708584,36,"a);var b=!(",708804,58,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",708768,35,"b",708680,90,708863,171,"slidenavigationview\");RM.AppMgr.showSuccessMsgBox(\"Invoice \"+this.invoiceData.InvCode+\" was Approved.\")},this,function(a,b){RM.AppMgr.showOkMsgBox",709070,1157,"RM.AppMgr.loadStore(this.getHistory",664671,72,711191,372,"secureformpanel\"",711583,42,"component\",height:1},{xtype:\"rmamoun",711631,52,"decimalPlaces:4,prefix:\"",603809,35," rm-cursor-blinkbg\",placeHolder:\"enter\"},{xtype:\"rmamoun",711771,58,"decimalPlaces:2,prefix:\"$",603809,35," rm-cursor-blinkbg",711880,93,660653,37,"Discount",716032,44,712117,222,712415,149,"console.log(\"CustomDiscount showView\")",712563,467,713147,103,"validateForm:function(){console.log(\"validateForm\");",713559,3140,",hide:\"onHide",716698,499,"RM.ViewMgr.regFormBackHandler(this.back,this);",717197,713,658028,34,"FormBackHandler()",722092,67,717975,1647,"RM.AppMgr.showSuccessMsgBox(\"Timesheet saved\"",742637,35,"timesheet\");this.goBack()},this",719634,57,"RM.AppMgr.showOkMsgBox",719696,884,"text",720586,170,",hide:\"onHide",720755,538,"RM.ViewMgr.regFormBackHandler(this.back,this);",721293,403,721711,383,658028,34,"FormBackHandler()",722092,3956,";RM.AppMgr.itemUpdated(\"expense\"",726047,1337,"var f=Ext.decode(e.responseText);if(f.success){",725983,55,"RM.AppMgr.itemUpdated(\"expense\");this.goBack()},this)}else{RM.AppMgr.showOkMsgBox(f.eventMsg)}},failure:function(e){",627429,34,"e)",727419,5868,"secure",733287,149,",labelWidth:\"4",609568,33,733466,396,",permissionFor:{name:\"SalesPreferences\",action:\"View\"}",733862,228,",listeners:{focus:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)},keyup:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)}}}]",734368,103,"00",669258,79,"ent",734556,38,734317,1851,"this.getEmail().showValidation(true);",736248,33,"true);if(a.Email==\"\"&&a.Subject",670278,44,736248,47,";RM.AppMgr.showInvalidFormMsg();return b}",736168,127,";RM.AppMgr.showInvalidFormMsg();return b}if(!RM.AppMgr.validateEmail(a.Email)",670282,40,"b=false;RM.AppMgr.showInvalidEmailMsg();return b",724205,51,670380,35,736381,241,",\"Sending...\"",736622,1721,"var a=this.getNoteText().getValue();if(a",738341,32,"a)}else{RM.AppMgr.showOkMsgBox(\"Please enter some text for the note\"",741231,38,738439,3580,"itemTypeFld:\"createitem #itemType\",itemNameFld:\"createitem #itemName",742017,125,"createitem:{show:\"onShow\"},",742142,57,"s",742202,251,"how:function(){this.initialFormValues",742473,37,644752,33,742483,43,"RM.Consts.ItemStatus.ACTIVE",670428,51,742624,93,"RM.AppMgr.showOkMsgBox(c)})",722091,68,"CreateItem",717984,44,690571,46,"Type){this.getItemType",644592,39,"!a.Name",690619,60,"SaleCategoryID){this.getAcctCat",644592,39,690846,45,"go",639967,35,645261,159,742763,8145,"idProperty:\"AcctCatName\",",750908,7088,"AppStop",757992,1357,55391,32,".prototype.isNotPreventable=/^(select|a|input|textarea)$/i",759349,682]