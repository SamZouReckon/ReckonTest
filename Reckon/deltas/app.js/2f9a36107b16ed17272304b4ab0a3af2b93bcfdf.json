["/*07919832d52c7b3c88137bf7eb37adaf82f357f1",42,554983,555737,744,"util.Log",640170,41,"Log\",debug:function(a){",555009,733,556483,2447,"tel\"}",558950,439,"else{this.setValue(a.replace(/\\D/g,\"\"))",559388,2765,"area",562153,185,"b,a){this.permissions=b.map(function(c){return c.toLowerCase?c.toLowerCase():c});this.forceReadOnly=false;if(a.toUpperCase()===\"R\"){this.forceReadOnly=true;RM.Log.debug(\"Cashbook loaded as Read Only, permissions overrides will apply to AddEdit, Delete and certain Do actions.\")}",562417,173,"DoUnlessReadOnly:function(a,b){return !this.forceReadOnly&&this.canDo(a,",562583,44,"UnlessReadOnly",562627,83,"UnlessReadOnly",562710,103,"UnlessReadOnly",562813,7982,",{xtype:\"spacer\"},{text:\"\",itemId:\"refresh\",ui:\"rm_topbarbuttonrigh",679008,35,"refresh.svg\",width:\"2.6em",570793,3933,"a=this.getComponent(1);if(a.isHidden()){this.showSearch()}else{this.hideSearch()}},showSearch",574710,36,"1),b=this.getComponent(3),a=this.getComponent(0);c.setHidden(false);b",574879,48,"c.focus();a.setHidden(true)},hideSearch:function(d){var c=this.getComponent(1),b=this.getComponent(3),a=this.getComponent(0);c.setHidden(true);if(!d&&c",574946,47,"c.reset();b",574879,36,"search.svg\");a.setHidden(this.config.sortfields==null)",575113,108,"hidden:true,listeners:{painted:\"checkPermissions\"",526192,41,"arguments",587359,57,"checkPermissions,scope:this});this.checkPermissions()",602463,63,575465,8021,"\"Contacts\"",583520,806,"itemId:\"version\",html:\"",584343,73,"itemId:\"apiVersion\",html:\"",584343,2758,"onSelect:function(c,b,a",444831,34,"fireEvent(\"itemselected\",b.raw)",587099,2022,";this.setUpNavigationListeners(",589120,4945,"document.activeElement.blur()",594120,100,",setUpNavigationListeners",592247,34,"addListener(\"itemselected\",function(a){this.navigationHandler(a,this.activeView)},this);this.mainView.addListener(\"activeitemchange\",function(a,c,b){this.navigationHandler(c,b)},this)},getActiveView:function(){return this.activeView},navigationHandler:function(b,a){b=this.viewOrActiveSlideNavChild(b);a=this.viewOrActiveSlideNavChild(a);this.activeView=b;this.app.fireEvent(\"rm-activeviewchanged\",b)},viewOrActiveSlideNavChild:function(a){if(a.xtype===\"slidenavigationview\"){return this.mainNavContainer.getActiveItem().raw}else{return a}",594219,484,"{[this.getClass(values)]}\" style=\"background-color:{ColorCode}",594754,137,"div class=\"rm-accesstext rm-pt5\">{[this.accessLevel(values)]}</div></td></tr></table>',{getClass:function(a){if(a.Access.toUpperCase()==\"R\"){return\"rm-list-readonly-cashbook\"}else{return\"rm-list-cashbook\"}},accessLevel:function(a){if(a.Access.toUpperCase()==\"R\"){return\"READ ONLY\"+(a.StatusText?\" - \"+a.StatusText:\"\")}else{return a.StatusText",594988,3115,"d",616448,34,"Path",635279,32,598174,255,"d",598430,62,"d",598493,2394,"hasLockOffDate",600745,45,"LockoffDate!==null},getLockOffDate:function(){return new Date(this.getCurrentCashbook().LockoffDate)},loadLastCashbook:function(d,a,c,b",600914,64,",d,a,c,b)}},unloadCashbook:function(){this.setCashbookId(null);this.setCurrentCashbook(null)",600991,67,641935,41,601132,79,601058,36,601214,224,",function(b,c){RM.AppMgr.showErrorMsgBox(c);RM.AppMgr.login()})},this)},setCashbook:function(e,f,a,d,b){var c=this;",601476,59,"e},function(g){c.setCashbookId(e);c.setCurrentCashbook(g",601597,54,"g",601652,75,"g[0].AccountingCategori",601662,34,"TaxStatuses\").setData(g[0].AmountTaxStatus",601662,34,"ItemTypes\").setData(g",602157,48,"c",602209,33,",c.getCurrentCashbook().Access);if(f){f.call(a)}},a,d,\"Loading book...\"",622489,32,602319,4086,"\"Contacts",715019,45,606483,230,"maxLength:100",606712,168,583677,36,"\",value:\"Suppliers\"},",606865,56,607290,82,606729,32,607107,479,"maxLength:100",607585,80,"maxLength:100",607664,74,"maxLength:100",607737,87,"maxLength:100",607823,1253,"maxLength:100",609075,76,"maxLength:100",609151,43,",maxLength:100",609194,88,",maxLength:100",609282,46,"maxLength:100",770016,69,609396,13475,"this.getItemsLabelHtml(true)",622913,372,"getItemsLabelHtml:function(a){return a?'Items",556831,36,":'<span style=\"color: #F00\">Items *</span>'",623283,1158,";this.validateForm()",624441,1016,",validateForm:function(){var a=this.getViewData().length>0;this",624814,41,"this.getItemsLabelHtml(a))",636251,40,625487,409,"action",625903,525,626431,54,"ate",616397,32,626375,194,626711,226," cod",626936,218,"d",627155,1141,628387,367,"{fn",628753,47,",",610127,37,628353,33,628799,1441,":s ",630240,4213,"d",634454,82,"d",634537,154,"d",598430,62,"d",634755,729,"d,usePicker:true,name:\"TaxCodeId",598430,62,"d",635579,1750,"StatusApprov",637600,51,"DRAFT)},isInvoiceStatusPay",637600,105,"},isInvoiceStatus",637522,73,"Status",637595,4244,"window.cordova",641859,246,"appPause",642109,227,"runningOnDevice:function(){return this.appTypeId=",642383,33,642334,693,"doAfterLogin(b",643152,40,"ViewMgr.back()}else",643439,39,643295,257,"doAfterLogin(a",643677,85,"doAfterLogin:",643535,144,"if(a.LoginAlert",563116,32,"LastLoginAlert\"),c=null;if(b){c=Ext.decode(b)}if(!c||(c.AlertId!=a.LoginAlert.AlertId)||(a.LoginAlert.RepeatInterval>0&&Ext.Date.now()/1000-c.LastShown>a.LoginAlert.RepeatInterval)){this.showRMMsgPopup(a.LoginAlert.Text,a.LoginAlert.AlertType,[{text:\"OK\",itemId:\"ok\"}]);localStorage.setItem(\"RmLastLoginAlert\",Ext.encode({AlertId:a.LoginAlert.AlertId,LastShown:Ext.Date.now()/1000}))}}",643760,223,"RM.CashbookMgr.unloadCashbook(",643981,2456,"CommsError",646445,183,"CommsError",646636,41,". If the problem persists please",646680,196,". If the problem persists please contact support.",646897,35,"howCommsError:function(a){if(!this.showingCommsError){this.showingCommsError=true;this.showOkMsgBox(a,function(){this.showingCommsError=false},this)",646928,1546,"d",648475,1517,"g,f,b,a,e,d){",649564,44,"if(!Ext.isEmpty(f)){c.add({xtype:\"image\",src:\"resources/images/rm-msgbox-\"+f+\".svg\"",650176,40,"}c.add({xtype:\"component\",html:g",650248,215,"h){c.hide();if(a&&e){a.call(e,h",649919,38,650532,512,"warning",651044,93,"warning",651137,121,"warning",651258,1465,"d",652724,104,"d",652829,105,"d",652935,182,"d",653118,82,"d",653201,192,"config:{refs:{mainView:\"mainview\"},control:{mainView:{activeitemchange:\"onActivate\"}}}",653392,80,",onActivate:function(a,c,b){",653471,7096,",version:\"about #version\",apiVersion:\"about #apiVersion\"},control:{about",785663,37,660588,73,",onShow:function(){var a=this;try{cordova.AppVersion.getAppVersion(function(c){a.getVersion().setHtml(\"Version: \"+c)})}catch(b){this.getVersion().setHtml(\"unknown version\")}this.getApiVersion().setHtml(\"Api Version: \"+",585092,33,"iVersion\")||\"unknown\"",778799,32,"ontac",775405,32,660728,3442,",b=this.getBusinessOrIndividual();b",664201,48,"b.addCls(\"rm-flatfield-disabled\")}",704905,44,"var c={};a.setValues(c",664296,10223,"RM.ViewMgr.hideKeyPad(",674548,492,",CashbookId:RM.CashbookMgr.getCashbookId()",675040,67,"afterLogin(",675128,257,674869,41,675395,78,"afterLogin:function(a){",643154,78,"this.goCb.call(this.goCbs,a)},this,function(b,c",675437,32,";RM.CashbookMgr.unloadCashbook();RM.AppMgr.showErrorMsgBox(c)}",680248,56,"oCb.call(this.goCbs,a)}",675471,965,"Free signup at our Reckon One websit",676459,676,"password:{keyup:\"onPasswordKeyUp",677132,431,677605,88,",hidden:!(localStorage.getItem(\"RmShowSettings\"))&&RM.AppMgr.runningOnDevice()",675645,132,",hidden:e.hidden",657901,125,677950,242,"PasswordKeyUp:function(b,a){if(a.event.keyCode==13){this.onLogin()",678187,155,"if(c===\"setmeup\"&&a===\"Mak3!t5o\"){this.getUserName().setValue(\"\"",677397,34,"localStorage.setItem(\"RmShowSettings\",true);RM.ViewMgr.showCoreSettings()}else",674954,61,678402,293,713166,33,678727,2183,",sortSearchBar:\"cashbooks sortsearchbar",680909,69,"a){this.setLoadTimer(a)},searchclear:function(){",681152,170,"else{this.getSortSearchBar().hideSearch(true);",681103,48,731917,39,681360,308,"b){var a=",681103,34,";a.clearFilter();if(b){a.filter(\"search\",b",739040,33,"c){if(!b&&c",681741,171,"a",688015,118,",[a]",682030,783,",createCustomer:\"customers #createCustomer\"},control:{customers:{show:\"onShow\"},",682824,517,"delete this.searchFilter",771680,52,"CreateCustomer().setHidden(!RM.PermissionsMgr.canAddEdit(\"Contacts\"));",683849,34,765296,40,683439,6479,",refresh:\"dashboard #refresh",689917,37,",refresh:{tap:\"refreshDashboard",689952,112,"itemupdated:this.onItemUpdated",690063,62,"showDashboardData()},onShow:function(){if(this.needsRefresh){this.refreshDashboard()}else{this.showDashboardData()}},onItemUpdated:function(){this.needsRefresh=true},refreshDashboard",664760,34,"s(\"Dashboard\",null,function(a){this.needsRefresh=false;this.dashboardData=a[0];this.showDashboardData()},this",690176,197,"TopExpenseAccounts",690387,3570,",\"Sending email\"",693957,323,694087,39,"0",699696,55,694351,7174,";",701456,35,"rm-activeviewchanged\",\"onActiveViewChang",701516,265,"&&this.dataLoaded){RM.Log.debug(\"invoices list reload scheduled\");this.reloadOnNextActivation=true}},onActiveViewChanged:function(a){if(!this.reloadOnNextActivation){return}if(a.xtype===this.getInvoices().xtype){this.reloadOnNextActivation=false;this.activeList.reload();RM.Log.debug(\"invoices list reloaded\"",701806,638,"util.Dates\",{singleton:true,encodeAsUTC:function(a){function b(c){return c<10?\"0\"+c:c}return\"\"+",24724,36,")+\"-\"+b(a.getDate())+\"T\"+b(a.getHours())+\":\"+b(a.getMinutes())+\":00.000Z\"},decodeAsLocal:function(a){var b=new Date().getTimezoneOffset();if(a.lastIndexOf(\"+\")>0){a=a.substr(0,a.lastIndexOf(\"+\"))}return new Date(Date.parse(a)+b*60*1000",736505,38,755488,50,702512,755,"onS",703268,606,"isEditable:function(){return RM.InvoicesMgr.isInvoiceStatus",704370,75,"&&this.detailsData.SaveSupport&&!(this.detailsData.Paid>0",703871,456,",SaveSupport:true})}",704446,106,"var d=this.getDateFld();",752496,54,704606,126,"applyViewEditableRul",707514,46,704802,71,"d",704890,85,"b=this.getInvoiceForm();var e=this.detailsData;if(e",705026,47,"e.CustomerId)}b.reset();b.setValues(e",705110,52,"e",705163,73,"b",705237,151,"e",705389,82,"e.Status));var c=d.getValue();var a=RM.CashbookMgr.getLockOffDate();if(c.getTime()<=a.getTime()){a.setDate(a.getDate()+1);d.updateValue(a)}",705482,141,"dataLoaded=false}},onSave:function(a){this.save()},applyViewEditableRules:function(){var a=this.isEditable();",705664,263,"()",705927,401,744768,46,706489,32,706525,53,706664,143,"RM.util.Dates.decodeAsLocal(c.DueDate)}c.Date=RM.util.Dates.decodeAsLocal",706842,350,"this.applyViewEditableRules();",707314,148,"lineItemsDirty=false",707456,379,";this.detailsData.InvCode=a[0].InvCode",707835,310,"()",708145,1221,"()",709366,522,"RM.util.Dates.encodeAsUTC(d.Date)",709894,453,"if(b.Previous",741797,47,")",710346,66,710411,101,"d:e.ItemId,ProjectId:e.ProjectId",710544,214,"d",710759,1435,780287,37,"OkCancelMsgBox(\"You must save your changes to continue, save now?\",function(a){if(a==\"ok\"){this.save(this.onInvoiceActions)}},this)}else{this.onInvoiceActions()}",783552,44,712277,64,"this.getLineItems().validateForm();",755405,47,",save:function(b",709763,42,"d",712446,60,"c=Ext.applyIf(d,this.detailsData);delete c.DiscountPerc;delete c.DiscountAmount;if(c.Discount.indexOf(\"%\")>-1){c.DiscountPerc=c",712633,34,"c.Discount.indexOf(\"$\")>-1){c.DiscountAmount=c",712713,34,"c.Discount;c.Notes=this.noteText;c.Date=RM.util.Dates.encodeAsUTC(c.Date);c.DueDate=c.DueDate?RM.util.Dates.encodeAsUTC(c.DueDate):null;if(this.validateForm(c)){if(d.LineItems.length>0){var a=1;d.LineItems.forEach(function(e){e.lineNo=a;if(e.IsNew){delete e",712901,69,"c",710814,34,"s\",this.isCreate,c,function(e){",713086,32,";if(b){",756623,34,".InvoiceId=e[0].InvoiceId}this.dataLoaded=false;this.isCreate=false;b.apply(this)}else{this.goBack()}},this,function(e,f){RM.AppMgr.showOkMsgBox(f",713163,2008,"d",616448,47,715219,1318,"d",716538,1812,"d",718351,543,"icont",718899,108,"isTaxTracking",718936,37,706136,32,719005,372,"null",719378,754,"!this.isTaxTracking()",720182,1892,"if(!this.isTaxTracking()){delete c.TaxGroupId}",722074,70,722147,191,758461,41,722379,260,722380,76,"Id\",{id:a},function(b){if(b&&b",722715,39,"b[0].SalePrice)}},this)}",722777,108,"d",726974,34,722920,143,"this.isTaxTracking()?a.SaleTaxCodeId:null",723078,1748,",TaxGroupId:this.isTaxTracking()?c.TaxGroupId:null",724853,8281,"d",733135,190,"d",733326,5061,"d",733135,39,738427,150,"d",738578,1609,"d",740188,277,"d",740466,2802,"xtype:\"component\",itemId:\"lockOffWarning\",hidden:true,cls:\"rm-warning-message",743264,213,"Receive payment",743488,749,744236,102,",warningMessage:\"invoiceactions #lockOffWarning",744337,525,"b=!(RM.InvoicesMgr.isInvoiceStatus",744890,79,"var c=!(RM.InvoicesMgr.isInvoiceStatus",745037,57,"Do(\"Invoices\",\"PrintEmail\"));var e=!RM.InvoicesMgr.isInvoiceStatus",745205,32,"||!RM.PermissionsMgr.canAddEdit(\"Payments\")||this.invoiceData.BalanceDue===0;if(RM.CashbookMgr.getLockOffDate().getTime()>=this.invoiceData.Date.getTime()){var d=!(b&&e);b=true;e=true;if(d){var a=this.getWarningMessage();a.setHtml(\"<strong>Note:</strong> Certain actions for this Invoice are not available because the Book is locked off until \"+RM.CashbookMgr.getLockOffDate().toLocaleDateString());a.setHidden(false)}}this.getInvApproveBtn().setHidden(b",745113,34,"c",745148,32,"e",745237,79,"d",771819,38,"){",713086,32,745430,82,";this.invoiceData.Status",637626,33,";this.getInvStatus().addCls(\"rm-approved-hearderbg\");this.onShow(",745511,8483,"d=c.SaleTaxCodeId;",753551,35,754047,4609,"d=c.SaleTaxCodeId;",758190,33,754047,67,758774,2396,"d){c.params.ExpenseId=e.TaxTypeId",761203,1456,"d",762660,34,"d\",b.TaxTypeId",762708,6973,"d",769682,68,"d\"",627184,52,769804,1449,"d",771254,430,771762,56,"d",771819,38,"f){this.messagetemplateRec=f;RM.ViewMgr.showPanel(b)}",749977,32,"this.messagetemplateRec;",771724,35,771860,108,771975,303,"d)},this",783551,39,693161,45,772370,784,",c){this.showEmailFail(c",773175,156,"a",773331,51,"<br/>",773262,42,773422,695,769183,36,774117,71,609328,68,",maxRows:10",770085,167,774201,3065,"d",777267,1153,"d:e.ProjectId",778433,56,"d",778490,579,"d",779070,55,"d",779126,1006,"d",780133,617,"Receive payment",581440,48,780809,370,"d",781180,74,"d",781520,69,781324,116,"d",781441,78,"d",781520,741,"d",782262,66,"d",782329,382,"d=b.AccountsReceivableCategoryId",782743,934,"d",783678,74,"d",783753,407,"d",784161,45,"d",784207,33,"d;a.CustomerSupplierId",784262,275,"receive payment",773672,77,784625,2130,"d\",fields:[\"GSTCodeId",786776,324,"d\",fields:[\"AccountingCategoryId",787132,98,"d\",fields:[{name:\"TaxStatusId",787259,185,",\"StatusText",787443,497,"d\",\"Sales",791326,39,787988,1149,"d\",fields:[\"TemplateId",787132,34,789193,266,"d\",\"ItemName\",\"TaxTypeId",789483,287,"d\",\"ItemName\",\"TaxTypeId",789483,57,789851,1445,"d\",fields:[\"PaymentMethodId",791323,109,"d\",fields:[\"BankAccountId",791323,35,791492,5019,"}});if(Ext.os.version.gtEq(\"7\")){if(Ext.os.deviceType===\"Tablet\"||!Ext.browser.is.Safari||window.navigator.standalone){Ext.define(\"Ext.iOS7Fix1.Viewport\",{override:\"Ext.viewport.Ios\",constructor:function(){var d={},b={},a=this.determineOrientation(),f=window.screen.height,c=window.screen.width,e=a===this.PORTRAIT?f-window.innerHeight:c-window.innerHeight;d[this.PORTRAIT]=f-e;d[this.LANDSCAPE]=c-e;b[this.PORTRAIT]=c;b[this.LANDSCAPE]=f;this.stretchHeights=d;this.stretchWidths=b;this.callOverridden(arguments);this.on(\"ready\",this.setViewportSizeToAbsolute,this);this.on(\"orientationchange\",this.setViewportSizeToAbsolute,this)",547848,36,"this.stretchHeights[this.orientation]",547796,35,"this.stretchWidths[this.orientation]},setViewportSizeToAbsolute:function(){this.setWidth(this.getWindowWidth());",550460,39,"})}if(Ext.os.deviceType===\"Tablet\"){Ext.define(\"Ext.iOS7Fix2.Viewport\",{override:\"Ext.viewport.Ios\"",553183,33,"Overridden(arguments);window.addEventListener(\"scroll\",function(){if(window.scrollX!==0){window.scrollTo(0,window.scrollY)}},false)},setViewportSizeToAbsolute",554439,32,";",108359,34,"}",796605,706]