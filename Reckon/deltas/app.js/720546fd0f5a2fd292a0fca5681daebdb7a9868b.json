["/*07919832d52c7b3c88137bf7eb37adaf82f357f1",42,554983,555737,566,"ID:3",556324,174,"util.Log\",{singleton:true,alternateClassName:\"RM.Log\",debug:function(a){",555009,733,556500,2447,"tel\"}",558967,439,"else{this.setValue(a.replace(/\\D/g,\"\"))",559405,151,596345,955,"component.RMSelectScreenField\",{extend:RM.component.ExtTextField,xtype:\"rmselectscreenfield\",config:{",493186,196,559537,390,"rmselectscreen",559931,958,"area",560889,185,"b,a){this.permissions=b.map(function(c){return c.toLowerCase?c.toLowerCase():c});this.forceReadOnly=false;if(a.toUpperCase()===\"R\"){this.forceReadOnly=true;RM.Log.debug(\"Cashbook loaded as Read Only, permissions overrides will apply to AddEdit, Delete and certain Do actions.\")}",561153,173,"DoUnlessReadOnly:function(a,b){return !this.forceReadOnly&&this.canDo(a,",561319,44,"UnlessReadOnly",561363,83,"UnlessReadOnly",561446,103,"UnlessReadOnly",561549,6497,"'+RM.AppMgr.formatCurrency(b.Actual,0",568083,1448,",{xtype:\"spacer\"},{text:\"\",itemId:\"refresh\",ui:\"rm_topbarbuttonrigh",625376,35,"refresh.svg\",width:\"2.6em",569529,939,"Opaque",570468,2988,"a=this.getComponent(1);if(a.isHidden()){this.showSearch()}else{this.hideSearch()}},showSearch",573440,36,"1),b=this.getComponent(3),a=this.getComponent(0);c.setHidden(false);b",573609,48,"c.focus();a.setHidden(true)},hideSearch:function(d){var c=this.getComponent(1),b=this.getComponent(3),a=this.getComponent(0);c.setHidden(true);if(!d&&c",573676,47,"c.reset();b",573609,36,"search.svg\");a.setHidden(this.config.sortfields==null)",570181,35,573878,73,"hidden:true,listeners:{painted:\"checkPermissions\"",526192,41,"arguments",574046,86,";this.checkPermissions()",602176,63,574195,8021,"\"Contacts\",",732192,49,692640,59,"All",606606,44,"s",606650,36,582443,613,"itemId:\"version\",html:\"",583073,73,"itemId:\"apiVersion\",html:\"",583073,2758,"onSelect:function(c,b,a",698032,34,"fireEvent(\"itemselected\",b.raw)",585829,2022,";this.setUpNavigationListeners(",587850,143,588021,4802,"document.activeElement.blur()",592878,100,",setUpNavigationListeners",591005,34,"addListener(\"itemselected\",function(a){this.navigationHandler(a,this.activeView)},this);this.mainView.addListener(\"activeitemchange\",function(a,c,b){this.navigationHandler(c,b)},this)},getActiveView:function(){return this.activeView},navigationHandler:function(b,a){b=this.viewOrActiveSlideNavChild(b);a=this.viewOrActiveSlideNavChild(a);this.activeView=b;this.app.fireEvent(\"rm-activeviewchanged\",b)},viewOrActiveSlideNavChild:function(a){if(a.xtype===\"slidenavigationview\"){return this.mainNavContainer.getActiveItem().raw}else{return a}",592977,484,"{[this.getClass(values)]}\" style=\"background-color:{ColorCode}",593512,137,"div class=\"rm-accesstext rm-pt5\">{[this.accessLevel(values)]}</div></td></tr></table>',{getClass:function(a){if(a.Access.toUpperCase()==\"R\"){return\"rm-list-readonly-cashbook\"}else{return\"rm-list-cashbook\"}},accessLevel:function(a){if(a.Access.toUpperCase()==\"R\"){return\"READ ONLY\"+(a.StatusText?\" - \"+a.StatusText:\"\")}else{return a.StatusText",581820,136,593882,2463,597300,516,713002,50,597866,276,"d",598143,62,"d",598206,2394,"hasLockOffDate",600458,45,"LockoffDate!==null},getLockOffDate:function(){return new Date(this.getCurrentCashbook().LockoffDate)},loadLastCashbook:function(d,a,c,b",600627,64,",d,a,c,b)}},unloadCashbook:function(){this.setCashbookId(null);this.setCurrentCashbook(null)",600704,67,600804,120,600771,36,600927,224,",function(b,c){RM.AppMgr.showErrorMsgBox(c);RM.AppMgr.login()})},this)},setCashbook:function(e,f,a,d,b){var c=this;",601189,59,"e},function(g){c.setCashbookId(e);c.setCurrentCashbook(g",601310,54,"g",601365,75,"g[0].AccountingCategori",601375,34,"TaxStatuses\").setData(g[0].AmountTaxStatus",601375,34,"ItemTypes\").setData(g",601870,48,"c",601922,33,",c.getCurrentCashbook().Access);if(f){f.call(a)}},a,d,\"Loading book...\"",622202,32,602032,4086,"\"Contacts",712814,45,606196,230,"maxLength:100",606425,168,606650,56,",",606578,56,607003,82,606442,32,606820,479,"maxLength:100",607298,80,"maxLength:100",607467,39,607416,35,"maxLength:100",607450,87,"maxLength:100",607536,1253,"maxLength:100",608788,76,"maxLength:100",608864,43,",maxLength:100",608907,88,",maxLength:100",608995,46,"maxLength:100",609040,13544,"this.getItemsLabelHtml(true)",622626,372,"getItemsLabelHtml:function(a){return a?'Items",556848,36,":'<span style=\"color: #F00\">Items *</span>'",622996,1158,";this.validateForm()",624154,1016,",validateForm:function(){var a=this.getViewData().length>0;this",624527,41,"this.getItemsLabelHtml(a))",635957,40,625200,409,"action",625616,341,"rmselectscreen",625964,67,745383,33,626064,70,626299,118,626110,165,626417,226," cod",626642,218,"d",626861,1141,628093,367,"{fn",628459,47,",",609840,37,628059,33,628505,1441,":s ",629946,4213,"d",634160,82,"d",634243,154,"d",598143,62,"d",634461,729,"d,usePicker:true,name:\"TaxCodeId",598143,62,"d",635285,1461,636813,36,"PartiallyPaidInvoiceStatusText:function(){return\"PART-PAID",636843,195,"Status",637038,74,"StatusPay",637309,105,"},isInvoiceStatus",637231,73,"Status",637304,2561,"SessionManager\",{singleton:true,alternateClassName:\"RM.SessionManager\"",553183,51,"this.loggedIn=false;this.bumpWindowInSeconds=30;this.ttlMarginInSeconds=5;Ext.Ajax.on(\"requestcomplete\",this.onSessionActivity,this)},init:function(a){this.app=a},startSession:function(a){this.ttl=parseInt(a.SessionTTLInMinutes)*60;this.loggedIn=true;if(this.ttl){this.setSessionTimers()}},endSession:function(){clearTimeout(this.warningTimer);clearTimeout(this.sessionTimer);this.loggedIn=false;console.log(\"Session ended\")},setSessionTimers:function(){var a=this;clearTimeout(this.sessionTimer);clearTimeout(this.warningTimer);this.lastSessionStart=Date.now();var b=this.ttl-this.bumpWindowInSeconds;this.warningTimer=setTimeout(function(){a.sessionTimingOut()},b*1000);this.sessionTimer=setTimeout(function(){a.sessionTimedOut()},(this.ttl-this.ttlMarginInSeconds)*1000);console.log(\"Session timers started at \"+new Date())},onSessionActivity:function(){if(!this.loggedIn||this.bumpingSession){return}clearInterval(this.bumpTimer);var a=(Date.now()-this.lastSessionStart)/1000;if(a>this.ttl/2){console.log(\"Session sliding\");this.setSessionTimers()}},sessionTimingOut:function(){var a=this;var b=a.bumpWindowInSeconds-1;console.log(\"Session expires in \"+b+\" seconds, attempting to bump at \"+new Date());this.bumpSession()},sessionTimedOut:function(){this.endSession();this.app.fireEvent(\"rm-sessionexpired\")},bumpSession:function(){",639841,227,"window.cordova",640088,177,"SessionManager.init(a);this.application.on({\"rm-sessionexpired\":this.appPause,scope:this}",640260,215,"runningOnDevice:function(){return this.appTypeId=",640522,33,640473,685,"b){this.doAfterLogin",641229,42,"ViewMgr.back()}else",641518,39,641374,249,"a){this.doAfterLogin",641694,87,"doAfterLogin:function(a){this.userId=a.UserId;this.isUserLoggedIn=true;RM.SessionManager.startSession(a.SessionInfo);RM.EventMgr.setUserLogLevel(a.LogLevel);if(a.LoginAlert",644942,32,"LastLoginAlert\"),c=null;if(b){c=Ext.decode(b)}if(!c||(c.AlertId!=a.LoginAlert.AlertId)||(a.LoginAlert.RepeatInterval>0&&Ext.Date.now()/1000-c.LastShown>a.LoginAlert.RepeatInterval)){this.showRMMsgPopup(a.LoginAlert.Text,a.LoginAlert.AlertType,[{text:\"OK\",itemId:\"ok\"}]);localStorage.setItem(\"RmLastLoginAlert\",Ext.encode({AlertId:a.LoginAlert.AlertId,LastShown:Ext.Date.now()/1000}))}}",641779,223,"RM.CashbookMgr.unloadCashbook(",642000,234,"RM.SessionManager.endSession()",642234,2192,"CommsError",644434,183,"CommsError",644625,41,". If the problem persists please",644669,196,". If the problem persists please contact support.",644886,35,"howCommsError:function(a){if(!this.showingCommsError){this.showingCommsError=true;this.showOkMsgBox(a,function(){this.showingCommsError=false},this)",644917,1546,"d",646464,1525,"e,d",638048,33,"RMMsgPopup\");if(!Ext.isEmpty(f)){c.add({xtype:\"image\",src:",648054,38,648163,40,"}",648204,71,"d){if(d.hideBackground){c.getModal().setCls(\"rm-mask-obscured\")}}",648272,128,"e){a.call(e",648411,377,"ErrorMsgBoxOpaque",648700,81,",{hideBackground:true}",648781,55,"warning",648836,93,"warning",648929,121,"warning",649050,1192,"\\b",650254,271,"d",650526,104,"d",650631,105,"d",650737,182,"d",650920,82,"d",651003,192,"config:{refs:{mainView:\"mainview\"},control:{mainView:{activeitemchange:\"onActivate\"}}}",651194,80,",onActivate:function(a,c,b){",651273,7096,",version:\"about #version\",apiVersion:\"about #apiVersion\"},control:{about",783465,37,658390,73,",onShow:function(){var a=this;try{cordova.AppVersion.getAppVersion(function(c){a.getVersion().setHtml(\"Version: \"+c)})}catch(b){this.getVersion().setHtml(\"unknown version\")}this.getApiVersion().setHtml(\"Api Version: \"+",583822,33,"iVersion\")||\"unknown\"",658461,3511,",b=this.getBusinessOrIndividual();b",662003,48,"b.addCls(\"rm-flatfield-disabled\")}",662032,48,"c={};a.setValues(c);",666045,38,662138,10183,"RM.ViewMgr.hideKeyPad(",672350,492,",CashbookId:RM.CashbookMgr.getCashbookId()",672842,67,"afterLogin(c",672949,256,672671,41,673215,78,"afterLogin:function(a){",641233,78,"this.goCb.call(this.goCbs,a)},this,function(b,c",678096,32,";RM.CashbookMgr.unloadCashbook();RM.AppMgr.showErrorMsgBox(c)}",673247,45,"else{this.goCb.call(this.goCbs,a)}",675279,104,673395,861,"Free signup at our Reckon One websit",674279,676,"password:{keyup:\"onPasswordKeyUp",674952,431,675425,88,",hidden:!(localStorage.getItem(\"RmShowSettings\"))&&RM.AppMgr.runningOnDevice()",673465,132,",hidden:e.hidden",675645,367,"PasswordKeyUp:function(b,a){if(a.event.keyCode==13){this.onLogin()",676007,155,"if(c===\"setmeup\"&&a===\"Mak3!t5o\"){this.getUserName().setValue(\"\"",675217,34,"localStorage.setItem(\"RmShowSettings\",true);RM.ViewMgr.showCoreSettings()}else",672756,61,676222,192,676432,101,676532,2216,",sortSearchBar:\"cashbooks sortsearchbar",678747,69,"a){this.setLoadTimer(a)},searchclear:function(){",678990,170,"else{this.getSortSearchBar().hideSearch(true);",678941,48,"}",773851,38,679198,308,678816,60,"if(b){a.filter(\"search\",b",736842,33,"c){if(!b&&c",679579,171,"a",766400,118,",[a]",679868,783,",createCustomer:\"customers #createCustomer\"},control:{customers:{show:\"onShow\"},\"customer",678768,48,680719,460,"delete this.searchFilter;",772448,43,"this.getCreateCustomer().setHidden(!RM.PermissionsMgr.canAddEdit(\"Contacts\"));",681687,34,685392,40,681277,6479,",refresh:\"dashboard #refresh",687755,37,",refresh:{tap:\"refreshDashboard",687790,112,"itemupdated:this.onItemUpdated",687901,62,"showDashboardData()},onShow:function(){if(this.needsRefresh){this.refreshDashboard()}else{this.showDashboardData()}},onItemUpdated:function(){this.needsRefresh=true},refreshDashboar",600022,38,"Dashboard\",null,function(a){this.needsRefresh=false;this.dashboardData=a[0];this.showDashboardData()},this",688014,197,"TopExpenseAccounts",688225,3570,",\"Sending email\"",691795,323,691925,39,"0",697821,55,692189,2260,694941,276,595948,37,"tatus == 2 ? values.Balance : ",695247,35,695288,560,"<tpl if=\"(values.Status == 2 &amp;&amp; values.Balance &lt; values.Amount)",695846,49,"PartiallyPaidInvoiceStatusText())]}<tpl else",695847,85,"tpl>",695930,3720,";",696847,35,"rm-activeviewchanged\",\"onActiveViewChang",699641,265,"&&this.dataLoaded){RM.Log.debug(\"invoices list reload scheduled\");this.reloadOnNextActivation=true}},onActiveViewChanged:function(a){if(!this.reloadOnNextActivation){return}if(a.xtype===this.getInvoices().xtype){this.reloadOnNextActivation=false;this.activeList.reload();RM.Log.debug(\"invoices list reloaded\"",699931,638,"util.Dates\",{singleton:true,encodeAsUTC:function(a){function b(c){return c<10?\"0\"+c:c}return\"\"+",24724,36,")+\"-\"+b(a.getDate())+\"T\"+b(a.getHours())+\":\"+b(a.getMinutes())+\":00.000Z\"},decodeAsLocal:function(a){var b=new Date().getTimezoneOffset();if(a.lastIndexOf(\"+\")>0){a=a.substr(0,a.lastIndexOf(\"+\"))}return new Date(Date.parse(a)+b*60*1000",699231,38,737134,57,700644,748,"onS",701393,606,"isEditable:function(){return RM.InvoicesMgr.isInvoiceStatus",702495,75,"&&this.detailsData.SaveSupport&&!(this.detailsData.Paid>0",701996,456,",SaveSupport:true})}",702571,106,"var d=this.getDateFld();",754621,54,702731,126,"applyViewEditableRul",705309,46,702927,71,"d",703015,85,"b=this.getInvoiceForm();var e=this.detailsData;if(e",703151,47,"e.CustomerId)}b.reset();b.setValues(e",704917,52,"e",703288,73,"b",703362,151,"e",703514,82,"e.Status));var c=d.getValue();var a=RM.CashbookMgr.getLockOffDate();if(c.getTime()<=a.getTime()){a.setDate(a.getDate()+1);d.updateValue(a)}",703607,141,"dataLoaded=false}},onSave:function(a){this.save()},applyViewEditableRules:function(){var a=this.isEditable();",662446,87,703876,176,"()",704052,361,"if(c.Status===2&&c.BalanceDue<c.Amount",704411,48,"PartiallyPaidInvoiceStatusText())}else",704412,75,"}",704488,114,"RM.util.Dates.decodeAsLocal(c.DueDate)}c.Date=RM.util.Dates.decodeAsLocal",704637,350,"this.applyViewEditableRules();",705109,148,"lineItemsDirty=false",705251,379,";this.detailsData.InvCode=a[0].InvCode",705630,310,"()){if(a",755904,45,705991,1170,"()",707161,522,"RM.util.Dates.encodeAsUTC(d.Date)",707689,453,"if(b.Previous",739599,47,")",708141,66,708206,101,"d:e.ItemId,ProjectId:e.ProjectId",708339,214,"d",708554,1435,757136,37,"OkCancelMsgBox(\"You must save your changes to continue, save now?\",function(a){if(a==\"ok\"){this.save(this.onInvoiceActions)}},this)}else{this.onInvoiceActions",719343,47,710072,64,"this.getLineItems().validateForm();",719536,38,"return b},save:function(b",707558,42,"d",710241,60,"c=Ext.applyIf(d,this.detailsData);delete c.DiscountPerc;delete c.DiscountAmount;if(c.Discount.indexOf(\"%\")>-1){c.DiscountPerc=c",710428,34,"c.Discount.indexOf(\"$\")>-1){c.DiscountAmount=c",710508,34,"c.Discount;c.Notes=this.noteText;c.Date=RM.util.Dates.encodeAsUTC(c.Date);c.DueDate=c.DueDate?RM.util.Dates.encodeAsUTC(c.DueDate):null;if(this.validateForm(c)){if(d.LineItems.length>0){var a=1;d.LineItems.forEach(function(e){e.lineNo=a;if(e.IsNew){delete e",710696,69,"c",710766,51,"c,function(e",743157,35,"if(b){",754425,34,".InvoiceId=e[0].InvoiceId}this.dataLoaded=false;this.isCreate=false;b.apply(this)}else{this.goBack()}},this,function(e,f){RM.AppMgr.showOkMsgBox(f",710958,2008,713002,35,597776,32,"ItemPath\"},{xtype:\"rmselectscreen",615931,61,713134,1205,"d",714340,1812,"d",716153,543,"icont",716701,108,"isTaxTracking",716738,37,704261,32,716807,372,"null",717180,754,"!this.isTaxTracking()",717984,1892,"if(!this.isTaxTracking()){delete c.TaxGroupId}",719876,70,719949,191,"d",720141,300,720182,76,"Id\",{id:a},function(b){if(b&&b",720315,39,"b[0].SalePrice)}},this)}},itemChang",718416,32,720622,65,"d",720688,177,"this.isTaxTracking()?a.SaleTaxCodeId:null",720880,1748,",TaxGroupId:this.isTaxTracking()?c.TaxGroupId:null",722655,8281,"d",736190,39,730976,151,"d",731128,5061,"d",736190,189,"d",736380,1609,"d",737990,277,"d",738268,2802,"xtype:\"component\",itemId:\"lockOffWarning\",hidden:true,cls:\"rm-warning-message",741066,213,"Receive payment",741290,749,742038,102,",warningMessage:\"invoiceactions #lockOffWarning",742139,525,"b=!(RM.InvoicesMgr.isInvoiceStatusApprov",742844,73,"var c=!(RM.InvoicesMgr.isInvoiceStatus",742839,57,"Do(\"Invoices\",\"PrintEmail\"));var e=!RM.InvoicesMgr.isInvoiceStatus",743007,32,"||!RM.PermissionsMgr.canAddEdit(\"Payments\")||this.invoiceData.BalanceDue===0;if(RM.CashbookMgr.getLockOffDate().getTime()>=this.invoiceData.Date.getTime()){var d=!(b&&e);b=true;e=true;if(d){var a=this.getWarningMessage();a.setHtml(\"<strong>Note:</strong> Certain actions for this Invoice are not available because the Book is locked off until \"+RM.CashbookMgr.getLockOffDate().toLocaleDateString());a.setHidden(false)}}this.getInvApproveBtn().setHidden(b",742915,34,"c",742950,32,"e",743039,79,"d",743119,76,743236,78,";this.invoiceData.Status",637335,33,";this.getInvStatus().addCls(\"rm-approved-hearderbg\");this.onShow(",743313,8483,"d=c.SaleTaxCodeId;",751353,35,756509,67,751916,4542,"d=c.SaleTaxCodeId;",756222,33,756509,2463,"d){c.params.ExpenseId=e.TaxTypeId",759005,1456,"d",760462,34,"d\",b.TaxTypeId",760510,6973,"d",767484,68,"d\"",626890,52,767606,1449,"d",769056,430,769564,56,"d",743119,38,"f){this.messagetemplateRec=f;RM.ViewMgr.showPanel(b)}",763024,32,"this.messagetemplateRec;",769526,35,769662,108,769777,303,"d)},thi",777743,40,770127,829,",c){this.showEmailFail(c",770977,156,"a",771133,51,"<br/>",771064,42,771224,695,778672,36,771919,71,779392,68,",maxRows:10",767887,167,772003,3065,"d",775069,1153,"d:e.ProjectId",776235,56,"d",776292,579,"d",776872,55,"d",776928,1006,"d",777935,617,"Receive payment",625518,42,778605,376,"d",778982,74,"d",779322,69,634048,33,779159,83,"d",779243,78,"d",779322,741,"d",780064,66,"d",780131,382,"d=b.AccountsReceivableCategoryId",780545,934,"d",781480,74,"d",781555,407,"d",781963,45,"d",782009,33,"d;a.CustomerSupplierId",782064,275,"receive payment",782350,2207,"d\",fields:[\"GSTCodeId",784578,324,"d\",fields:[\"AccountingCategoryId",784934,98,"d\",fields:[{name:\"TaxStatusId",785061,185,",\"StatusText",785245,497,"d",785743,1196,"d\",fields:[\"TemplateId",784934,34,786995,266,"d\",\"ItemName\",\"TaxTypeId",787596,57,787342,230,"d\",\"ItemName\",\"TaxTypeId",787596,1502,"d\",fields:[\"PaymentMethodId",789259,35,789160,74,"d\",fields:[\"BankAccountId",789259,5054,"}});if(Ext.os.version.gtEq(\"7\")){if(Ext.os.deviceType===\"Tablet\"||!Ext.browser.is.Safari||window.navigator.standalone){Ext.define(\"Ext.iOS7Fix1.Viewport\",{override:\"Ext.viewport.Ios\",constructor:function(){var d={},b={},a=this.determineOrientation(),f=window.screen.height,c=window.screen.width,e=a===this.PORTRAIT?f-window.innerHeight:c-window.innerHeight;d[this.PORTRAIT]=f-e;d[this.LANDSCAPE]=c-e;b[this.PORTRAIT]=c;b[this.LANDSCAPE]=f;this.stretchHeights=d;this.stretchWidths=b;this.callOverridden(arguments);this.on(\"ready\",this.setViewportSizeToAbsolute,this);this.on(\"orientationchange\",this.setViewportSizeToAbsolute,this)",547848,36,"this.stretchHeights[this.orientation]",547796,35,"this.stretchWidths[this.orientation]},setViewportSizeToAbsolute:function(){this.setWidth(this.getWindowWidth());",550460,39,"})}if(Ext.os.deviceType===\"Tablet\"){Ext.define(\"Ext.iOS7Fix2.Viewport\",{override:\"Ext.viewport.Ios\"",553183,33,"Overridden(arguments);window.addEventListener(\"scroll\",function(){if(window.scrollX!==0){window.scrollTo(0,window.scrollY)}},false)},setViewportSizeToAbsolute",554439,32,";",108359,34,"}",794407,706]