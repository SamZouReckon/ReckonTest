["/*84566dd6ccdee8094ecea821738c1888be48ff21",42,556304,"Consts\",{alternateClassName:\"RM.Consts\",singleton:true,",762134,70,"20000,STORE_LOAD_TIME_OUT:12000,VERSION:0.5",762234,568,556324,39,"alternateClassName:\"RM.PermissionsMgr\",",605710,32,556395,289,"pprove",556846,34,"Approve\"",556677,213,"canSelec",556845,35,"Selec",556885,113,"alternateClassName:\"RM.EventMgr\",",556998,2414,559484,321,"d",559806,33,"e",559840,80,"var c=b.getComponent(\"msg\");c.setHidden(e||a);c.setHtml(",563392,34,561456,34,559958,38,"e",559997,80,"e||a)||(e&&a));if(!e",560097,110,"d",560208,226,"d",560435,172,"d",560608,221,"d",560830,4431,"scrollable:\"vertical\",cls:\"rm-dashboard",565300,129,",",610224,36,"hidden:true,itemId:\"noaccesscont\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-noaccess-icon.png\",width:75,height:69,margin:\"25px auto\"},{xtype:\"component\",html:\"You do not have enough access </br>rights to view the dashboard\",cls:\"rm-update-title\",margin:\"-5 0 30 0\"",672296,34,"tap the top left button to </br>gain access to other parts of this book.\",cls:\"rm-update-msg\",margin:\"20 0 20 0",576332,40,"Panel\",{extend:Ext.Panel,xtype:\"secure",593887,180,"View(a)){RM.AppMgr.showErrorMsgBox(\"You are not permitted to view this screen\"",606175,37,565692,3236,576356,532,"Invoices\",{extend:RM.component.SecurePanel,xtype:\"invoices\",config:{permissionFor:\"Invoices\",",588000,58,569060,99,577073,35,"\"Invoices",612367,39,764510,47,"Due date\",value:\"duedate",570005,41,"Customer\",value:\"customer",576332,34,565459,233,",lastUpdatedDateFormat:\"d/m/Y h:iA\",",569734,6622,"view.Contacts\",{extend:RM.component.SecurePanel,xtype:\"contacts\",config:{permissionFor:\"Contacts\",",588000,58,576999,1272,"RM.HomeSettingsMgr.getSetting(\"PrivacyPolicyUrl\")",578495,54,578351,118,"RM.HomeSettingsMgr.getSetting(\"TermsUrl\")",578495,178,"RM.HomeSettingsMgr.getSetting(\"AppInfoUrl\")",578699,1111,"Cashbook",579813,154,579975,110,580460,36,580095,116,580460,36,"expenses\",index:\"ExpenseClaim",580245,95,580460,36,580350,1992,"alternateClassName:\"RM.ViewMgr\",",582342,247,"this.hideKeyPad();",582644,60,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",583478,35,"appBackStack.pop();this.showDashboard(b);",582706,68,"a.onAfter(\"erased\",function(){this",582818,100,"this.hideKeyPad()",582978,32,"var d=this.appBackStack.pop();var e=[d];d.onAfter(\"erased\",function(){e.forEach(function(f){f.destroy()})});while(this.appBackStack.length>0){var ",583079,61,"=b){this.showPanel(a,c);break}e.push(a)}},appPause:function(){document.activeElement.blur();",583295,66,"},onDeviceBack:function(){this.showBackStack(\"onDeviceBack\");",583295,74,"this.formBackHandler){this.formBackHandler.call(this.formB",583344,112,584573,33,"Cashbooks\")){this.confirmExitApp",583440,40,"RM.AppMgr.isLoggedIn()&&this.dashboardShown",583478,35,583564,66,";",584991,39,"Dashboard\"",583629,39,"this.confirmExitApp()}else{this.back()}}}}}}},confirmExitApp",741212,64,583720,64,583805,152,"regFormBackHandler:function(b,a){this.formBackHandler=b;this.formBackHandlerScope=a},deRegFormBackHandler:function(){this.formBackHandler=null;this.formB",583935,509,"dashboardShown=true;",584991,39,584478,692,"this.hideKeyPad();",585225,193,"this.hideKeyPad();",585473,240,"console.log(\"stack length = \"+this.appBackStack.length",585711,144,"this.hideKeyPad();",585910,1035,"hideKeyPad:function(",585168,57,586943,4068,591151,72,",getValue:function(){this.showValidation(true);",477264,49,591238,1134,"alternateClassName:\"RM.Selectors\",",605710,32,592404,1418,"re.HomeSettingsMgr\",{alternateClassName:\"RM.HomeSettingsMgr\",singleton:true,load",647246,34,"s(\"HomeSettings\",null,function(a){this.homeSettings=a},this,function(a){})},getSetting:function(b){for(var a=0;a<this.homeSettings.length;a++){if(this.homeSettings[a].Key.toLowerCase()==b.toLowerCase()){return this.homeSettings[a].Value}}return null}});Ext.define(\"RM.core.CashbookMgr\",{alternateClassName:\"RM.CashbookMgr\",singleton:true,config:{cashbookId:null,currentCashbook:null},getTaxPreferences:function(){return this.getCurrentCashbook().TaxPreference},getSalesPreferences:function(){return this.getCurrentCashbook().SalesPreferences},loadLastCashbook:function(a){if(this.getCashbookId()){this.setCashbook(this.getCashbookId());if(a){a()}}",627810,72,"setCashbookId(a.CashBookId)",627905,45,"c",627951,64,628026,178,"_currentCashbook.Dashboard",628217,65,"c,a,b){RM.AppMgr",628295,50,"c},function(d){this.setCashbookId(c);this.setCurrentCashbook(d[0",637535,33,"GSTCodes\").setData(d",628410,75,"d[0].AccountingCategories);if(d[0].AmountTaxStatuses",637165,32,"TaxStatuses\").setData(d[0].AmountTaxStatuses)}else{",626057,109,"able\"},",626110,33,"INCLUSIVE,Name:\"Include tax\"},",626110,33,"EXCLUSIVE,Name:\"Exclude tax\"}])}",628512,50,"d",628563,48,"this.getCurrentCashbook().Permissions)",628700,48,593802,402,594079,39,"d){var c=d.config.permissionFor;if(c){var b=RM.PermissionsMgr.canDo(c.name,c.action);if(c.invoke){d[c.invoke].apply(d,[b])}else{if(c.invokeWithInverse){d[c.invoke].apply(d,[!b])}else{d.setHidden(!b)}}}}",714300,171,"itemId:\"doneContainer",714902,41,"40,cls:\"rm-keypad-topbar\"},items:[{text:\"CANCEL\",itemId:\"cancel\",},{itemId:\"bar\",},{text:\"DONE\",itemId:\"done\",",652816,120,714554,290,714845,59,"itemId:\"dotContainer",714902,87,",itemId:\"dotBtn\"},{text:\"\",itemId:\"blankBtn\",hidden:true},{text:\"0\",itemId",652944,55,",itemId:\"backspace\"}]}]},initialize:function(){if(!this.config.keypadType){var b=this.getComponent(\"doneContainer\");b.setHidden(true)}if(this.config.keypadType===\"phone\"){var c=this.getComponent(\"dotContainer\");var a=c.getComponent(\"dotBtn\");var d=c.getComponent(\"blankBtn\");d.setHidden(false);a.setHidden(true",554766,32,"KeyTap:function(a,b){this.fireEvent(\"keytap\",(a.getText()?a.getText().toLowerCase():a.getItemId().toLowerCase()));b.stopPropagation(",594746,32,"PhoneField\",{extend:RM.component.ExtTextField,xtype:\"rmphon",594828,32,"this.isInitializing=true;this.readOnlyField=a.readOnly||false;this.callParent(arguments)",699183,60,"focus\",this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(d,c){if(this.keypadOnTop){return}if(this.readOnlyField){return}this.fieldMaskEl=c.target.nextElementSibling;this.showCursor();this.fieldUniqueId=c.target.id;this.owningPanel=d.up(\"panel\");var b=",747748,41,"keypadType:\"phone\",listeners:{keytap:this.onKeyTap,scope:this}};this.keypad=this.owningPanel.add(b);this.revertBackVal=this.getValue();this.clearScrollTimer();var a=this.owningPanel",482802,36,"scrollTimer=window.setTimeout(function(){a.scrollTo(0,d.element.dom.offsetTop,true)},650);this.keypadOnTop=true",618128,32,"removeKeypad,this);this.rootContainer=this.getRootContainer(this.owningPanel);this.rootContainer.element.on({tap:this.handleTapInEntireScreen,scope:this})},removeKeypad:function(){if(this.keypadOnTop){var b=this.getValue();if(b==\".\"){b=\"0.0\"}if(this.config.decimalPlaces&&b!=\"\"){this.setValue(this.getPrefix()+Ext.Number.toFixed(parseFloat(b),this.config.decimalPlaces))}this.owningPanel.remove(this.keypad);this.keypadOnTop=false;",617958,35,"clearCursorBlinkTimer();this.clearScrollTimer();var a=this.owningPanel",482802,36,"scrollTimer=window.setTimeout(function(){a.scrollTo(0,0,false)},300);this.fireValueChangeEvent(b)}},onKeyTap:function(b){if(b===\"bar\"||b===\"blankbtn\"){return}if(b===\"done\"){this.removeKeypad();return}if(b===\"cancel\"){this.setValue(this.revertBackVal);this.removeKeypad();return}var d=this.getValue();var a=d.toString();var c=a.length;if(b===\"backspace\"){if(c>0){a=a.slice(0,-1);this.setValue(a)}}else{this.setValue(a+b)}},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c}return c},handleTapInEntireScreen:function(a){if(this.fieldUniqueId!==a.target.id){this.removeKeypad()}},getRootContainer:function(a){while(a.getParent()){a=a.getParent()}return a},showCursor:function(b){var a=this;this.cursorBlink",631113,36,"if(this.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"",590831,42,",clearScrollTimer:function(){if(this.scrollTimer){window.clearTimeout(this.scrollTimer)}},clearCursorBlinkTimer:function(){if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(c){var b=parseFloat(c)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){this.fireEvent(\"valueChange\",b,a",594202,241,"var a=this.getPhonePicker();if(a){a.setListeners({",601936,100,",scope:this}",594441,307,",getValue:function(){this.showValidation(true);",477264,49,671463,361,",getValue:function(){this.showValidation(true);",477264,49,"RM.view.ContactDetail\",{extend:RM.component.Secure",595704,36,"permissionFor:\"Contacts\",",588000,62,595802,696,"labelWidth:\"10em",596496,231,596856,814,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",597700,151,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",597881,288,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",598199,149,"rmphonefield\",cls:\"rm-flatfield rm-cursor-blinkbg",598378,88,"xt",598465,50,",labelWidth:\"4em",598514,505,"alternateClassName:\"RM.ContactsMgr\",",605710,38,624152,126,599183,1571,"if(!c){return}",600754,998,"1",601753,360,"how();",602100,38,602157,60,"a?this.showValidation(true):this.showValidation(false);",602217,58,"callParent([valueInField])",219166,34,"duration",591148,93,602501,411,"var a=this;",602912,240,"b){if(!this.config.rmmandatory){this.addClearButton(b);this.clearButton.setHidden(!a.getValue())}",601953,83,",scope:this}}",591147,76,",getValue:function(){this.showValidation(true);",477264,34,",addClearButton:function(a){if(this.clearButtonAdded){return}var b=a.getToolbar();var c=",655620,33,"e,f){var d=e.up(\"datepicker\");d.fireEvent(\"change\",d,null);d.hide()},text:\"Clear\"};this.clearButton=b.add(c);this.clearButtonAdded=true",594747,930,603276,2434,"alternateClassName:\"RM.TimeSheetsMgr\",",605710,538,"RMAmountField\",{extend:RM.component.ExtTextField,xtype:\"rmamount",601548,33,"is.isInitializing=true;this.readOnlyField=a.readOnly||false;a.trailingZerosUpTo=a.trailingZerosUpTo==0||a.trailingZerosUpTo?a.trailingZerosUpTo:2;a.prefix=a.prefix||\"\";this.callParent(arguments)",699183,60,"focus\",this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(d,c){if(this.keypadOnTop){return}if(this.readOnlyField){return}this.fieldMaskEl=c.target.nextElementSibling;this.showCursor();this.fieldUniqueId=c.target.id;this.owningPanel=d.up(\"panel\");var b=",747748,41,"keypadType:\"amount\",listeners:{keytap:this.onKeyTap,scope:this}};this.keypad=this.owningPanel.add(b);this.revertBackVal=this.getValue();this.clearScrollTimer();var a=this.owningPanel",482802,36,"scrollTimer=window.setTimeout(function(){a.scrollTo(0,d.element.dom.offsetTop,true)},600);this.keypadOnTop=true",618128,32,"removeKeypad,this);this.rootContainer=this.getRootContainer(this.owningPanel);this.rootContainer.element.on({tap:this.handleTapInEntireScreen,scope:this})},removeKeypad:function(){if(this.keypadOnTop){var b=this.getValue();if(b==\".\"){b=\"0.0\"}this.owningPanel.remove(this.keypad);this.keypadOnTop=false;if(this.config.decimalPlaces&&b!=\"\"){this.setValue(this.config.prefix+this.formatVal(b))}",617958,35,"clearCursorBlinkTimer();this.clearScrollTimer();var a=this.owningPanel",482802,36,"scrollTimer=window.setTimeout(function(){a.scrollTo(0,0,true)},300);this.fireValueChangeEvent(b)}},onKeyTap:function(b){if(b===\"bar\"){return}if(b===\"done\"){this.removeKeypad();return}if(b===\"cancel\"){this.setValue(this.revertBackVal);this.removeKeypad();return}var e=this.getValue();var a=this.config.prefix+e.toString();var d=a.length;var c=a.indexOf(\".\");if(b===\"backspace\"){if(d>0){a=a.slice(0,-1);this.setValue(a)}}else{if(this.config.decimalPlaces){if((b!=\".\"&&d-1<c+this.config.decimalPlaces)||c<0){if(a==this.config.prefix+\"0\"&&b!=\".\"){a=this.config.prefix}this.setValue(a+b)}}else{if(c!=-1&&b==\".\"){return}if(a==this.config.prefix+\"0\"){a=this.config.prefix}this.setValue(a+b)}}},get",602740,39,");var a=b.toString();if(this.config.prefix){a=a.replace(/,/g,\"\")}if(this.config.prefix&&a.indexOf(this.config.prefix)!=-1){a=a.slice(this.config.prefix.length)}return a},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c;if(this.config.decimalPlaces&&c!==\"\"){c=this.formatVal(c)}}if(c.indexOf(this.config.prefix)==-1&&c!==\"\"){c=this.config.prefix+this.formatVal(c)}if(!this.keypadOnTop){this.fireValueChangeEvent(b)}return c},handleTapInEntireScreen:function(a){if(this.fieldUniqueId!==a.target.id){this.removeKeypad()}},getRootContainer:function(a){while(a.getParent()){a=a.getParent()}return a},showCursor:function(){var a=this;this.cursorBlink",631113,36,"if(this.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"",590831,42,",clearScrollTimer:function(){if(this.scrollTimer){window.clearTimeout(this.scrollTimer)}},clearCursorBlinkTimer:function(){if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(d){var c=d.toString();c=c.replace(/,/g,\"\");if(c.indexOf(this.config.prefix)!=-1){d=c.slice(this.config.prefix.length)}var b=parseFloat(d)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){this.valBeforeChange=b;this.fireEvent(\"valueChange\",b,a)}},formatVal:function(e){var c=parseFloat(e).toString();var f=c.indexOf(\".\");if(f!==-1){var b=c.length-f-1;var d=this.config.trailingZerosUpTo-b;if(d>0){for(i=0;i<d;i++){c=c+\"0\"}}}else{if(this.config.trailingZerosUpTo>0){c=c+\".\";for(i=0;i<this.config.trailingZerosUpTo;i++){c=c+\"0\"}}}if(this.config.prefix){if(c.indexOf(\".\")!=-1){var a=c.split(\".\");a[0]=a[0]",636729,37,";c=a[0]+\".\"+a[1];return c}else{return c",636729,37,"}}else{return c}",606672,1195,"rmamount",607876,70," rm-cursor-blinkbg",672541,37,",decimalPlaces:2,prefix:\"$",691008,47,604313,43,691136,56,607529,43,"Supplier",604016,33,608299,626,"alternateClassName:\"RM.ExpensesMgr\",",605710,32,608957,752,"TaxStatus:function(a){this.taxStatus",609749,53,"nvoiceDate:function(a){this.invoiceDate",609794,175,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",609985,520,"(b.LineText||b.Description||b.ItemName)",599660,51,610569,566,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",611151,811,"RM.component.Secure",611966,36,"permissionFor:\"Invoices\",",588000,125,612127,279,596111,32,"Invoices",612415,2233,",listeners:[{element:\"element\",event:\"tap\",fn:function(){this.toggleOptions()},scope:this}]",614648,1291,"secure",615939,138,",permissionFor:\"Invoices",616076,1398,576992,32,617789,61,"},{text:\"Time\",itemId:\"time\",permissionFor:\"Timesheets_BillEntry\"",617880,37,"permissionFor:\"ExpenseClaims_BillEntry\"}],",618058,53,"a,d){var b",617583,121,"e){this.hide();a.call(d,e.getItemId())},scope:this}});var c=0;this.items.forEach(function(e){if(!e.permissionFor||RM.PermissionsMgr.getPermission(e.permissionFor)){b.add(e);if(e.itemId){c+=1}}});if(c>1){this.popup=b;b.show()",618128,42,"}else{a.call(d,this.items[1].itemId)}",603190,47,617987,434,618526,39,"var e=this.getItemId();if(e==5||e==10||e==20){e=e+\"%\"}a.call(b,e",618482,45,618644,907,"ext",619551,62,"extselectfield\",label:\"Item type\",itemId:\"itemT",619639,165,"itemId:\"itemName\",labelWidth:\"7em",619802,92,620009,206,"rmamount",620221,38,"cls:\"rm-flatfield rm-cursor-blinkbg",672541,37,",decimalPlaces:2,prefix:\"$\",border:\"0",691529,34,"Account\",itemId:\"account\"",737675,40,620394,185,691540,33,592022,99,"autoSelect:fals",620525,44,620784,1891,"alternateClassName:\"RM.InvoicesMgr\",",605710,34,622709,136," RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled?\"APPROVED\":\"UN",622917,37,622887,100,"getInitialInvoiceStatus:function(){if(RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled){return RM.Consts.InvoiceStatus.DRAFT}else{return ",623293,32,"}",622985,235,"this.getInitialInvoiceStatus()",623249,189,"b,e",583983,59,"ustomerInvoicesC\");a.showView(c,d,b",623527,2121,"isUserLoggedIn=false;Ext.Ajax.setDefaultHeaders({\"X-APIV\":RM.Consts.Api.VERSION})",625689,251,626336,36,".init(a)",626438,36,".init(a)",626556,40,".init(a)",626674,50,"RM.HomeSettingsMgr.load",626734,765,"RM.CashbookMgr.getCashbookId()){RM.CashbookMgr.loadLastCashbook(function(){RM.ViewMgr.back()})}else{RM.CashbookMgr",627612,169,"RM.CashbookMgr.selectCashBook()}},this",628746,177,"RM.CashbookMgr",628927,49,"RM.ViewMgr.clearBackStack();this.logoutFromServer();this.login",628997,166,";this.login",629161,32,"if(this.isUserLoggedIn){",629579,37,629230,84,"isUserLoggedIn=false}",629321,231,"){apiUrl=this.getApiUrl(c)+\"/\"+e;this.getServerRec(apiUrl,{},a,b,d)},getServerRecs:function(b,f,a,c,d){var e=this;if(b.substr(0,4)!==\"http\"){b=e.getApiUrl(b)}Ext.Ajax.request({url:b",630098,74,"e",630176,107,"c,h.recs",630294,32,"c",630327,141,";if(d){d.call(c||this,g)}},scope:this});e.setLoadingTimer()},getServerRec:function(b,e,a,c,d){return this.getServerRecs(b,e,function(f){if(a){a.call(c,f[0])}},c,d",630481,821,"d){var e=this;e.setLoadingTimer();var c=function(g,f,h){e",630176,50,"if(a){a.call(d,g,f,h)}}",631327,33,"g,f,h){if(h){c(g,f,h)}},scope:e",631599,200,"b){if(navigator.connection&&navigator.connection.type===\"none\"){this.showOkMsgBox(\"It looks like your device has no internet connection, please connect and try again.\");return}if(b",631806,35,"b.statusText===\"communication failure\"){this.showOkMsgBox(\"The connection failed, please try again or contact support.\")}else{if(b.status==412){var a=Ext.decode(b.statusText);this.showAppStop(a.ErrCode,a.ErrDesc)}else{if(b.status!=0){this.showErrorMsgBox(\"There was an error, please try again or contact support: <br/><br/> (\"+b.status+\" \"+b.statusText+\")\")}}",631906,113,"&&this.appTypeId!==RM.Consts.App.WEB_CONTAINER){b=\"staging\"}this.apiLocation=b;if(b==\"staging",632076,33,".reckoncloud",632199,104,"qa",632070,33,"r1mobileqa",632192,35,632374,84,"this.baseApiUrl=\"/api\"",632764,1683,"AppStop",586048,71,"AppStopC\");c.showView(a,b",634440,4077,"Staging\",value:\"staging",638547,48,"QA Server\",value:\"qaserver",638621,53,638704,1062,"});Ext.define(\"RM.view.AppStop\",{extend:Ext.Panel,xtype:\"appstop\",config:{",577815,32,672079,50,641808,33,"topbar-icon",577791,41,"layout:\"vbox\",align:\"center\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-update-icon.png\",height:40,width:40,margin:\"25px auto\"},{xtype:\"component\",html:\"A new update has been released!\",cls:\"rm-update-title\",margin:\"-14 0 5 0\"},{xtype:\"component\",html:\"Click below to update for security & stability.\",cls:\"rm-update-msg\",margin:\"0 0 25 0\"},{xtype:\"button\",itemId:\"update\",text:\"Update app >\",cls:\"rm-photopreviewbtn",620783,95,"ntroller.AppStop",716064,44,"appStop:\"appstop\"},control:{\"appstop #update\":{tap:\"onUpdate\"}}},showView:function(a,b){this.errMsg=b;RM.ViewMgr.showPanel2({xtype:\"appstop\"})},onUpdate",437371,34,"window.open(RM.HomeSettingsMgr.getSetting(\"AndroidUpgradeUrl\"),\"_system\")}if(Ext.os.is.iOS){window.open(RM.HomeSettingsMgr.getSetting(\"iOSUpgradeUrl\"))}",642892,36,742671,45,639883,6254,",hide:\"onHide",646136,573,"RM.ViewMgr.regFormBackHandler(this.back,this);",646709,178,"if(",684875,36,646936,298,661313,34,"FormBackHandler()",647232,558,"!a.Description",647807,138,"a.Email!==\"\"&&",740366,170,"save",644624,33,648027,138,"a.IsActive=true",648164,1247,"ranchName",740172,32,649410,372,"console.log(this.getBranchName().getValue());",647736,36,"this.getBranchName().getValue()",649400,35,"Sur",649740,41,649859,6307,"console.log(\"EnterPin onShow\");",656166,349,";RM.AppMgr.logoutFromServer",656513,2501,";RM.AppMgr.logoutFromServer(",659013,542,"RM.HomeSettingsMgr.getSetting(\"SignupUrl\")",659598,3159,662785,8103,",noaccessCont:\"dashboard #noaccess",670883,295,"var a=",558351,40,";var e",559840,43,"c",559884,36,559835,33,"AccountEnquiryReport\");var b=",563155,36,";if(this.getNoaccessCont()){this.getNoaccessCont().setHidden(a||e||c||d||b)}if(this.getDashboardCont()){if(a",671204,55,"}if(e||c){",671260,48,"}if(d){",671309,65,"}if(b){",671375,72,"this.getNetPosition().setHidden(!a);this.getAlerts().setHidden(!(e||c));this.getTopExpenses().setHidden(!d);this.getBudgetOverview().setHidden(!b)}",671823,851,604832,40,672723,1370,"&&a==\"\"",740399,40,674045,34,674263,36,"FormMsg();return c}if(b==\"\"",740399,40,674133,66,";RM.AppMgr.showInvalidFormMsg();return c",674199,825,"view.CustomerInvoices\",{extend:RM.component.Secure",568963,39,"permissionFor:\"Invoices\",layout:\"fit\",items:[{xtype:\"titlebar\",docked:\"top\",title:\"A Title\",itemId:\"title",690494,104,",align:\"left\"},{text:\"ADD\",itemId:\"add\",align:\"right\",",577073,35,"\"Invoices",612367,39,764510,47,"Due date\",value:\"duedate",570005,33,576334,32,"InvoicesList",611952,34,"slist\",config:{layout:\"fit\",control:{list:{itemtap:\"onItem",652111,36,"ustomerId=this.config.customerId;",677150,74,"var b=(this.config.sortVal==\"duedate\"",677222,89,"b",677315,135,";",633536,36,"Invoic",739884,53,"s\"));if(b",668704,34,"}RM.AppMgr.loadStore(a",681103,213,"reload:function(){this.loadList()},setS",679805,53,"clearSearch",679869,47,",loadList",739822,55,"s\"",680808,124,735357,167,681316,203,677505,2022,675035,60,"C",675096,43,"Title:\"customer",679643,32,675183,42,"\"customerinvoices #back\":{tap:\"back\"},",675225,88,"\"onSearch\",searchclear:\"onSearchClear",675557,146,"c,d,b,e){this.invoicesTitle=c;this.customerId=d;this.customerName=b;",675705,92,676108,35,"e",683782,36,"sTitle().setTitle('<span style=\"text-shadow:none; font-weight:normal;\">'+this.invoicesTitle+\"</span>\"",743439,37,"nvoice\"){this.activeList.reload()}",706044,35,"CustomerInvoices();a.removeAt(2);this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false})},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",681516,179,700336,34,"});Ext.define(\"RM.component.CustInvSummaryLis",715200,32,"invsummarylist\",config:{layout:\"fit\",control:{list:{select:\"onItemSelect\"}}",699183,56,"add(",569338,395,");",633536,36,"CustomerInvoic",739884,46,"CustomerInvoices\"));RM.AppMgr.loadStore(a)",644335,74,676229,99,"reload:function(){this.loadList()},setS",679805,53,"clearSearch",679869,47,",loadList",739822,55,"s\"",719668,32,680899,33,"RM.AppMgr.loadStore(a);",676440,216,679516,63,"Invoices:\"invoices",679658,51,679739,72,"\"onSearch\",searchclear:\"onSearchClear\"},\"invoice",742975,34,679958,133,"){",680159,51,709552,45,"if(!this.dataLoaded){this.onSort(\"duedate\");",684809,64,"){this.activeList.reload()}",706044,35,"Invoices();a.removeAt(2);if(b==\"customer\"){this.activeList=a.add({xtype:\"custinvsummarylist\"})}else{this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false})}},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",676325,94,"});Ext.define(\"RM.util.FormUtils\",{singleton:true,makeAllFieldsReadOnly:function(a){a",594083,122,681967,761,",hide:\"onHide",682727,228,"change",682967,309,",dateFld:{change:\"onInvoiceDateChange",679980,111,"c,e,a,d){this.lineItemsDirty=false;",646390,80,683473,75,"InvoicesMgr.getInitialInvoiceStatus()",684395,46,",",684327,32,"Amount:0,DiscountTotal:0,Tax:0,Subtotal:0,Paid:0,BalanceDue:0",683620,76,"&&RM.PermissionsMgr.canAddEdit(\"Invoices\"",683695,108,"RM.ViewMgr.regFormBackHandler(this.back,this);",683803,134,684053,273,"this.detailsData;if(b.CustomerId){",684579,78,"applyTaxRules(",684650,158,";this.getLineItems().setInvoiceDate(this.getDateFld().getValue());this.getLineItems().setTaxStatus(b.AmountTaxStatus",683930,66,"b.Status));this.dataLoaded=true}}",661311,36,"FormBackHandler",743438,38,684866,103,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getInvoiceForm())}",685112,38,"applyTaxRules:function(){var b=this.getAmountsFld();var a=RM.CashbookMgr.getTaxPreferences();b.setReadOnly(!this.isEditable||!a.AllowTaxEdit);if(this.isCreate){if(a.IsTaxTracking){b.setHidden(false);b.setValue(a.SalesFigures)}else{b.setHidden(true);b.setValue(RM.Consts.TaxStatus.NON_TAXED)}}else{var c=a.IsTaxTracking||b.getValue()!==RM.Consts.TaxStatus.NON_TAXED;b.setHidden(!c)",647231,55,685202,49,683932,64,"c.Status));",685251,358,"c.Notes=c.Notes?c",725741,51,"c);this.applyTaxRules(",685622,108,"CustomerId(c.CustomerId);b.setTaxStatus(c.AmountTaxStatus);b.setInvoiceDate(c.Date",685874,63,684081,42,"false);if(this.detailsData.Paid>0){this.isEditable=false;this.setEditable(false)}this.dataLoaded=true},this,function(){this.goBack(",685963,878,"c,b,a){if(!this.dataLoaded){return}this.detailsData.AmountTaxStatus=b;this.previousAmountTaxStatus=a;this.calculateBreakdown();this.getLineItems().setTaxStatus(b)},onInvoiceDateChanged:function(b,c,a){if(!this.dataLoaded){return}this.calculateBreakdown();this.getLineItems().setInvoiceDate(c",686910,476,"d",689646,35,"var c",687423,39,"b={CustomerId:d.CustomerId,InvoiceDate:d.Date,AmountTaxStatus:d",687501,87,"d",695171,41,"entage=d",687638,34,"d",695261,44,"d.Discount.replace(\"$\",\"\")}}b.LineItems=c.map(function(e){return{InvoiceLineItemId:e.InvoiceLineItemId,ItemType:e.ItemType,ItemID:e.ItemId,Proje",745682,37,"UnitPriceExTax:e.UnitPriceExTax,DiscountAmount:e.DiscountAmount,DiscountPercentage:e.DiscountPercentage,TaxGroupID:e.TaxGroupId,Tax:e.Tax,TaxIsModified:e.TaxIsModified}});",740686,32,"Calc\",true,b,function a(e){var l=e[0];var h=this.detailsData;h.Amount=l.TotalIncludingTax;h.AmountExTax=l.TotalExcludingTax;h.Tax=l.Tax||0;h.Subtotal=l.Subtotal;h.DiscountTotal=l.Discount||0;h.Paid=l.AmountPaid;h.BalanceDue=l.BalanceDue;var g=this.getLineItems();g.removeAllItems();for(var f=0;f<c.length;f++){var k=c[f];var j=null;Ext.Array.some(l.Items,function(m){if(m.InvoiceLineItemId===k.InvoiceLineItemId){j=m;return true}});if(!j){c[f]=null}else{Ext.apply(k,j)}}c=Ext.Array.clean(c);g.setTaxStatus(b.AmountTaxStatus);g.addLineItems(c",688627,42,"e){alert(e",688679,966,"c",689646,35,"c.LineItems",687423,39,"a=1;c.LineItems.forEach(function(d){d.lineNo=a;if(d.IsNew){delete d.InvoiceLineItemId}a+=1}",728816,40,"delete b.DiscountPerc;delete b.DiscountAmount;if(b",695171,42,"b",687638,34,"b",695261,44,"b",689938,34,"b.Discount;b",689984,42,"b)){if(c",690034,64,"b);",740686,32,"s\",this.isCreate,b",690151,111,"d,e){alert(e)}",660246,34,690310,64,606238,220,"this.on(\"keyup\",this.valChange);this.on(\"blur\",this.numberPrecision",591147,76,594608,140,",valChange:function(a,f,c){var g=this.getValue();console.log(f.browserEvent.keyCode);if(!(47<f.browserEvent.keyCode<58||f.browserEvent.keyCode==190)){f.stopEvent()}if(g===null||g===undefined){console.log(g);return}var b=g.toString();var d=b.length;if(this.config.decimalPlaces&&b.indexOf(\".\")!=-1){if(d-1>(b.indexOf(\".\")+this.config.decimalPlaces)){this.setValue(b.substring(0,d-1))}}console.log(this.getValue()",636571,49,"&&Ext.isNumber(this.config.decimalPlaces)){this.setValue(a.toFixed(this.config.decimalPlaces))}},getValue:function(){this.showValidation(true);",477264,49,690371,384,596111,32,"Invoices",690764,40,596269,51,591721,43,607359,32,"ItemPath",690878,98," (optional)\",permissionFor:{action:\"Select\",name:\"Projects\"},",604303,53,691136,99,"itemId:\"descriptionField",691233,41,"[\"rm-flatfield\",\"rm-flatfield-last\"],placeHolder:\"enter\"},{xtype:\"container\",itemId:\"detailsFields\",defaults:{clearIcon:false},hidden:true,items:[{xtype:\"rmamountfield\",name:\"UnitPrice",691354,70," rm-cursor-blinkbg\",placeHolder:\"enter\",decimalPlaces:2,prefix:\"$\"},{xtype:\"rmamount",591883,65," rm-cursor-blinkbg\",decimalPlaces:4,trailingZerosUpTo:0,prefix:\"",621611,58,"placeHolder:\"none\",value:0,cls:[\"rm-flatfield\"]},{xtype:\"rmamountfield\",name:\"Amount\",itemId:\"Amount\",label:\"Amount\",value:0",715839,34,"decimalPlaces:2,prefix:\"$",691529,111,"itemId",691626,116,"rmamountfield\",name:\"Tax\",itemId:\"Tax\",label:\"Tax\",labelWidth:\"7em\",cls:[\"rm-flatfield\",\"rm-cursor-blinkbg\",\"rm-flatfield-last\"],decimalPlaces:2,prefix:\"$\",clearIcon:true}]}]}]},showDetailsFields:function(){this.down(\"#descriptionField\").removeCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(false)},hideDetailsFields:function(){this.down(\"#descriptionField\").addCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(true)},hideTaxFields:function(){this.down(\"#TaxGroupId\").setHidden(true);this.down(\"#Tax\").setHidden(true);this.down(\"#Amount\").addCls([\"rm-flatfield-last\"])},setTaxModified:function(a){var b=this.down(\"#Tax\");if(a){b.addCls([\"rm-field-warning\"]);b.setLabel(\"Tax (modified)\");b.removeCls(\"clear-icon-hidden\")}else{b.removeCls([\"rm-field-warning\"]);b.setLabel(\"Tax\");b.addCls(\"clear-icon-hidden\")}}});Ext.define(\"RM.util.PseudoGuid\",{singleton:true,currentIndex:1,guidMask:",719066,38,",next:function(){var b=this.currentIndex.toString();var a=new RegExp(\"0{\"+b.length+\"}$\");var c=this.guidMask.replace(a,b);this.currentIndex+=1;if(this.currentIndex>999999999999){this.currentIndex=1}return c",691888,214,692109,34,":\"invoicelineitem field[name=UnitPrice]\",quantity:\"invoicelineitem field[name=Quantity]\",discount:\"invoicelineitem field[name=Discount]\",taxCode:\"invoicelineitem field[name=TaxGroupId]\",tax:\"invoicelineitem field[name=Tax]\",amount:\"invoicelineitem field[name=Amount",692312,32,692351,49,692406,196,",unitPrice:{valueChange:\"unitPriceChanged\"},tax:{valueChange:\"taxAmountChanged\"},quantity:{valueChange:\"quantityChanged\"},discount:{change:\"discountChanged\"}}},isTaxInclusive:function(){return this.taxStatusCode===RM.Consts.TaxStatus.INCLUSIVE},showView:function(e,f,d,g,a,c){this.ignoreEvents=false",692662,42,"taxStatusCode=d.taxStatus;this.invoiceDate=d.invoiceDate",646429,34,"c;if(g){",692937,42,"IsNew:true,InvoiceLineItemId:RM.util.PseudoGuid.next(),Quantity:1,TaxIsModified:false",692989,260,693562,35,"setDiscountValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);if(!this.isTaxInclusive()){this.getUnitPrice().setValue(this.detailsData.UnitPriceExTax)}if(this.taxStatusCode===RM.Consts.TaxStatus.NON_TAXED){this.getItemDetail().hideTaxFields()}this.setTaxModified(this.detailsData.TaxIsModified);if(this.detailsData.ItemId){this.getItemDetail().showDetailsFields()}",693639,45,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getItemForm())}},setTaxModified:function(a){this.detailsData.TaxIsModified=a;this.getItemDetail().setTaxModified(a)},getDiscountValue:function(){var b=this.getDiscount().getValue();var a={};if(b",689824,32,"entage=parseFloat(b.replace(\"%\",\"\"))}else{if(b",689902,35,"parseFloat(b.replace(\"$\",\"\"))}}return a},setDiscountValue:function(b,a){if(b){this.detailsData.Discount=b+\"%\"}else{if(a){this.detailsData.Discount=\"$\"+Ext.Number.toFixed(a,2)}else{this.detailsData.Discount=\"\"}}this.getDiscount().setValue(this.detailsData.Discount",693830,133,"||0,function(c){b.setValue(c==0?\"",694009,304,"this.itemChanged(c[0])},this)}}}",745424,38,689471,42,694604,129,"!a.UnitPriceExTax){this.getUnitPrice",740414,32,723881,48,694881,67,"Ext.apply(this.detailsData,c);b.ItemType=a;b.Quantity=b.Quantity||1;var d=this.getDiscountValue();b.DiscountPercentage=d.DiscountPercentage;b.DiscountAmount=d.DiscountAmount;",695345,85,",itemChanged:function(a){this.detailsData.ItemName=a.Name;this.detailsData.UnitPriceExTax=a.UnitPriceExTax;this.setTaxModified(false);this.ignoreEvents=tru",694355,39,"a.ItemId,ItemName:a.ItemPath,TaxGroupId:a.SaleTaxCodeID,Description:a.SalesDescription,UnitPrice:this.isTaxInclusive()?\"\":a.UnitPriceExTax});this.ignoreEvents=false;var b=this;this.getServerCalculatedValues(\"Item\",function(){b.getItemDetail().showDetailsFields()})},unitPriceChanged:function(b,a){if(!this.initShow||this.ignoreEvents){return}if(!this.isTaxInclusive()){this.detailsData.UnitPriceExTax=b}this.getServerCalculatedValues(\"UnitPrice\")},discountChanged:function(c,b,a){if(!this.initShow||this.ignoreEvents){return}this.detailsData.Discount=b;this.getServerCalculatedValues(\"Discount\")},taxAmountChanged:function(b,a){if(!this.initShow||this.ignoreEvents){return}if(!b){this.detailsData.TaxIsModified=false}else{this.detailsData.TaxIsModified=true}this.getServerCalculatedValues(\"Tax\")},projectChanged:function(){},quantityChanged:function(){if(!this.initShow||this.ignoreEvents){return}this.getServerCalculatedValues(\"Quantity\")},getServerCalculatedValues:function(g,b){var d={AmountTaxStatus:this.taxStatusCode,PreviousAmountTaxStatus:this.taxStatusCode,CustomerId:this.customerId,InvoiceDate:this.invoiceDate,LineItems:[]}",694904,42,"e={ChangeStatus:2,ItemId:c.ItemId,Quantity:c.Quantity||1,TaxGroupID:c.TaxGroupId,TaxIsModified:this.detailsData.TaxIsModified,Tax:this.detailsData.TaxIsModified?c.Tax:null,UnitPriceExTax:this.detailsData.UnitPriceExTax};var f=this.getDiscountValue();if(f.DiscountPercentage){e.DiscountPercentage=f.DiscountPercentage}else{e.DiscountAmountExTax=this.detailsData.DiscountAmountExTax}switch(g){case\"UnitPrice\":e.UnitPrice=this.getUnitPrice().getValue();e.UnitPriceIsModified=true;break;case\"Quantity\":e.QuantityIsModified=true;break;case\"Discount\":if(!e.DiscountPercentage){e.DiscountAmount=f.DiscountAmount}e.DiscountIsModified=true;break}d.LineItems.push(e);",740686,32,"Calc\",true,d,function a(j){var h=j[0].Items[0];this.ignoreEvents=true;this.detailsData.AmountExTax=h.AmountExTax;this.detailsData.DiscountedTaxAmount=h.DiscountedTaxAmount;this.detailsData.DiscountedTaxExclAmount=h.DiscountedTaxExclAmount;if(g===\"UnitPrice\"){this.detailsData.UnitPriceExTax=h.UnitPriceExTax}this.setTaxModified(h.TaxIsModified);this.getItemForm().setValues({UnitPrice:this.isTaxInclusive()?h.UnitPrice:this.detailsData.UnitPriceExTax,Amount:h.Amount,Tax:h.Tax});this.setDiscountValue(e.DiscountPercentage,h.DiscountAmount);this.detailsData.DiscountAmountExTax=h.DiscountAmountExTax;this.ignoreEvents=false;if(b){b()}},this,function(h){alert(h)},\"Working...\")",691888,37,695466,1444,"RM.component.Secure",696914,40,"permissionFor:\"Invoices\",",588000,179,697133,4017,"display:inline",706411,70,701230,5171,"display:inline",706411,3209,709647,146,"Subtotal",710047,51,709849,147,"'+(a.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED?\"\":'",709869,48,"Total (excluding tax)",710047,119,710044,54,"3}</span></div></tr>')+'",709869,48,"Total",710047,51,"4",709850,67,710293,63,"5",709850,56,710413,73,"6",710487,49,"Subtotal",710542,57,"AmountExTax",710577,47,"Amount",710632,1946,"var a=!(",712612,59,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",712575,36,"a);var b=!(",712795,58,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",712759,35,"b",712671,90,712854,1364,"RM.AppMgr.loadStore(this.getHistory",667956,72,715182,383,715575,41,"component\",height:1},{xtype:\"rmamoun",715622,52,"decimalPlaces:4,prefix:\"",607461,35," rm-cursor-blinkbg\",placeHolder:\"enter\"},{xtype:\"rmamoun",715762,58,"decimalPlaces:2,prefix:\"$",607461,35," rm-cursor-blinkbg",715871,93,"]",675005,36,716056,275,716406,149,"console.log(\"CustomDiscount showView\")",716554,687,"validateForm:function(){console.log(\"validateForm\");",717550,3140,",hide:\"onHide",720689,499,"RM.ViewMgr.regFormBackHandler(this.back,this);",721188,713,661313,34,"FormBackHandler(",686142,33,646605,35,721966,2605,"text",724577,170,",hide:\"onHide",724746,538,"RM.ViewMgr.regFormBackHandler(this.back,this);",725284,403,721611,146,725848,237,661313,34,"FormBackHandler(",686142,33,646605,35,"Expens",686237,45,726201,5174,"if(!e.success){alert(e.responseText)}else{this.goBack()}},failure:function(e){alert(e.responseText)",731410,5868,"secure",737278,575,",permissionFor:{name:\"SalesPreferences\",action:\"View\"}",737853,228,",listeners:{focus:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)},keyup:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)}}}]",738359,103,738186,2063,"&&a.Subject==\"\"",740399,40,740315,47,";RM.AppMgr.showInvalidFormMsg();return b}",740235,127,";RM.AppMgr.showInvalidFormMsg();return b",740362,452,",\"Sending...\"",740814,1721,"var a=this.getNoteText().getValue();if(a",742533,32,"a)}else{RM.AppMgr.showOkMsgBox(\"Please enter some text for the note\"",718000,67,742660,3551,"itemTypeFld:\"createitem #itemType\",itemNameFld:\"createitem #itemName",746209,509,"RM.Consts.ItemStatus.ACTIVE",723517,50,746815,105,694560,48,"Type){this.getItemTypeFld",740414,32,"}if(!a.Name",694610,60,"SaleCategoryID){this.getAcctCatFld",740414,32,723881,48,705584,35,746955,15168,762803,65,"AppStop",762864,1357,55391,32,".prototype.isNotPreventable=/^(select|a|input|textarea)$/i",764221,682]