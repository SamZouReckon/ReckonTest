["/*edcc1f49a88effc3796ce23abd8b4cc9a604cfd8",42,439506,440149,116197,"Consts\",{alternateClassName:\"RM.Consts\",singleton:true,",624534,70,"20000,STORE_LOAD_TIME_OUT:20000,VERSION:0.1",624634,536,",NoAccessMsg:\"No access rights\"});Ext.define(\"RM.component.RMAmountField2",494496,32,"rmamountfield2\",config:{clearIcon:false,",494586,37,",listeners:{focus:\"onFieldFocus\",blur:\"onFieldBlur\"},cls:\"rm-flatfield\",prefix:\"\",decimalPlaces:2,trailingZerosUpTo:2",651726,56,"editing=false;this.oldValue=null;var b=this.getPrefix();var a=b?(this.getLabel()+\"&nbsp;&nbsp;\"+b):this.getLabel();if(this.config.rmmandatory){a=a",671082,38,"}this.setLabel(a)},getValue:function(){this.showValidation(true);",477264,34,",setValue:function(b){var b=parseFloat(b).toFixed(this.getDecimalPlaces());var a=this.callParent([b]);if(this.editing&&this.oldValue!=b",487002,32,",this.oldValue);this.fireEvent(\"valueChange\",b,this.oldValue)}this.oldValue=this.getValue();return a},onFieldFocus:function(){this.editing=true},onFieldBlur:function(){var a=this.getValue();if(a==\"\"){this.element.down(\"input\").dom.value=\"\"}else{this.setValue(a)}this.editing=false},onChange:function(b,c,a){return",590090,93,"component.RMAmountField3",605222,34,"rmamountfield3\",config:{",606928,32,"\"onBlur\"},cls:\"rm-flatfield\",prefix:\"\",trailingZerosUpTo:2,placeHolder:\"\"}",670975,147,"this.inputEl=this.element.down(\"input\");this.displayEl=this.inputEl.insertHtml(\"afterEnd\",'<div class=\"x-input-el x-form-field\"></div>',true);this.displayEl.on(\"tap\",this.showInputFld,this);this.showDisplayValue()},getValue:function(){this.showValidation(true);",477264,34,",setValue",239406,45,"this.showDisplayValue();return a},onBlur:function(){var a=this.getValue();if(Ext.isEmpty(a,true)){RM.AppMgr.showErrorMsgBox(\"Invalid number\",function(){this.setValue(this.editVal);this.showDisplayValue()},this)}else{this.showDisplayValue()}},showDisplayValue:function(){this.inputEl.hide();var b=this.getValue();if(b){var a=this.getPrefix()+RM.AppMgr.numberWithCommas(b.toFixed(2));this.displayEl.setHtml(a)}this.displayEl.show()},showInputFld:function(){if(!this.getReadOnly()){this.displayEl.hide();this.inputEl.show();this.editVal=this.getValue();this.focus()}},onChange:function(b,c,a){if(c!=this.editVal",294463,33,590090,93,"component.RMPhoneField2",494496,32,"rmphonefield2\",config:{clearIcon:false,",494586,37,",listeners:{blur:\"onFieldBlur\"},cls:\"rm-flatfield\"}",670975,149,"getValue:function(){this.showValidation(true);",477264,34,",setValue",239406,45,"return a},onFieldBlur:function(){var a=this.getValue();if(a==\"\"){this.element.down(\"input\").dom.value=\"\"}",294438,59,590092,91,"component.RMPhoneField3",494496,32,"rmphonefield3\",config:{",606928,32,"\"onBlur\"},",494586,37,714720,33,"\"}",670975,147,"this.inputEl=this.element.down(\"input\");this.displayEl=this.inputEl.insertHtml(\"afterEnd\",'<div class=\"x-input-el x-form-field\"></div>',true);this.displayEl.on(\"tap\",this.showInputFld,this);this.showDisplayValue()},getValue:function(){this.showValidation(true);var a=this.callParent();return a},setValue",239406,45,"this.showDisplayValue();return a},showDisplayValue:function(){this.inputEl.hide();var a=this.getValue();this.displayEl.setHtml(a);this.displayEl.show()},showInputFld:function(){if(!this.getReadOnly()){this.displayEl.hide();this.inputEl.show();this.editVal=this.getValue();this.focus()}},isValidPhoneNr:function(b){var a=parseFloat(b,10);return(isNaN(a))?false:true},onBlur:function(){var a=this.getValue();if(this.isValidPhoneNr(a)){this.showDisplayValue(",659855,34,"Invalid phone number\",function(){this.setValue(\"\");this.showDisplayValue()},this",671120,77,"});Ext.define(\"RM.view.TestScreen\",{extend:Ext.Panel,xtype:\"testscreen",568768,86,"cls:\"rm-topbartitle\",html:\"Test Screen",608557,42,714510,68,"itemId:\"testScreenForm\",defaults:{",603648,34,"},items:[{xtype:\"textfield\",label:\"Test1\",name:\"Test1\"},{xtype:\"textfield\",label:\"Test2\",name:\"Test2\",placeHolder:\"enter\"},{xtype:\"textfield\",label:\"Test3\",name:\"Test3\"},{xtype:\"rmamountfield2\",label:\"Quantity\",name:\"Quantity\",labelWidth:120,rmmandatory:true,readOnly:false,prefix:\"\",listeners:{change:function(b,c,a){console.log(\"rmamountfield2 change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"textfield\",label:\"Test5\",name:\"Test5\"},{xtype:\"rmphonefield2\",label:\"Bus Phone\",labelWidth:120,name:\"BusPhone\"",736403,37,",readOnly:false,listeners:{change:function(b,c,a){console.log(\"rmphonefield change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"textfield\",label:\"Test6\",name:\"Test6\"}]}]",556322,41,"alternateClassName:\"RM.PermissionsMgr\",",604670,32,556395,57,".map(function(b){return b.toLowerCase?b.toLowerCase():b})",556452,86,".toLowerCase()",556538,75,"pprove",556671,34,"Approve\")},canAddEdit:function(a){if(a==\"Items\"){return false}",556632,187,"canSelect",556671,34,"Selec",556814,113,"alternateClassName:\"RM.EventMgr\",",556927,1226,558252,250,"'+RM.AppMgr.formatCurrency(a.NetPositionIncome,0,true",558577,111,"'+RM.AppMgr.formatCurrency(a.NetPositionExpenses,0,true)+'</span>",558776,108,"'+RM.AppMgr.formatCurrency(a.NetPositionIncome-a.NetPositionExpenses,0",558962,228,"msg\",flex:1},",559181,50,",{itemId:\"blankCont\",flex:1",698192,55,559285,181,"d){var b=this.getComponent(1);var e=RM.PermissionsMgr.canView(\"Invoices\");var a=RM.PermissionsMgr.canView(\"Bills\");var c=b.getComponent(\"msg\");c.setHidden(e||a);c",560676,43,"'+RM.Consts.NoAccessMsg+\"</div>\");b.getComponent(\"invoices\").setHidden(!e);b.getComponent(\"bills\").setHidden(!a);b.getComponent(\"blankCont\").setHidden(!(e||a)||(e&&a));if(!e&&!a){return}b",559489,96,"d",559586,197,"'+RM.AppMgr.formatCurrency(d.InvoicesOverdueAmount,0",559835,56,"b",559911,91,"'+d.Bill",559594,110,"Bill",559711,32,"Due",560127,38,"'+RM.AppMgr.formatCurrency(d.BillsOverdueAmount,0",559835,55,"},onBillsTap:function(){RM.ViewMgr.showBills()",560243,2006,"c){try",562251,37,"c==null||c",562298,139,"c.length;a++){this.addBudget(c[a],a)}this.paintChart(c)}catch(b){console.log(\"**** Exception in BudgetOverview setViewData \"+b.message)}",562492,1736,"scrollable:\"vertical\",cls:\"rm-dashboard",564267,129,",",609184,36,"hidden:true,itemId:\"noaccesscont\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-noaccess-icon.png\",width:75,height:69,margin:\"25px auto\"},{xtype:\"component\",html:\"You do not have enough access </br>rights to view the dashboard\",cls:\"rm-update-title\",margin:\"-5 0 30 0\"",654734,34,"tap the top left button to </br>gain access to other parts of this book.\",cls:\"rm-update-msg\",margin:\"20 0 20 0",564392,34,"SecurePanel\",{extend:Ext.Panel,xtype:\"secure",592829,180,"View(a)){RM.AppMgr.showErrorMsgBox(\"You are not permitted to view this screen\"",605135,37,565611,37,564696,3199,575323,532,"Invoices\",{extend:RM.component.SecurePanel,xtype:\"invoices\",config:{permissionFor:\"Invoices",707872,60,568027,99,576040,35,"\"Invoices",714528,39,676032,47,"Due date\",value:\"duedate",568972,41,"Customer\",value:\"customer",564392,267,",lastUpdatedDateFormat:\"d/m/Y h:iA\",",568701,6622,"view.Contacts\",{extend:RM.component.SecurePanel,xtype:\"contacts\",config:{permissionFor:\"Contacts",707872,60,575966,872,"Mobil",576840,86,"0.1",576929,309,"RM.HomeSettingsMgr.getSetting(\"PrivacyPolicyUrl\")",577264,172,"RM.HomeSettingsMgr.getSetting(\"TermsUrl\")",577264,54,577516,124,"RM.HomeSettingsMgr.getSetting(\"AppInfoUrl\")",577666,1111,"Cashbook",578780,154,578942,110,579427,36,579062,116,579427,36,"expenses\",index:\"ExpenseClaim",579212,95,579427,36,579317,620,"clearFilter();",579926,1358,"alternateClassName:\"RM.ViewMgr\",",581284,247,"this.hideKeyPad();",581586,60,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",582420,35,"appBackStack.pop();this.showDashboard(b);",581648,68,"a.onAfter(\"erased\",function(){this",581760,100,"this.hideKeyPad()",581920,32,"var d=this.appBackStack.pop();var e=[d];d.onAfter(\"erased\",function(){e.forEach(function(f){f.destroy()})});while(this.appBackStack.length>0){var ",582021,61,"=b){this.showPanel(a,c);break}e.push(a)}},appPause:function(){document.activeElement.blur();",582237,66,"},onDeviceBack:function(){this.showBackStack(\"onDeviceBack\");",582237,74,"this.formBackHandler){this.formBackHandler.call(this.formB",582286,112,583515,33,"Cashbooks\")){this.confirmExitApp",582382,40,"RM.AppMgr.isLoggedIn()&&this.dashboardShown",582420,35,582506,66,";",583696,39,"Dashboard\"",582383,37,"){this.confirmExitApp()}else{this.back()}}}}}}},confirmExitApp",740140,64,582662,64,582747,152,"regFormBackHandler:function(b,a){this.formBackHandler=b;this.formBackHandlerScope=a},deRegFormBackHandler:function(){this.formBackHandler=null;this.formB",582877,509,"dashboardShown=true;",583696,39,583420,692,"this.hideKeyPad();",584167,193,"this.hideKeyPad();",584415,240,"console.log(\"stack length = \"+this.appBackStack.length",584653,144,"this.hideKeyPad();",584852,1035,"hideKeyPad:function(",584110,57,585885,2525,"]}",670975,53,"RM.PermissionsMgr.canAddEdit(\"Items\")){this.add(",663260,32,588443,49,")}",588544,920,"a){if(!Ext.fly(a.target).hasCls(\"x-clear-icon\")){this.fireEvent(\"tap\",this,a)}",589492,461,605421,73,"getValue:function(){this.showValidation(true);",477264,49,590180,1134,"alternateClassName:\"RM.Selectors\",",604670,32,591346,1418,"re.HomeSettingsMgr\",{alternateClassName:\"RM.HomeSettingsMgr\",singleton:true,load",684175,34,"s(\"HomeSettings\",null,function(a){this.homeSettings=a},this,function(a){})},getSetting:function(b){for(var a=0;a<this.homeSettings.length;a++){if(this.homeSettings[a].Key.toLowerCase()==b.toLowerCase()){return this.homeSettings[a].Value}}return null}});Ext.define(\"RM.core.CashbookMgr\",{alternateClassName:\"RM.CashbookMgr\",singleton:true,config:{cashbookId:null,currentCashbook:null},getTaxPreferences:function(){return this.getCurrentCashbook().TaxPreference},getSalesPreferences:function(){return this.getCurrentCashbook().SalesPreferences},loadLastCashbook:function(a){if(this.getCashbookId()){this.setCashbook(this.getCashbookId());if(a){a()}}",627419,72,"setCashbookId(a.CashBookId)",627514,45,"c",627560,64,627635,178,"_currentCashbook.Dashboard",627826,65,"c,a,b){RM.AppMgr",627904,50,"c},function(d){this.setCashbookId(c);this.setCurrentCashbook(d[0",625663,33,"GSTCodes\").setData(d[0].GSTCodes",625664,32,"AccountingCategories\").setData(d[0].AccountingCategories);if(d[0].AmountTaxStatuses",627967,32,"TaxStatuses\").setData(d[0].AmountTaxStatuses)}else{",625666,109,"abl",625837,37,"INCLUSIVE,Name:\"Include tax",625838,57,"de tax\"}])}",625549,50,"d",628172,48,"this.getCurrentCashbook().Permissions)",628309,48,575305,34,592778,368,593021,39,"d){var c=d.config.permissionFor;if(c){var b=RM.PermissionsMgr.canDo(c.name,c.action);if(c.invoke){d[c.invoke].apply(d,[b])}else{if(c.invokeWithInverse){d[c.invoke].apply(d,[!b])}else{d.setHidden(!b)}}}})},scrollShowField:function(e,b,c,a){if(this.keyCb&&this.keyFldEleId!==b){this.keyCb.onFieldLostFocus.call(this.keyCb)}this.keyFldEleId=b;this.keyCb=a;var d=this;d.clearScrollTimer();d.scrollTimer=window.setTimeout(function(){d.scrollTimer=null;d.getScrollable().getScroller().scrollTo(0,e.element.dom.offsetTop,true)},300);this.showKeyPad(c)},showKeyPad:function(b){if(!this.keypad){this.rootContainer=this.getRootContainer(this);this.rootContainer.element.on({tap:this.handleTapInEntireScreen,scope:this})}if(!this.keypad||b!==this.keypadType){var a=",746676,41,"keypadType:b,listeners:{keytap:this.onKeyTap,scope:this}};this.keypad=this.add(a)}else{this.keypad.show()}this.keypadType=b",617088,36,"Keypad,this)},hideKeypad:function(){this.keypad.hide();this.scrollTop();this.keyCb.onFieldLostFocus.call(this.keyCb",654076,33,"onKeyTap:function(a){this.keyCb.onKeyTap.call(this.keyCb,a);if(a===\"done\"){this.hideKeypad()}if(a===\"cancel\"){this.hideKeypad()}},handleTapInEntireScreen:function(a){if(this.keyCb&&this.keyFldEleId!==a.target.id){this.keyCb.onFieldLostFocus.call(this.keyCb);this.hideKeypad();this.keyCb=null}},getRootContainer:function(a){while(a.getParent()){a=a.getParent()}return a},scrollTop:function(){var a=this;a.clearScrollTopTimer();if(!a.scrollTimer){this.scrollTopTimer=window.setTimeout(function(){a.getScrollable().getScroller().scrollTo(0,0,false)},300)}},clearScrollTimer:function(){if(this.scrollTimer){window.clearTimeout(this.scrollTimer)}},clearScrollTopTimer:function(){if(this.scrollTopTimer){window.clearTimeout(this.scrollTopTimer",653327,32,713344,140,"itemId:\"doneContainer",652460,41,"40,cls:\"rm-keypad-topbar\"},items:[{text:\"CANCEL\",itemId:\"cancel\",},{itemId:\"bar\",},{text:\"DONE\",itemId:\"done\",}]},",604336,33,652462,83,652112,290,652403,59,"itemId:\"dotContainer",652460,85,".\",itemId:\"dotBtn\"},{text:\"\",itemId:\"blankBtn\",hidden:true},{text:\"0\",itemId",652553,55,",itemId:\"backspace\"}]}]},initialize:function(){if(!this.config.keypadType){var b=this.getComponent(\"doneContainer\");b.setHidden(true)}if(this.config.keypadType===\"phone\"){var c=this.getComponent(\"dotContainer\");var a=c.getComponent(\"dotBtn\");var d=c.getComponent(\"blankBtn\");d.setHidden(false);a.setHidden(true",554766,32,"KeyTap:function(a,b){this.fireEvent(\"keytap\",(a.getText()?a.getText().toLowerCase():a.getItemId().toLowerCase()));b.stopPropagation()",564397,32,"honeField\",{extend:RM.component.ExtTextField,xtype:\"rmphone",600508,33,"is.isInitializing=true;this.readOnlyField=a.readOnly||",593814,48,651726,56,"on(\"tap\",this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(b,a){console.log(this.getId()+\" onFieldFocus\");if(this.fieldMaskEl){this.clearCursorBlinkTimer()}if(this.readOnlyField){return}this.fieldMaskEl=a.target.nextElementSibling;this.showCursor();this.owningPanel=b.up(\"panel\");this.revertBackVal=this.getValue();this.owningPanel.scrollShowField(b,a.target.id,\"phone\",this)},onFieldLostFocus:function(){console.log(this.getId()+\" onFieldLostFocus\");this.clearCursorBlinkTimer();this.fireValueChangeEvent(this.getValue())},onKeyTap:function(b){if(b===\"bar\"||b===\"blankbtn\"){return}if(b===\"done\"){return}if(b===\"cancel\"){this.setValue(this.revertBackVal);return}var d=this.getValue();var a=d.toString();var c=a.length;if(b===\"backspace\"){if(c>0){a=a.slice(0,-1);this.setValue(a)}}else{this.setValue(a+b)}},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c}return c},showCursor:function(b){var a=this;a.cursorBlink",589669,39,"a.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"}a.myCursorOff=!a.myCursorOff},500)},clearCursorBlinkTimer:function(){console.log(this.getId()+\" clearCursorBlinkTimer\");if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(c){var b=parseFloat(c)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){this.fireEvent(\"valueChange\",b,a)}",589200,32,593178,207,"this.element.on(\"tap\",function(b){if(Ext.fly(b.target).hasCls(\"x-clear-icon\")){this.setValue(null)}},this);var a=this.getPhonePicker();if(a){a.setListeners({",600896,100,",scope:this}",593383,307,",getValue:function(){this.showValidation(true);",477264,49,670902,361,",getValue:function(){this.showValidation(true);",477264,49,"RM.view.ContactDetail\",{extend:RM.component.Secure",594646,36,"permissionFor:\"Contacts",707872,64,"back\",",618208,39,614976,32,602457,44,605915,55,594920,380,"\"Display ",596395,32,595359,99,"labelWidth:\"10em",595456,231,595816,814,"rmphonefield2",596641,170,"rmphonefield2\"",714720,39,596862,267,"rmphonefield2",597140,168,"rmphonefield2\"",714720,39,597359,67,"xt",597425,50,",labelWidth:\"4em",597474,505,"alternateClassName:\"RM.ContactsMgr\",",604670,38,623112,126,598143,1571,"if(!c){return}",599714,998,"1",600713,360,"how();",601060,38,601117,60,"a?this.showValidation(true):this.showValidation(false);",601177,58,"callParent([valueInField])",219166,34,"duration",590090,93,601461,378,"this",296062,37,";return b},showClearIcon:function(){var a=this;if(a.getClearIcon()&&!a.getDisabled()&&!a.getReadOnly()){a",293817,60,"a},resetPicker:function(){var a=this;",601872,240,"b){if(!this.config.rmmandatory){this.addClearButton(b);this.clearButton.setHidden(!a.getValue())}",600913,83,",scope:this}})},updateValue",279215,39,605418,76,"getValue:function(){this.showValidation(true);",477264,34,",addClearButton:function(a){if(this.clearButtonAdded){return}var b=a.getToolbar();var c=",655229,33,"e,f){var d=e.up(\"datepicker\");d.fireEvent(\"change\",d,null);d.hide()},text:\"Clear\"};this.clearButton=b.add(c);this.clearButtonAdded=true",593689,930,"TimeSheetDetail\",{extend:RM.component.Secure",602265,379,"secure",602644,2026,"alternateClassName:\"RM.TimeSheetsMgr\",",604670,538,"RMAmountField\",{extend:RM.component.ExtTextField,xtype:\"rmamount",600508,33,"is.isInitializing=true;this.readOnlyField=a.readOnly||false;a.trailingZerosUpTo=a.trailingZerosUpTo==0||a.trailingZerosUpTo?a.trailingZerosUpTo:2;a.prefix=a.prefix||\"\"",593819,43,651726,56,"on(\"tap\",this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(b,a){if(this.fieldMaskEl){this.clearCursorBlinkTimer()}if(this.readOnlyField){return}this.fieldMaskEl=a.target.nextElementSibling;this.showCursor();this.inEditMode=true;this.owningPanel=b.up(\"panel\");this.revertBackVal=this.getValue();this.owningPanel.scrollShowField(b,a.target.id,\"amount\",this)},onFieldLostFocus:function(){this.inEditMode=false;this.clearCursorBlinkTimer();var a=this.getValue();if(a==\".\"){a=\"0.0\"}if(this.config.decimalPlaces&&a!=\"\"){this.setValue(this.config.prefix+this.formatVal(a))}this.fireValueChangeEvent(a)},onKeyTap:function(b){if(b===\"bar\"){return}if(b===\"done\"){return}if(b===\"cancel\"){this.setValue(this.revertBackVal);return}var e=this.getValue();var a=this.config.prefix+e.toString();var d=a.length;var c=a.indexOf(\".\");if(b===\"backspace\"){if(d>0){a=a.slice(0,-1);this.setValue(a)}}else{if(this.config.decimalPlaces){if((b!=\".\"&&d-1<c+this.config.decimalPlaces)||c<0){if(a==this.config.prefix+\"0\"&&b!=\".\"){a=this.config.prefix}this.setValue(a+b)}}else{if(c!=-1&&b==\".\"){return}if(a==this.config.prefix+\"0\"){a=this.config.prefix}this.setValue(a+b)}}},get",601700,39,");var a=b.toString();if(this.config.prefix){a=a.replace(/,/g,\"\")}if(this.config.prefix&&a.indexOf(this.config.prefix)!=-1){a=a.slice(this.config.prefix.length)}return a},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c;if(this.config.decimalPlaces&&c!==\"\"){c=this.formatVal(c)}}if(c.indexOf(this.config.prefix)==-1&&c!==\"\"){c=this.config.prefix+this.formatVal(c)}if(!this.inEditMode){this.fireValueChangeEvent(b)}return c},showCursor:function(){var a=this;a.cursorBlink",589669,39,"a.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"}a.myCursorOff=!a.myCursorOff},500)},clearCursorBlinkTimer:function(){if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(d){var c=d?d.toString():\"\";c=c.replace(/,/g,\"\");if(c.indexOf(this.config.prefix)!=-1){d=c.slice(this.config.prefix.length)}var b=parseFloat(d)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){if(this.valBeforeChange!==undefined){this.fireEvent(\"valueChange\",b,a)}this.valBeforeChange=b}},formatVal:function(e){var c=parseFloat(e).toString();var f=c.indexOf(\".\");if(f!==-1){var b=c.length-f-1;var d=this.config.trailingZerosUpTo-b;if(d>0){for(i=0;i<d;i++){c=c+\"0\"}}}else{if(this.config.trailingZerosUpTo>0){c=c+\".\";for(i=0;i<this.config.trailingZerosUpTo;i++){c=c+\"0\"}}}if(this.config.prefix){if(c.indexOf(\".\")!=-1){var a=c.split(\".\");a[0]=a[0]",636443,37,";c=a[0]+\".\"+a[1];return c}else{return c",636443,38,"}else{return c}",605632,47,"RM.component.Secure",605683,546,"secure",606229,598,"rmamount",606836,70," rm-cursor-blinkbg",606906,38,"decimalPlaces:2,prefix:\"$",590672,34,602976,33,690126,79,606489,43,"Supplier",602976,33,607259,626,"alternateClassName:\"RM.ExpensesMgr\",",604670,32,607917,752,"TaxStatus:function(a){this.taxStatus",608709,53,"nvoiceDate:function(a){this.invoiceDate",608754,175,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",608945,520,"(b.LineText||b.Description||b.ItemName)",577375,49,609527,568,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",610111,536,"(c.LineText||c.Description||c.ItemName)",610660,262,"RM.component.Secure",610926,36,"permissionFor:\"Invoices",707872,127,665392,40,611127,239,595053,32,"Invoices",611375,280,612654,32,611701,157,"clearIcon:true,ui:\"plain",603101,43,611910,1698,",listeners:[{element:\"element\",event:\"tap\",fn:function(){this.toggleOptions()},scope:this}]",613608,1291,"secure",614899,138,",permissionFor:\"Invoices",615036,1398,616717,93,"},{text:\"Time\",itemId:\"time\",permissionFor:\"Timesheets_BillEntry\"",616840,37,"permissionFor:\"ExpenseClaims_BillEntry\"}],",617018,53,"a,d){var b",616543,121,"e){this.hide();a.call(d,e.getItemId())},scope:this}});var c=0;this.items.forEach(function(e){if(!e.permissionFor||RM.PermissionsMgr.getPermission(e.permissionFor)){b.add(e);if(e.itemId){c+=1}}});if(c>1){this.popup=b;b.show()",617088,42,"}else{a.call(d,this.items[1].itemId)}},h",660925,44,616947,434,617486,39,"var e=this.getItemId();if(e==5||e==10||e==20){e=e+\"%\"}a.call(b,e",617442,45,617604,862,"secure",618466,45,"ext",618511,62,"extselectfield\",label:\"Item type\",itemId:\"itemT",618599,165,"itemId:\"itemName\",labelWidth:\"7em",618762,92,618969,206,"rmamount",619181,38,"cls:\"rm-flatfield rm-cursor-blinkbg",606906,38,"decimalPlaces:2,prefix:\"$\",border:\"0",690542,34,"Account\",itemId:\"account\"",736688,40,619354,185,690553,33,590964,99,"autoSelect:false,clearIcon",619696,1939,"alternateClassName:\"RM.InvoicesMgr\",",604670,34,621669,136," RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled?\"APPROVED\":\"UN",621877,37,621847,100,"getInitialInvoiceStatus:function(){if(RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled){return RM.Consts.InvoiceStatus.DRAFT}else{return ",622253,32,"}",621945,235,"this.getInitialInvoiceStatus()",622209,189,"b,e",624079,58,"CustomerInvoicesC\");a.showView(c,d,b",622487,2036,"Ext.define(\"RM.util.MathHelpers\",{singleton:true,roundToEven:function(d,e){e=e||0;var h=Math.pow(10,e);var f=+(d*h);var g=Math.floor(f);var c=f-g;var a;var b=1e-8;if(c-b<0.5&&c+b>0.5&&g%2==0){a=g}else{a=Math.round(f)}return a/h}})",625171,86,"isUserLoggedIn=false;Ext.Ajax.setDefaultHeaders({\"X-APIV\":RM.Consts.Api.VERSION})",625298,251,625945,36,".init(a)",626047,36,".init(a)",626165,40,".init(a)",626283,50,"RM.HomeSettingsMgr.load",626343,765,"RM.CashbookMgr.getCashbookId()){RM.CashbookMgr.loadLastCashbook(function(){RM.ViewMgr.back()})}else{RM.CashbookMgr",627221,169,"RM.CashbookMgr.selectCashBook()}},this",628355,177,"RM.CashbookMgr",628536,49,"RM.ViewMgr.clearBackStack();this.logoutFromServer();this.login",628606,166,";this.login",628770,32,"if(this.isUserLoggedIn",628800,123,"isUserLoggedIn=false}",628930,231,"){apiUrl=this.getApiUrl(c)+\"/\"+e;this.getServerRec(apiUrl,{},a,b,d)},getServerRecs:function(b,f,a,c,d){var e=this;if(b.substr(0,4)!==\"http\"){b=e.getApiUrl(b)}Ext.Ajax.request({url:b",629707,74,"e",630653,32,629817,75,"c,h.recs",629903,32,"c",629936,155,";e.setLoadingTimer()},getServerRec:function(b,e,a,c,d){return this.getServerRecs(b,e,function(f){if(a){a.call(c,f[0])}},c,d",630090,477,"&&j.status!=401",630567,344,"d,e,h,g){var f=this;f.setLoadingTimer();var c=function(k,j,l){f",630653,32,"hideLoadingMask();if(a){a.call(d,k,j,l)}}",630936,33,"k,j,l){if(l){c(k,j,l)}},scope:f",631208,200,"c){if(navigator.connection&&navigator.connection.type===\"none\"){this.showOkMsgBox(\"It looks like your device has no internet connection, please connect and try again.\");return}if(c",631415,35,"c.statusText===\"communication failure\"){this.showOkMsgBox(\"The connection failed, please try again or contact support.\")}else{if(c.status==412){var a=Ext.decode(c.statusText);this.showAppStop(a)}else{var b=c.statusText?\" \"+c.statusText:\"\";this.showErrorMsgBox(\"There was an error, please try again or contact support: <br/><br/> (\"+c.status+b+\")\")}",631515,113,"&&this.appTypeId!==RM.Consts.App.WEB_CONTAINER){b=\"production\"}this.apiLocation=b;if(b==\"staging",631685,33,".reckoncloud.com.au/api\"}else{if(b==\"production\"){this.baseApiUrl=\"https://mobile",632203,32,"preproduction\"){this.baseApiUrl=\"https://preprodmobile",632203,34,"v",631679,33,631869,43,"qa",631679,33,"r1mobileqa",631801,35,631983,84,"this.baseApiUrl=\"/api\"",632371,1685,"AppStop",584990,71,"AppStopC\");c.showView(a,b",634049,2433,"formatCurrency:function(c,b,e){if(isNaN(c)){c=0}var a=(c<0);var d=Math.abs(RM.util.MathHelpers.roundToEven(c,b));c=\"$\"+d.toFixed(b",636442,38,";if(a&&e){return\"(\"+c+\")\"}return(((a)?\"-\":\"\")+c)},unformatCurrency",615616,33,"()?(-)?(\\$)?(,)?(\\))?/g,\"",636478,893,";Ext.create(\"RM.view.TestScreen\",{xtype:\"testscreen\",fullscreen:true",703727,32,637401,131,"controller.TestScreen",638720,44,"testScreen:\"testscreen\",testScreenForm:\"testscreen #testScreenForm\",},control:{testscreen:{show:\"onShow\"},\"testscreen #save\":{tap:\"save\"}}",647597,32,"TestScreenForm().getValues();console.log(Ext.encode(a))},onShow:function(){var a={Test1:\"A Text field\",Quantity:25,ItemPrice:52625.45,BusPhone:\"072367672\"};this.getTestScreenForm().setValues(a",637512,614,"Production\",value:\"production\"},{text:\"Pre Production\",value:\"preproduction\"},{text:\"Staging\",value:\"staging\"},{text:\"QA Server\",value:\"qa",638150,63," IIS\",value:\"devlocaliis",638330,1045,"});Ext.define(\"RM.view.AppStop\",{extend:Ext.Panel,xtype:\"appstop\",config:{",576782,32,671518,50,654575,46,"]},",609184,43,"\"vbox\",align:\"center\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-update-icon.png\",height:40,width:40,margin:\"25px auto\"},{xtype:\"component\",html:\"A new update has been released!\",cls:\"rm-update-title\",margin:\"-14 0 5 0\"},{xtype:\"component\",html:\"Click below to update for security & stability.\",cls:\"rm-update-msg\",margin:\"0 0 25 0\"},{xtype:\"button\",itemId:\"update\",text:\"Update app >\",cls:\"rm-photopreviewbtn",737024,75,"});Ext.define(\"RM.controller.AppStop",638720,44,"appStop:\"appstop\"},control:{\"appstop #update\":{tap:\"onUpdate\"}}},showView:function(a){this.stopErr=a;RM.ViewMgr.showPanel2({xtype:\"appstop\"})},onUpdate",437371,34,"window.open(this.stopErr.AndroidUpgradeUrl,\"_system\")}if(Ext.os.is.iOS){window.open(this.stopErr.IosUpgradeUrl",661806,32,"Modul",651071,47,639493,6253,",hide:\"onHide",645745,573,"RM.ViewMgr.regFormBackHandler(this.back,this);",646318,178,"if(",683888,36,646545,298,660922,34,"FormBackHandler()",692671,34,"SaveBtn().setHidden(!a);if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getContactForm())",646840,206,";if(Ext.isDefined(b.SaveSupport)&&!b.SaveSupport){this.setEditable(false)}if(b.ViewNotice){RM.AppMgr.showOkMsgBox(b.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack(",647072,327,"!a.Description",647416,138,"a.Email!==\"\"&&",739237,112,";return b",647550,224,"a.IsActive=true",647773,217,"RM.AppMgr.showOkMsgBox",647995,1025,"ranchName().showValidation(true",649389,35,649044,242,648942,54,649342,49,"console.log(this.getBranchName().getValue());",647345,36,"this.getBranchName().getValue()",649389,6386,"console.log(\"EnterPin onShow\");",655775,349,";RM.AppMgr.logoutFromServer",656122,477,"RM.AppMgr.showOkMsgBox",656604,1043,"M",657648,975,";RM.AppMgr.logoutFromServer(",658622,542,"RM.HomeSettingsMgr.getSetting(\"SignupUrl\")",659207,623,"RM.AppMgr.showOkMsgBox",659835,2531,662394,391,",function(a){if(a.length==0){RM.AppMgr.showOkMsgBox(\"You do not have any books to select.\",RM.AppMgr.lock,RM.AppMgr)}},this,null,null,function(){RM.AppMgr.login()}",668608,163,662948,4037,",zeroLineItemsCheckBox:\"budgetlineitems rmcheckbox\"},control:{budgetlineitems:{show:\"onShow\"},",666996,113,"c,b){this.budgetId=c;this.budgetName=b;",667114,90,"},onShow:function(){this.hideZeroLineItems=this.hideZeroLineItems||false;this.getBudgetTitle().setHtml(this.budgetName);this.getZeroLineItemsCheckBox().setValue(this.hideZeroLineItems);var a",667243,42,"a",733840,40,"BudgetLineItems\"));a.filter(\"BudgetId\",this.budgetI",667365,54,"hideZeroLineItems=a",667484,38,"var a",667243,42,"a.removeAll();a.filter(\"IncludeZeroItems\",!this.hideZeroLineItems);RM.AppMgr.loadStore(a",712384,66,667648,2849,",noaccessCont:\"dashboard #noaccess",670492,44,"init",575479,85,"showDashboardData,scope:this})",670534,100,")},showDashboardData:function(){var a=RM.PermissionsMgr.canView(\"PAndLReport\");var e=RM.PermissionsMgr.canView(\"Invoices\");var c=RM.PermissionsMgr.canView(\"Bills\");var d=RM.PermissionsMgr.canView(\"AccountEnquiryReport\");var b=RM.PermissionsMgr.canView(\"Budgets\");if(this.getNoaccessCont()){this.getNoaccessCont().setHidden(a||e||c||d||b)}if(this.getDashboardCont()){if(a",670711,36,"this.dashboardData)}if(e||c){this.getAlerts().setViewData(this.dashboardData)}if(d){",670782,34,"this.dashboardData.TopExpenses)}if(b){",670831,37,"this.dashboardData.BudgetOverview)}this.getNetPosition().setHidden(!a);this.getAlerts().setHidden(!(e||c));this.getTopExpenses().setHidden(!d);this.getBudgetOverview().setHidden(!b)}",671262,518,"username and",671779,91,"textfield\",itemId:\"username\",label:\"Usernam",690583,37,607136,32,657795,32,671867,44,"rmmandatory:true,labelWidth:\"4em",736367,56,671993,742,"userName:\"forgotpassword #username",672733,421,"){var c=true;var b=this.getEmail().getValue();var a=this.getUserName().getValue();this.getEmail().showValidation(true);this.getUserName().showValidation(true);if(b==\"\"&&a",739182,44,"this.getUserName().showValidation(false);c=false;RM.AppMgr.showInvalidFormMsg();return c}",673168,48,"c=false}if(a==\"\"){this.getUserName().showValidation(false);c=false;RM.AppMgr.showInvalidFormMsg();return c",673223,71,"c",673295,38,";return c}if(!c",727215,40,"c},onSend",716784,36,673458,87,"UserName().getValue(),Email",673536,38,"a",673575,36,"b,a){this.showFail(a",673631,101,"your password reset details",673769,268,"view.CustomerInvoices\",{extend:RM.component.Secure",567930,39,"permissionFor:\"Invoices\",layout:\"fit\",items:[{xtype:\"titlebar\",docked:\"top\",title:\"A Title\",itemId:\"title",675775,104,",align:\"left\"},{text:\"ADD\",itemId:\"add\",align:\"right\",",576040,35,"\"Invoices",714528,39,676032,47,"Due date\",value:\"duedate",568972,33,564394,32,"InvoicesList",610912,34,"slist\",config:{layout:\"fit\",control:{list:{itemtap:\"onItemTap",566943,33,"ustomerId=this.config.customerId;",676163,74,"var b=(this.config.sortVal==\"duedate\");",738847,43,"s\");if(b",668313,34,"}else{a.setGroupField(null)}this.loadList(",676235,89,"b",676328,137,680119,210,"reload:function(){this.loadList()},setS",678818,53,"clearSearch",678882,47,",loadList",717710,48,"Invoic",732432,46,"Invoices\")",679821,124,644448,166,680328,192,"RM.AppMgr.showOkMsgBox(b)})",676516,2024,674048,60,"C",674109,43,"Title:\"customer",678656,32,"customer",678688,35,"customerinvoices #back\":{tap:\"back\"},",674238,88,"\"onSearch\",searchclear:\"onSearchClear",674570,146,"c,d,b,e){this.invoicesTitle=c;this.customerId=d;this.customerName=b;",674718,92,679452,35,"e",682795,36,"sTitle().setTitle('<span style=\"text-shadow:none; font-weight:normal;\">'+this.invoicesTitle+\"</span>\"",742367,37,674974,42,"activeList.reload()}",699805,35,"CustomerInvoices();a.removeAt(2);this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false,customerId:this.customerId})},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",680529,179,707454,34,"});Ext.define(\"RM.component.CustInvSummaryLis",714213,32,"invsummarylist\",config:{layout:\"fit\",control:{list:{select:\"onItemSelect",566943,63,568305,395,");",738847,36,"CustomerInvoic",732432,46,"CustomerInvoices\"));RM.AppMgr.loadStore(a)",675168,173,"reload:function(){this.loadList()},setS",678818,53,"clearSearch",678882,47,",loadList",717710,48,"Invoices\"",718681,32,679912,33,"RM.AppMgr.loadStore(a);",675453,216,678529,63,"Invoices:\"invoices",678671,51,678752,72,"\"onSearch\",searchclear:\"onSearchClear\"},\"invoice",741903,34,678971,133,"){",679172,51,711456,45,"if(!this.dataLoaded){this.onSort(\"duedate\");this.dataLoaded=true}else{this.activeList.reload()}",742368,36,"nvoice\"){this.activeList.reload()}",699805,35,"Invoices();a.removeAt(2);if(b==\"customer\"){this.activeList=a.add({xtype:\"custinvsummarylist\"})}else{this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false})}},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",675338,94,"});Ext.define(\"RM.util.FormUtils\",{singleton:true,makeAllFieldsReadOnly:function(a){a",593025,122,678512,35,644650,50,681065,676,",hide:\"onHide",681740,228,"change",681980,309,",dateFld:{change:\"onInvoiceDateChanged",663983,112,"f,a,e){this.lineItemsDirty=false;",645999,33,"f?f:{}",724048,34,"e",719998,43,"c){var d=new Date();d.setHours(0,0,0,0);",682504,57,"InvoicesMgr.getInitialInvoiceStatus(),AmountTaxStatus:RM.CashbookMgr.getTaxPreferences().SalesFigures,Date:d,Discount:\"None\",Amount:0,DiscountTotal:0,Tax:0,Subtotal:0,Paid:0,BalanceDue:0",682633,76,"&&RM.PermissionsMgr.canAddEdit(\"Invoices\"",682708,108,"RM.ViewMgr.regFormBackHandler(this.back,this);",682816,134,683066,273,"this.detailsData;if(b.CustomerId){",683592,78,"applyTaxRules(",683663,158,";this.getLineItems().setInvoiceDate(this.getDateFld().getValue());this.getLineItems().setTaxStatus(b.AmountTaxStatus",682943,66,"b.Status));this.dataLoaded=true}}",660920,36,"FormBackHandler",742366,38,683879,103,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getInvoiceForm())}",684125,38,"applyTaxRules:function(){var b=this.getAmountsFld();var a=RM.CashbookMgr.getTaxPreferences();b.setReadOnly(!this.isEditable||!a.AllowTaxEdit);if(this.isCreate){if(a.IsTaxTracking){b.setHidden(false);b.setValue(a.SalesFigures)}else{b.setHidden(true);b.setValue(RM.Consts.TaxStatus.NON_TAXED)}}else{var c=a.IsTaxTracking||b.getValue()!==RM.Consts.TaxStatus.NON_TAXED;b.setHidden(!c)",646840,55,684215,49,711501,64,"c.Status));",684264,282,"RM.AppMgr.formatCurrency",684568,54,"c.Notes=c.Notes?c",720663,51,"c);this.applyTaxRules(",684635,49,"if((Ext.isDefined(c.SaveSupport)&&!c.SaveSupport)||this.detailsData.Paid>0){this.isEditable=false;this.setEditable(false)}",684684,59,"CustomerId(c.CustomerId);b.setTaxStatus(c.AmountTaxStatus);b.setInvoiceDate(c.Date",684887,63,683094,42,"false);this.dataLoaded=true;if(c.ViewNotice){RM.AppMgr.showOkMsgBox(c.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack(",684976,157,"this.goBack();RM.AppMgr.showOkMsgBox",685138,716,"c,b,a){if(!this.dataLoaded){return}this.detailsData.AmountTaxStatus=b;this.previousAmountTaxStatus=a;this.calculateBreakdown();this.getLineItems().setTaxStatus(b)},onInvoiceDateChanged:function(b,c,a){if(!this.dataLoaded){return}this.calculateBreakdown();this.getLineItems().setInvoiceDate(c",685923,476,"d",686400,34,";var c",686436,39,"b={CustomerId:d.CustomerId,InvoiceDate:d.Date,AmountTaxStatus:d",686514,87,"d",694184,41,"entage=d",686651,34,"d",694274,44,"d.Discount.replace(\"$\",\"\")}}if(b.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED){c=c.map(function(e){e.TaxGroupId=null;e.Tax=null;return e})}b.LineItems=c.map(function(e){return{InvoiceLineItemId:e.InvoiceLineItemId,ItemType:e.ItemType,ItemID:e.ItemId,Proje",744610,37,"UnitPriceExTax:e.UnitPriceExTax,DiscountAmount:e.DiscountAmount,DiscountAmountExTax:e.DiscountAmountExTax,DiscountAmountTax:e.DiscountAmountTax,DiscountPercentage:e.DiscountPercentage,TaxGroupID:e.TaxGroupId,Tax:e.Tax,TaxIsModified:e.TaxIsModified}});",685007,33,"alc\",true,b,function a(e){var l=e[0];var h=this.detailsData;h.Amount=l.TotalIncludingTax;h.AmountExTax=l.TotalExcludingTax;h.Tax=l.Tax;h.Subtotal=l.Subtotal;h.DiscountTotal=l.Discount||0;h.Paid=l.AmountPaid;h.BalanceDue=l.BalanceDue;var g=this.getLineItems();g.removeAllItems();for(var f=0;f<c.length;f++){var k=c[f];var j=null;Ext.Array.some(l.Items,function(m){if(m.InvoiceLineItemId===k.InvoiceLineItemId){j=m;return true}});if(!j){c[f]=null}else{Ext.apply(k,j)}}c=Ext.Array.clean(c);g.setTaxStatus(b.AmountTaxStatus);g.addLineItems(c",687640,42,"e){RM.AppMgr.showOkMsgBox(e);this.goBack(",687692,966,"c",686400,34,";c",688695,51,"1;c.LineItems.forEach(function(d){d.lineNo=a;if(d.IsNew){delete d.InvoiceLineItemId}a+=1}",727829,40,"delete b.DiscountPerc;delete b.DiscountAmount;if(b",694184,42,"b",686651,34,"b",694274,44,"b",688951,34,"b.Discount;b",722510,42,"b)){if(c",689047,64,"b);",685007,32,"s\",this.isCreate,b",689164,111,"d,e){RM.AppMgr.showOkMsgBox(e)}",659855,34,689323,64,605198,220,"this.on(\"keyup\",this.valChange);this.on(\"blur\",this.numberPrecision)",605418,215,",valChange:function(a,f,c){var g=this.getValue();console.log(f.browserEvent.keyCode);if(!(47<f.browserEvent.keyCode<58||f.browserEvent.keyCode==190)){f.stopEvent()}if(g===null||g===undefined){console.log(g);return}var b=g.toString();var d=b.length;if(this.config.decimalPlaces&&b.indexOf(\".\")!=-1){if(d-1>(b.indexOf(\".\")+this.config.decimalPlaces)){this.setValue(b.substring(0,d-1))}}console.log(this.getValue()",636180,49,"&&Ext.isNumber(this.config.decimalPlaces)){this.setValue(a.toFixed(this.config.decimalPlaces))}},getValue:function(){this.showValidation(true);",477264,49,689384,384,595053,32,"Invoices",689777,40,618541,32,689863,39,690032,94,606572,48,"clearIcon",603065,37,",permissionFor:{action:\"Select\",name:\"Projects\"},",690096,152,"itemId:\"descriptionField",690246,41,"[\"rm-flatfield\",\"rm-flatfield-last\"],placeHolder:\"enter\"},{xtype:\"container\",itemId:\"detailsFields\",defaults:{clearIcon:false},hidden:true,items:[{xtype:\"rmamountfield\",name:\"UnitPrice",690367,70," rm-cursor-blinkbg\",placeHolder:\"enter\",decimalPlaces:2,prefix:\"$\"},{xtype:\"rmamount",690477,65," rm-cursor-blinkbg\",decimalPlaces:4,trailingZerosUpTo:0,prefix:\"",690204,32,"iscount\",label:\"Discount\",placeHolder:\"none\",value:0,cls:[\"rm-flatfield\"]},{xtype:\"rmamountfield\",name:\"Amount\",itemId:\"Amount\",label:\"Amount\",value:0",714852,34,"decimalPlaces:2,prefix:\"$",690542,44,690603,50,"itemId",690639,77,"autoSelect:false",620542,40,"rmamountfield\",name:\"Tax\",itemId:\"Tax\",label:\"Tax\",labelWidth:\"7em\",cls:[\"rm-flatfield\",\"rm-cursor-blinkbg\",\"rm-flatfield-last\"],decimalPlaces:2,prefix:\"$\",clearIcon:true}]}]}]},showDetailsFields:function(){this.down(\"#descriptionField\").removeCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(false)},hideDetailsFields:function(){this.down(\"#descriptionField\").addCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(true)},hideTaxFields:function(){this.down(\"#TaxGroupId\").setHidden(true);this.down(\"#Tax\").setHidden(true);this.down(\"#Amount\").addCls([\"rm-flatfield-last\"])},setTaxModified:function(a){var b=this.down(\"#Tax\");if(a){b.addCls([\"rm-field-warning\"]);b.setLabel(\"Tax (modified)\");b.removeCls(\"clear-icon-hidden\")}else{b.removeCls([\"rm-field-warning\"]);b.setLabel(\"Tax\");b.addCls(\"clear-icon-hidden\")}}});Ext.define(\"RM.util.PseudoGuid\",{singleton:true,currentIndex:1,guidMask:",718079,38,",next:function(){var b=this.currentIndex.toString();var a=new RegExp(\"0{\"+b.length+\"}$\");var c=this.guidMask.replace(a,b);this.currentIndex+=1;if(this.currentIndex>999999999999){this.currentIndex=1}return c",678510,37,690938,177,691122,34,":\"invoicelineitem field[name=UnitPrice]\",quantity:\"invoicelineitem field[name=Quantity]\",discount:\"invoicelineitem field[name=Discount]\",taxCode:\"invoicelineitem field[name=TaxGroupId]\",tax:\"invoicelineitem field[name=Tax]\",amount:\"invoicelineitem field[name=Amount",691325,32,691364,49,"field[name=ProjectID]\",itemId:\"invoicelineitem field[name=ItemId]\",projectName:\"invoicelineitem field[name=ProjectName]\",",691441,174,",unitPrice:{valueChange:\"unitPriceChanged\"},tax:{valueChange:\"taxAmountChanged\",clearicontap:function(){this.taxAmountChanged(null,null)}},taxCode:{change:\"taxCodeChanged\"},quantity:{valueChange:\"quantityChanged\"},discount:{change:\"discountChanged\"},projectName:{change:\"projectChanged\"}}},isTaxInclusive:function(){return this.taxStatusCode===RM.Consts.TaxStatus.INCLUSIVE},showView:function(e,f,d,g,a,c){this.ignoreEvents=false",691675,42,"taxStatusCode=d.taxStatus;this.invoiceDate=d.invoiceDate",724048,36,"if(g){this.detailsData=g}else{this.isCreate=true;this.detailsData={IsNew:true,InvoiceLineItemId:RM.util.PseudoGuid.next(),UnitPriceAccuracy:2,Quantity:1,TaxGroupId:null,TaxIsModified:false}}",743897,65,692069,64,"b",692134,70,"getAdd",724384,47,683066,37,"Tax().setReadOnly(!RM.CashbookMgr.getTaxPreferences().AllowTaxEdit);if(!this.initShow){b.reset();b",692576,34,"setDiscountDisplayValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);var a=RM.util.MathHelpers.roundToEven(this.isTaxInclusive()?this.detailsData.UnitPrice:this.detailsData.UnitPriceExTax,this.detailsData.UnitPriceAccuracy);this.getUnitPrice().setValue(a);if(this.taxStatusCode===RM.Consts.TaxStatus.NON_TAXED){this.getItemDetail().hideTaxFields()}this.setTaxModified(this.detailsData.TaxIsModified);if(this.detailsData.ItemId){this.getItemDetail().showDetailsFields()}this.initialFormValues=b.getValues();this.initShow",720906,73,"Item",646256,44,"setEditable:function(a){if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getItemForm())}},setTaxModified:function(a){this.detailsData.TaxIsModified=a;this.getItemDetail().setTaxModified(a)},setDiscountDisplayValue:function(b,a){var c;if(b){c=b+\"%\"}else{if(a){c=RM.AppMgr.formatCurrency(a,2)}else{c=\"\"}}this.getDiscount().setValue(c",692843,133,"||0,function(c){b.setValue(c==0?\"",693022,304,"this.itemChanged(c[0])},this)}}}}},goB",707455,34,722205,104,"add",722313,51,739136,39,693614,69,"UnitPriceExTax){this.getUnitPrice",647264,36,727213,45,693895,60,"delete c.Amount;delete c.UnitPrice;delete c.Tax;delete c.Discount;var b=Ext.apply(this.detailsData,c);b.ItemType=a;b.Quantity=b.Quantity||1;",694358,85,",itemChanged:function(a){this.detailsData.ItemName=a.Name;this.detailsData.UnitPriceExTax=a.UnitPriceExTax;this.setTaxModified(false);this.ignoreEvents=tru",693368,39,"a.ItemId,ItemName:a.ItemPath,TaxGroupId:a.SaleTaxCodeID,Description:a.SalesDescription,UnitPrice:this.isTaxInclusive()?\"\":a.UnitPriceExTax});this.ignoreEvents=false;var b=this;this.getServerCalculatedValues(\"Item\",function(){b.getItemDetail().showDetailsFields()})},unitPriceChanged:function(b,a){if(this.ignoreControlEvents()){return}var c=b.toString().split(\".\");if(c.length==2&&c[1].length>1){this.detailsData.UnitPriceAccuracy=c[1].length}else{this.detailsData.UnitPriceAccuracy=2}if(!this.isTaxInclusive()){this.detailsData.UnitPriceExTax=b}this.getServerCalculatedValues(\"UnitPrice\")},discountChanged:function(c,b,a){if(this.ignoreControlEvents()){return}this.detailsData.DiscountAmount=null;this.detailsData.DiscountAmountExTax=null;this.detailsData.DiscountPercentage=null;if(b.indexOf(\"%\")>-1){this.detailsData.DiscountPercentage=parseFloat(b.replace(\"%\",\"\"))}else{if(b.indexOf(\"$\")>-1){if(this.isTaxInclusive()){this.detailsData.DiscountAmount=RM.AppMgr.unformatCurrency(b)}else{this.detailsData.DiscountAmountExTax=RM.AppMgr.unformatCurrency(b)}}}this.getServerCalculatedValues(\"Discount\")},taxAmountChanged:function(b,a){if(this.ignoreControlEvents()){return}if(!b){this.detailsData.TaxIsModified=false}else{this.detailsData.TaxIsModified=true}this.getServerCalculatedValues(\"Tax\")},taxCodeChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Tax\")},projectChanged:function(c,b,a){if(this.ignoreControlEvents()){return}if(!b){this.getProjectId().setValue(null)}if(this.getItemId().getValue()){}},quantityChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Quantity\")},getServerCalculatedValues:function(f,b){var d={AmountTaxStatus:this.taxStatusCode,PreviousAmountTaxStatus:this.taxStatusCode,CustomerId:this.customerId,InvoiceDate:this.invoiceDate,LineItems:[]}",693917,42,"e={ChangeStatus:2,ItemId:c.ItemId,Quantity:c.Quantity||1,TaxGroupID:c.TaxGroupId,TaxIsModified:this.detailsData.TaxIsModified,Tax:this.detailsData.TaxIsModified?c.Tax:null,UnitPriceExTax:this.detailsData.UnitPriceExTax};if(this.detailsData.DiscountPercentage){e.DiscountPercentage=this.detailsData.DiscountPercentage}else{e.DiscountAmountExTax=this.detailsData.DiscountAmountExTax;e.DiscountAmountTax=this.detailsData.DiscountAmountTax}switch(f){case\"UnitPrice\":e.UnitPrice=this.getUnitPrice().getValue();e.UnitPriceIsModified=true;break;case\"Quantity\":e.QuantityIsModified=true;break;case\"Discount\":if(!e.DiscountPercentage){e.DiscountAmount=this.isTaxInclusive()?this.detailsData.DiscountAmount:this.detailsData.DiscountAmountExTax;e.DiscountAmountExTax=this.isTaxInclusive()?null:this.detailsData.DiscountAmount;e.DiscountAmountTax=null}e.DiscountIsModified=true;break}d.LineItems.push(e);",685007,33,"alc\",true,d,function a(j){var g=j[0].Items[0];this.ignoreEvents=true;this.detailsData.UnitPriceExTax=g.UnitPriceExTax;this.detailsData.UnitPrice=g.UnitPrice;this.detailsData.Amount=g.Amount;this.detailsData.AmountExTax=g.AmountExTax;this.detailsData.AmountTax=g.AmountTax;this.detailsData.Tax=g.Tax;this.detailsData.DiscountedTaxAmount=g.DiscountedTaxAmount;this.detailsData.DiscountedTaxExclAmount=g.DiscountedTaxExclAmount;this.detailsData.DiscountAmount=g.DiscountAmount;this.detailsData.DiscountAmountExTax=g.DiscountAmountExTax;this.detailsData.DiscountAmountTax=g.DiscountAmountTax;this.setDiscountDisplayValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);this.setTaxModified(g.TaxIsModified);var h=RM.util.MathHelpers.roundToEven(this.isTaxInclusive()?g.UnitPrice:this.detailsData.UnitPriceExTax,this.detailsData.UnitPriceAccuracy);this.getItemForm().setValues({UnitPrice:h,Amount:RM.util.MathHelpers.roundToEven(g.Amount,2),Tax:RM.util.MathHelpers.roundToEven(g.Tax,2)});this.ignoreEvents=false;if(b){b()}},this,function(g){alert(g)},\"Working...\")},ignoreControlEvents:function(){if(!this.initShow||this.ignoreEvents){return true}",678510,37,694479,1444,"RM.component.Secure",695927,40,"permissionFor:\"Invoices",707872,181,"Add time",568059,168,701736,148,696470,3693,"display:inline",705424,70,"Time",704907,38,700285,5129,"display:inline",705424,3209,708660,146,709179,57,708861,126,"{1}</span></div></tr>'+(a.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED?\"\":'",709389,37,"row\"><span>Total (excluding tax)",708811,49,"{2",708863,67,"Tax",708811,49,"{3}</span></div></tr>')+'",709389,37,708795,65,"{4",708863,67,709306,61,"{5",708863,56,709426,71,"{6",709500,40,"Currency(a.Subtotal),this.formatCurrency(a.DiscountTotal),this.formatCurrency(a.AmountExTax),this.formatCurrency(a.Tax),this.formatCurrency(a.Amount),this.formatCurrency(a.Paid),this.formatCurrency(a.BalanceDue)))},formatCurrency:function(a){return RM.AppMgr.formatCurrency(a,2",712384,55,709845,1746,"var a=!(",711625,59,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",711588,36,"a);var b=!(",711808,58,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",711772,35,"b",711684,90,711867,171,"slidenavigationview\");RM.AppMgr.showSuccessMsgBox(\"Invoice \"+this.invoiceData.InvCode+\" was Approved.\")},this,function(a,b){RM.AppMgr.showOkMsgBox",712074,1157,"RM.AppMgr.loadStore(this.getHistory",667565,72,714195,372,"secureformpanel\"",714587,42,"component\",height:1},{xtype:\"rmamountfield2",714641,46,"decimalPlaces:4,prefix:\"",606421,50,"enter\"},{xtype:\"rmamountfield2",714781,52,"decimalPlaces:2,prefix:\"$",606421,50,737019,80,663549,35,715069,243,"rmamountfield2\":{focus:\"onFieldFocus",715418,150,"console.log(\"CustomDiscount showView\")",715567,339,"RM.AppMgr.unformatCurrency(b",715945,33,"Focus:function(a){console.log(\"focus\"",715721,40,716149,105,"validateForm:function(){console.log(\"validateForm\");",716563,321,"RM.AppMgr.formatCurrency(",716623,37,716956,2747,",hide:\"onHide",719702,499,"RM.ViewMgr.regFormBackHandler(this.back,this);",720201,713,660922,34,"FormBackHandler()",720912,1714,"RM.AppMgr.showSuccessMsgBox(\"Timesheet saved\"",745757,35,"timesheet\");this.goBack()},this",722638,57,"RM.AppMgr.showOkMsgBox",722700,884,"text",723590,170,",hide:\"onHide",723759,538,"RM.ViewMgr.regFormBackHandler(this.back,this);",724297,403,720624,146,724861,237,660922,34,"FormBackHandler()",720912,67,725163,3889,";RM.AppMgr.itemUpdated(\"expense\"",729051,1337,"var f=Ext.decode(e.responseText);if(f.success){",728987,55,"RM.AppMgr.itemUpdated(\"expense\");this.goBack()},this)}else{RM.AppMgr.showOkMsgBox(f.eventMsg)}},failure:function(e){",630041,34,"e)",730423,5868,"secure",736291,149,",labelWidth:\"4",612683,33,736470,396,",permissionFor:{name:\"SalesPreferences\",action:\"View\"}",736866,228,",listeners:{focus:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)},keyup:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)}}}]",737372,103,737199,1973,"this.getEmail().showValidation(true);",739368,33,"true);if(a.Email==\"\"&&a.Subject",739182,44,739368,47,";RM.AppMgr.showInvalidFormMsg();return b}",739172,65,739353,62,";RM.AppMgr.showInvalidFormMsg();return b",739233,116,";return b",647550,49,739464,278,",\"Sending...\"",739742,1721,"var a=this.getNoteText().getValue();if(a",741461,32,"a)}else{RM.AppMgr.showOkMsgBox(\"Please enter some text for the note\"",744351,38,741559,3580,"itemTypeFld:\"createitem #itemType\",itemNameFld:\"createitem #itemName",745137,125,"createitem:{show:\"onShow\"},",745262,57,"save",658368,33,745358,215,"how:function(){this.initialFormValues",745593,37,647597,33,745603,43,"RM.Consts.ItemStatus.ACTIVE",673432,51,745744,93,"RM.AppMgr.showOkMsgBox(c)})",720911,68,"CreateItem",646256,44,739136,39,"!a.ItemType){this.getItemType",727038,42,"Name",693623,60,"SaleCategoryID){this.getAcctCa",727037,41,727214,44,"goB",707455,34,722205,159,745883,8145,"idProperty:\"AcctCatName\",",754028,7072,"TestScreenC\",\"CoreSettingsC\",\"AppStop",761112,1357,55391,32,".prototype.isNotPreventable=/^(select|a|input|textarea)$/i",762469,682]