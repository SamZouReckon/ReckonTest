["/*f846f2aff4e28985389d71d697c1e3d6ee8cdc56",42,439506,440149,86535,"sv",526686,29811,"20000,VERSION:0.1",556502,587,"mponent.RMAmountField2",494496,32,"rmamountfield2\",config:{clearIcon:false,",494586,37,",listeners:{focus:\"onFieldFocus\",blur:\"onFieldBlur\"},cls:\"rm-flatfield\",prefix:\"\",decimalPlaces:2,trailingZerosUpTo:2",558735,50,";this.editing=false;this.oldValue=null;var b=this.getPrefix();var a=b?(this.getLabel()+\"&nbsp;(\"+b+\")\"):this.getLabel();if(this.config.rmmandatory){a=a",603407,38,"}this.setLabel(a)},getValue:function(){this.showValidation(true);",477264,34,",setValue:function(b){var b=parseFloat(b).toFixed(this.getDecimalPlaces());b=this.handleTrailingZeros(b);var a=this.callParent([b]);if(this.editing&&this.oldValue!=b",487002,32,",this.oldValue);this.fireEvent(\"valueChange\",b,this.oldValue)}this.oldValue=this.getValue();return a},onFieldFocus:function(){this.editing=true},onFieldBlur:function(){var a=this.getValue();if(a==\"\"){this.element.down(\"input\").dom.value=\"\"}else{this.setValue(a)}this.editing=false},onChange:function(b,c,a){return",595247,76,"handleTrailingZeros:function(d){var b=d.indexOf(\".\");if(b!==-1&&this.getTrailingZerosUpTo()>0){var c=false;var a=this.getDecimalPlaces()-this.getTrailingZerosUpTo();d=d.split(\"\").reverse().filter(function(f,e){if(e>=a||f!==\"0\"){c=true;return true}return c}).reverse().join(\"\")}else{d=d.replace(/([0-9]+)\\.0+$/,\"$1\")}return d}});Ext.define(\"RM.component.RMAmount",606971,39,"rmamountfield\",config:{",608682,32,"\"onInputBlur\"},cls:\"rm-flatfield\",currencyMode:true,decimalPlaces:2,trailingZerosUpTo:2,placeHolder:\"",558734,51,672360,98,"this.inputEl=this.element.down(\"input\");this.inputEl.on(\"focus\",this.showInputFld,this);this.displayEl=this.inputEl.insertHtml(\"afterEnd\",'<div class=\"x-input-el x-form-field\" style=\"position:absolute; top:0; background:white;\"></div>',true);this.displayEl.on(\"tap\",this.focus,this);this.initComplete=true;this.showDisplayValue()},getValue:function(){this.showValidation(true);",477264,34,",s",601565,52,"if(this.initComplete){this.showDisplayValue()}return a},applyValu",550709,43,"return RM.util.MathHelpers.roundToEven(a,this.getDecimalPlaces())},onInputBlur:function(){var a=this.getValue();if(!Ext.isNumeric(a)){a=null}if(a){this.getComponent().setValue(RM.util.MathHelpers.roundToEven(a,this.getDecimalPlaces()))}else{this.getComponent().setValue(a)}console.log(this.getValue());this.showDisplayValue()},showDisplayValue:function(){var b=this.getValue();if(Ext.isNumeric(b)){var a;if(this.getCurrencyMode()){a=RM.AppMgr.formatCurrency(b,this.getDecimalPlaces())}else{a=RM.AppMgr.numberWithCommas(b,this.getDecimalPlaces())}a=this.handleTrailingZeros(a);this.displayEl.setHtml(a);this.displayEl.show()}else{this.displayEl.hide();this.displayEl.setHtml(b)}},showInputFld:function(){if(!this.getReadOnly()){this.displayEl.hide();this.inputEl.show();this.editVal=this.getValue()}},onChange:function(b,c,a){if(c!=this.editVal){b.fireEvent(\"change\",this,c,this.editVal);b.fireEvent(\"valueChange\",c,this.editVal)}",595247,76,"handleTrailingZeros:function(d){var b=d.indexOf(\".\");if(b!==-1&&this.getTrailingZerosUpTo()>0){var c=false;var a=this.getDecimalPlaces()-this.getTrailingZerosUpTo();d=d.split(\"\").reverse().filter(function(f,e){if(e>=a||f!==\"0\"){c=true;return true}return c}).reverse().join(\"\")}else{d=d.replace(/([0-9]+)\\.0+$/,\"$1\")}return d",566190,32,"honeField2",494496,32,"rmphonefield2\",config:{clearIcon:false,",494586,37,",listeners:{blur:\"onFieldBlur\"},cls:\"rm-flatfiel",558733,52,672360,100,"getValue:function(){this.showValidation(true);",477264,34,",s",601565,52,"return a},onFieldBlur:function(){var a=this.getValue();if(a==\"\"){this.element.down(\"input\").dom.value=\"\"}",294438,59,672460,73,"});Ext.define(\"RM.component.RMPhoneField3",494496,32,"rmphonefield3\",config:{",608682,32,"\"onBlur\"},",494586,37,608192,33,558734,51,672360,98,"this.inputEl=this.element.down(\"input\");this.displayEl=this.inputEl.insertHtml(\"afterEnd\",'<div class=\"x-input-el x-form-field\"></div>',true);this.displayEl.on(\"tap\",this.showInputFld,this);this.showDisplayValue()},getValue:function(){this.showValidation(true);var a=this.callParent();return a},s",601565,52,"this.showDisplayValue();return a},showDisplayValue:function(){this.inputEl.hide();var a=this.getValue();this.displayEl.setHtml(a);this.displayEl.show()},showInputFld:function(){if(!this.getReadOnly()){this.displayEl.hide();this.inputEl.show();this.editVal=this.getValue();this.focus()}},isValidPhoneNr:function(b){var a=parseFloat(b,10);return(isNaN(a))?false:true},onBlur:function(){var a=this.getValue();if(this.isValidPhoneNr(a)){this.showDisplayValue(",691055,34,"Invalid phone number\",function(){this.setValue(\"\");this.showDisplayValue()},this)}",595247,75,"});Ext.define(\"RM.view.TestScreen\",{extend:Ext.Panel,xtype:\"testscreen",575232,86,"cls:\"rm-topbartitle\",html:\"Test Screen\"},",639727,33,604335,83,"estScreenForm\",defaults:{",609327,34,"},items:[{xtype:\"textfield\",label:\"Test1\",name:\"Test1\"},{xtype:\"textfield\",label:\"Test2\",name:\"Test2\",placeHolder:\"enter\"},{xtype:\"textfield\",label:\"Test3\",name:\"Test3\"},{xtype:\"rmamountfield\",label:\"Quantity\",name:\"Quantity\",labelWidth:120,rmmandatory:true,readOnly:false,decimalPlaces:4,currencyMode:false,listeners:{change:function(b,c,a){console.log(\"rmamountfield2 change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"rmamountfield\",label:\"Item Price\",clearIcon:true,name:\"ItemPrice\",labelWidth:120",738169,37,",readOnly:false,decimalPlaces:8,listeners:{change:function(b,c,a){console.log(\"rmamountfield2 change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"textfield\",label:\"Test5\",name:\"Test5\"},{xtype:\"rmphonefield2\",label:\"Bus Phone\",labelWidth:120,name:\"BusPhone\"",738169,37,",readOnly:false,listeners:{change:function(b,c,a){console.log(\"rmphonefield change newValue=\"+c+\", oldValue=\"+a)}}},{xtype:\"textfield\",label:\"Test6\",name:\"Test6\"}]}]}",557069,40,"alternateClassName:\"RM.PermissionsMgr\",",593086,45,557154,276,"pprove",557488,34,"Approve\")},canAddEdit:function(a){if(a==\"Items\"){return false}",557449,187,"canSelect",557488,34,"Selec",557631,113,"alternateClassName:\"RM.EventMgr\",",557744,1226,"setViewData:function(a){",559248,226,"'+RM.AppMgr.formatCurrency(a.NetPositionIncome,0,true",559549,111,"'+RM.AppMgr.formatCurrency(a.NetPositionExpenses,0,true",559737,118,"'+RM.AppMgr.formatCurrency(a.NetPositionIncome-a.NetPositionExpenses,0",559925,1240,"'+RM.AppMgr.formatCurrency(d.InvoicesOverdueAmount,0",561609,55,561272,288,"'+RM.AppMgr.formatCurrency(d.BillsOverdueAmount,0",561609,492,562260,1615,"c){try",563877,37,"c==null||c",562270,33,564124,106,"c.length;a++){this.addBudget(c[a],a)}this.paintChart(c)}catch(b){console.log(\"**** Exception in BudgetOverview setViewData \"+b.message)}",564285,1736,"scrollable:\"vertical\",cls:\"rm-dashboard",566060,129,578555,37,"hidden:true,itemId:\"noaccesscont\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-noaccess-icon.png\",width:75,height:69,margin:\"25px auto\"},{xtype:\"component\",html:\"You do not have enough access </br>rights to view the dashboard\",cls:\"rm-update-title\",margin:\"-5 0 30 0\"",673071,34,"tap the top left button to </br>gain access to other parts of this book.\",cls:\"rm-update-msg\",margin:\"20 0 20 0",621566,34,"SecurePanel\",{extend:Ext.Panel,xtype:\"secure",594601,180,"View(a)){RM.AppMgr.showErrorMsgBox(\"You are not permitted to view this screen\"",606889,37,654495,37,566489,1252,"sv",567743,47," width: 7px; height: 6",567787,605,"sv",567743,47," width: 7px; height: 6",568438,545,"Cls:\"rm-sortsearchbt",568976,42,"sv",569020,395,"sv",569417,60,"sv",569479,124,"sv",569605,83,577116,532,"Invoices\",{extend:RM.component.SecurePanel,xtype:\"invoices\",config:{permissionFor:\"Invoices",604080,60,569820,99,577833,35,"\"Invoices",592287,39,703438,47,"Due date\",value:\"duedate",570765,41,"Customer\",value:\"customer",621566,34,566219,233,",lastUpdatedDateFormat:\"d/m/Y h:iA\",",570494,6622,"view.Contacts\",{extend:RM.component.SecurePanel,xtype:\"contacts\",config:{permissionFor:\"Contacts",604080,60,577759,872,"Mobil",578633,86,"0.1",578722,309,"RM.HomeSettingsMgr.getSetting(\"PrivacyPolicyUrl\")",579255,54,579111,118,"RM.HomeSettingsMgr.getSetting(\"TermsUrl\")",579255,178,"RM.HomeSettingsMgr.getSetting(\"AppInfoUrl\")",579459,1111,"Cashbook",580573,154,580735,110,581220,36,580855,116,581220,36,"expenses\",index:\"ExpenseClaim",581005,95,581220,36,581110,1081,"sv",658670,61,582254,404,"sv",582660,442,"alternateClassName:\"RM.ViewMgr\",",583102,325,"&&RM.AppMgr.isLoggedIn()&&this.dashboardShown",584224,35,"appBackStack.pop();this.showDashboard(b);",583429,520,"document.activeElement.blur();",583949,92,"this.showBackStack(\"onDeviceBack\");",583949,66,"else{if(this.formBackHandler){this.formBackHandler.call(this.formB",584090,112,585319,33,"Cashbooks\")){this.confirmExitApp",584186,40,"RM.AppMgr.isLoggedIn()&&this.dashboardShown",584224,35,584310,66,";",584254,50,584188,36,"){this.confirmExitApp()}else{this.back()}}}}}}},confirmExitApp",741991,64,584466,64,584551,152,"regFormBackHandler:function(b,a){this.formBackHandler=b;this.formBackHandlerScope=a},deRegFormBackHandler:function(){this.formBackHandler=null;this.formB",584681,509,"dashboardShown=true;",584254,65,585250,1135,"console.log(\"stack length = \"+this.appBackStack.length",586383,2451,"svg\",iconCls:\"rm-backbtniconcls",697856,56,588893,610,"svg\",iconCls:\"rm-backbtniconcls",697856,56,589562,485,"svg\",iconCls:\"rm-backbtniconcls",697856,56,590106,76,705184,52,"if(RM.PermissionsMgr.canAddEdit(\"Items\")){this.add(",664426,32,590215,49,")}",590316,920,"a){if(!Ext.fly(a.target).hasCls(\"x-clear-icon\")){this.fireEvent(\"tap\",this,a)}",591264,461,672461,73,"getValue:function(){this.showValidation(true);",477264,49,591952,213,"svg\",iconCls:\"rm-backbtniconcls",691376,197,608032,34,592399,687,"alternateClassName:\"RM.Selectors\",",593086,1450,"re.HomeSettingsMgr\",{alternateClassName:\"RM.HomeSettingsMgr\",singleton:true,load",648021,34,"s(\"HomeSettings\",null,function(a){this.homeSettings=a},this,function(a){})},getSetting:function(b){for(var a=0;a<this.homeSettings.length;a++){if(this.homeSettings[a].Key.toLowerCase()==b.toLowerCase()){return this.homeSettings[a].Value}}return null}});Ext.define(\"RM.core.CashbookMgr\",{alternateClassName:\"RM.CashbookMgr\",singleton:true,config:{cashbookId:null,currentCashbook:null},getTaxPreferences:function(){return this.getCurrentCashbook().TaxPreference},getSalesPreferences:function(){return this.getCurrentCashbook().SalesPreferences},loadLastCashbook:function(a){if(this.getCashbookId()){this.setCashbook(this.getCashbookId());if(a){a()}}",628524,72,"setCashbookId(a.CashBookId)",628619,45,"c",628665,64,628740,178,"_currentCashbook.Dashboard",628931,65,"c,a,b){RM.AppMgr",629009,50,"c},function(d){this.setCashbookId(c);this.setCurrentCashbook(d[0",626768,33,"GSTCodes\").setData(d",629124,75,"d[0].AccountingCategories);if(d[0].AmountTaxStatuses",629072,32,"TaxStatuses\").setData(d[0].AmountTaxStatuses)}else{",626771,109,"abl",626942,37,"INCLUSIVE,Name:\"Include tax",626943,57,"de tax\"}])}",626654,50,"d",629277,48,"this.getCurrentCashbook().Permissions)",629414,48,577098,34,594550,368,594793,39,"d){var c=d.config.permissionFor;if(c){var b=RM.PermissionsMgr.canDo(c.name,c.action);if(c.invoke){d[c.invoke].apply(d,[b])}else{if(c.invokeWithInverse){d[c.invoke].apply(d,[!b])}else{d.setHidden(!b)}}}})},scrollShowField:function(e,b,c,a){if(this.keyCb&&this.keyFldEleId!==b){this.keyCb.onFieldLostFocus.call(this.keyCb)}this.keyFldEleId=b;this.keyCb=a;var d=this;d.clearScrollTimer();d.scrollTimer=window.setTimeout(function(){d.scrollTimer=null;d.getScrollable().getScroller().scrollTo(0,e.element.dom.offsetTop,true)},300);this.showKeyPad(c)},showKeyPad:function(b){if(!this.keypad){this.rootContainer=this.getRootContainer(this);this.rootContainer.element.on({tap:this.handleTapInEntireScreen,scope:this})}if(!this.keypad||b!==this.keypadType){var a=",748527,41,"keypadType:b,listeners:{keytap:this.onKeyTap,scope:this}};this.keypad=this.add(a)}else{this.keypad.show()}this.keypadType=b;",567119,35,"Keypad,this)},hideKeypad:function(){this.keypad.hide();this.scrollTop();this.keyCb.onFieldLostFocus.call(this.keyCb",567004,33,"onKeyTap:function(a){this.keyCb.onKeyTap.call(this.keyCb,a);if(a===\"done\"){this.hideKeypad()}if(a===\"cancel\"){this.hideKeypad()}},handleTapInEntireScreen:function(a){if(this.keyCb&&this.keyFldEleId!==a.target.id){this.keyCb.onFieldLostFocus.call(this.keyCb);this.hideKeypad();this.keyCb=null}},getRootContainer:function(a){while(a.getParent()){a=a.getParent()}return a},scrollTop:function(){var a=this;a.clearScrollTopTimer();if(!a.scrollTimer){this.scrollTopTimer=window.setTimeout(function(){a.getScrollable().getScroller().scrollTo(0,0,false)},300)}},clearScrollTimer:function(){if(this.scrollTimer){window.clearTimeout(this.scrollTimer)}},clearScrollTopTimer:function(){if(this.scrollTopTimer){window.clearTimeout(this.scrollTopTimer",654493,32,715110,140,"itemId:\"doneContainer",715248,41,"40,cls:\"rm-keypad-topbar\"},items:[{text:\"CANCEL\",itemId:\"cancel\",},{itemId:\"bar\",},{text:\"DONE\",itemId:\"done\",",715646,120,653278,290,715624,59,"itemId:\"dotContainer",715248,85,".\",itemId:\"dotBtn\"},{text:\"\",itemId:\"blankBtn\",hidden:true},{text:\"0\",itemId",653719,55,",itemId:\"backspace\"}]}]},initialize:function(){if(!this.config.keypadType){var b=this.getComponent(\"doneContainer\");b.setHidden(true)}if(this.config.keypadType===\"phone\"){var c=this.getComponent(\"dotContainer\");var a=c.getComponent(\"dotBtn\");var d=c.getComponent(\"blankBtn\");d.setHidden(false);a.setHidden(true",554766,32,"KeyTap:function(a,b){this.fireEvent(\"keytap\",(a.getText()?a.getText().toLowerCase():a.getItemId().toLowerCase()));b.stopPropagation()",566190,32,"honeField\",{extend:RM.component.ExtTextField,xtype:\"rmphon",595542,32,"this.isInitializing=true;this.readOnlyField=a.readOnly||",595586,48,558735,50,";this.on(\"tap\",this.onFieldFocus,this);this.setReadOnly(true);this.isInitializing=false},onFieldFocus:function(b,a){console.log(this.getId()+\" onFieldFocus\");if(this.fieldMaskEl){this.clearCursorBlinkTimer()}if(this.readOnlyField){return}this.fieldMaskEl=a.target.nextElementSibling;this.showCursor();this.owningPanel=b.up(\"panel\");this.revertBackVal=this.getValue();this.owningPanel.scrollShowField(b,a.target.id,\"phone\",this)},onFieldLostFocus:function(){console.log(this.getId()+\" onFieldLostFocus\");this.clearCursorBlinkTimer();this.fireValueChangeEvent(this.getValue())},onKeyTap:function(b){if(b===\"bar\"||b===\"blankbtn\"){return}if(b===\"done\"){return}if(b===\"cancel\"){this.setValue(this.revertBackVal);return}var d=this.getValue();var a=d.toString();var c=a.length;if(b===\"backspace\"){if(c>0){a=a.slice(0,-1);this.setValue(a)}}else{this.setValue(a+b)}},applyValue:function(b,a){var c=b?b.toString():\"\";if(!a&&a!==\"\"){this.valBeforeChange=c}return c},showCursor:function(b){var a=this;a.cursorBlink",631503,36,"if(a.myCursorOff){a.fieldMaskEl.style.cssText=\"display: none !important;\"}else{a.fieldMaskEl.style.cssText=\"\"}a.myCursorOff=!a.myCursorOff},500)},clearCursorBlinkTimer:function(){console.log(this.getId()+\" clearCursorBlinkTimer\");if(this.cursorBlinkTimer){window.clearTimeout(this.cursorBlinkTimer)}this.fieldMaskEl.style.cssText=\"display: none !important;\"},setReadOnly:function(a){this.callParent([true]);if(this.isInitializing){return}this.readOnlyField=a},getReadOnly:function(){return this.readOnlyField},fireValueChangeEvent:function(c){var b=parseFloat(c)||\"\";var a=parseFloat(this.valBeforeChange)||\"\";if(b!=a){this.fireEvent(\"valueChange\",b,a",672220,34,594950,207,"this.element.on(\"tap\",function(b){if(Ext.fly(b.target).hasCls(\"x-clear-icon\")){this.setValue(null)}},this);var a=this.getPhonePicker();if(a){a.setListeners({",602650,100,",scope:this}",595155,307,",getValue:function(){this.showValidation(true);",477264,49,672238,361,",getValue:function(){this.showValidation(true);",477264,49,"RM.view.ContactDetail\",{extend:RM.component.Secure",596418,36,"permissionFor:\"Contacts",604080,60,596512,86,"svg\",iconCls:\"rm-backbtniconcls",604219,36,596637,575,"labelWidth:\"10em",597210,231,597570,814,"rmphonefield2",598395,170,"rmphonefield2",598576,307,"rmphonefield2",598894,168,"rmphonefield2",598576,47,599120,60,"xt",599179,50,",labelWidth:\"4em",599228,505,"alternateClassName:\"RM.ContactsMgr\",",593086,32,624860,132,599897,1571,"if(!c){return}",601468,998,"1",602467,360,"how();",602814,38,602871,60,"a?this.showValidation(true):this.showValidation(false);",602931,58,"callParent([valueInField]",595903,35,"duration",595247,75,603197,396,"this",296062,37,";return b},showClearIcon:function(){var a=this;if(a.getClearIcon()&&!a.getDisabled()&&!a.getReadOnly()){a",293817,60,"a},resetPicker:function(){var a=this;",603626,240,"b){if(!this.config.rmmandatory){this.addClearButton(b);this.clearButton.setHidden(!a.getValue())}",602667,83,",scope:this}})},updateValue",279215,39,595247,76,"getValue:function(){this.showValidation(true);",477264,34,",addClearButton:function(a){if(this.clearButtonAdded){return}var b=a.getToolbar();var c=",656395,33,"e,f){var d=e.up(\"datepicker\");d.fireEvent(\"change\",d,null);d.hide()},text:\"Clear\"};this.clearButton=b.add(c);this.clearButtonAdded=true",595461,930,"TimeSheetDetail\",{extend:RM.component.Secure",604019,197,"svg\",iconCls:\"rm-backbtniconcls",604219,179,"secure",604398,2026,"alternateClassName:\"RM.TimeSheetsMgr\",",593086,32,606456,496,"view.ExpenseDetail\",{extend:RM.component.Secure",607437,170,"svg\",iconCls:\"rm-backbtniconcls",604219,42,607653,284,"svg\",iconCls:\"rm-btniconsize",607940,43,"secure",607983,598,"rmamount",608590,70," rm-cursor-blinkbg",608660,38,"decimalPlaces:2,prefix:\"$\"",608784,855,"alternateClassName:\"RM.ExpensesMgr\",",593086,32,609671,752,"TaxStatus:function(a){this.taxStatus",610463,53,"nvoiceDate:function(a){this.invoiceDate",610508,175,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",610699,520,"(b.LineText||b.Description||b.ItemName)",611232,262,"svg\",height:30,padding:0,iconCls:\"rm-lineitemcrossbg\",margin:\"-7",611529,320,"{taxStatus:this.taxStatus,invoiceDate:this.invoiceDate}",611865,536,"(c.LineText||c.Description||c.ItemName)",612414,262,"RM.component.Secure",612680,36,"permissionFor:\"Invoices",604080,60,747920,62,"svg\",iconCls:\"rm-backbtniconcls",764528,43,"nvoice",604271,64,612952,58,"sv",613012,108,596825,32,"Invoices",613129,280,613423,189,"clearIcon:true",613611,1751,",listeners:[{element:\"element\",event:\"tap\",fn:function(){this.toggleOptions()},scope:this}]",615362,1184,"svg\",iconCls:\"rm-backbtniconcls",697856,50,616599,54,"secure",616653,117,"svg\",iconCls:\"rm-btniconsize\",iconAlign:\"left\",permissionFor:\"Invoices",616790,1398,587886,38,618509,55,"},{text:\"Time\",itemId:\"time\",permissionFor:\"Timesheets_BillEntry\"",618594,37,"permissionFor:\"ExpenseClaims_BillEntry\"}],",618187,55,"d",624412,33,618323,95,"e){this.hide();a.call(d,e.getItemId())},scope:this}});var c=0;this.items.forEach(function(e){if(!e.permissionFor||RM.PermissionsMgr.getPermission(e.permissionFor)){b.add(e);if(e.itemId){c+=1}}});if(c>1){this.popup=b;b.show();",567119,41,"}else{a.call(d,this.items[1].itemId)}",603904,47,618701,434,"},",564879,35,"){var e=this.getItemId();if(e==5||e==10||e==20){e=e+\"%\"}a.call(b,e",619196,45,619358,694,"svg\",iconCls:\"rm-backbtniconcls",748015,37,620092,128,"secure",620220,45,"ext",620265,62,"extselectfield\",label:\"Item type\",itemId:\"itemT",620353,165,"itemId:\"itemName\",labelWidth:\"7em",620516,92,620723,206,"rmamount",620935,38,"cls:\"rm-flatfield rm-cursor-blinkbg",608660,38,"decimalPlaces:2,prefix:\"$\",border:\"0",614077,35,"ccount\",itemId:\"account",621067,226,692319,33,592736,99,"autoSelect:false,clearIcon",621450,1761,"sv",623213,176,"alternateClassName:\"RM.InvoicesMgr\",",593086,32,623421,138," RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled?\"APPROVED\":\"UN",623631,37,623601,100,"getInitialInvoiceStatus:function(){if(RM.CashbookMgr.getSalesPreferences().ApprovalProcessEnabled){return RM.Consts.InvoiceStatus.DRAFT}else{return",623519,33,"}",623699,235,"this.getInitialInvoiceStatus()",623963,189,"b,e",585070,58,"CustomerInvoicesC\");a.showView(c,d,b",624241,2051,"util.MathHelpers\",{singleton:true,roundToEven:function(d,e){e=e||0;var h=Math.pow(10,e);var f=+(d*h);var g=Math.floor(f);var c=f-g;var a;var b=1e-8;if(c-b<0.5&&c+b>0.5&&g%2==0){a=g}else{a=Math.round(f)}return a/h",626273,89,"isUserLoggedIn=false;Ext.Ajax.setDefaultHeaders({\"X-APIV\":RM.Consts.Api.VERSION})",626403,251,627050,36,".init(a)",627152,36,".init(a)",627270,40,".init(a)",627388,50,"RM.HomeSettingsMgr.load",627448,765,"RM.CashbookMgr.getCashbookId()){RM.CashbookMgr.loadLastCashbook(function(){RM.ViewMgr.back()})}else{RM.CashbookMgr",628326,169,"RM.CashbookMgr.selectCashBook()}},this",629460,177,"RM.CashbookMgr",629641,49,"RM.ViewMgr.clearBackStack();this.logoutFromServer();this.login",629711,166,";this.login",629875,32,"if(this.isUserLoggedIn){",630983,37,629944,84,"isUserLoggedIn=false}",630035,312,"s",630347,289,630639,174,630838,36,"getServerRec:function(b,e,a,c,d){return this.getServerRecs(b,e,function(f){if(a){a.call(c,f[0])}},c,d",630871,477,"&&j.status!=401",631348,345,",e,h,g){var f=this;f",631707,34,"k,j,l){f",631434,32,631781,33,"k,j,l",631819,36,"k,j,l){if(l){c(k,j,l)}},scope:f",631886,200,"c",632087,178,"c",632266,35,"c",632302,128,"c.status==412){var a=Ext.decode(c.statusText);this.showAppStop(a)}else{var b=c.statusText?\" \"+c.statusText:\"\";",632443,93,"c.status+b",632561,119,"&&this.appTypeId!==RM.Consts.App.WEB_CONTAINER){b=\"production\"}this.apiLocation=b;if(b==\"staging",632737,33,".reckoncloud.com.au/api\"}else{if(b==\"production\"){this.baseApiUrl=\"https://mobile",632772,32,"preproduction\"){this.baseApiUrl=\"https://preprodmobile",632772,34,"v",632731,33,632921,128,633117,79,"this.baseApiUrl=\"/api\"",633501,1685,"AppStop",625006,71,"AppStopC\");c.showView(a,b",635179,138,"sv",635319,92,"5",635412,391,"sv",635805,52,"sv",635319,72,"e,height:55,width:65",635951,1458,"b,a){if(Ext.isNumber(b)){b=b.toFixed(a||2)}return b?b",637562,34,"\\.",637497,99,"\\.)/g,\",\")},formatCurrency:function(c,b,e){if(isNaN(c)){c=0}var a=(c<0);var d=Math.abs(RM.util.MathHelpers.roundToEven(c,b));c=\"$\"+d.toFixed(b).replace(/\\B(?=(\\d{3})+\\.)/g,\",\");if(a&&e){return\"(\"+c+\")\"}return(((a)?\"-\":\"\")+c)},unformatCurrency",617370,33,"()?(-)?(\\$)?(,)?(\\))?/g,\"",637608,893,";Ext.create(\"RM.view.TestScreen\",{xtype:\"testscreen\",fullscreen:true}",640576,32,"a",656640,32,638565,97,"controller.TestScree",661600,45,"testScreen:\"testscreen\",testScreenForm:\"testscreen #testScreenForm\",},control:{testscreen:{show:\"onShow\"},\"testscreen #save\":{tap:\"save\"}}",648763,32,"TestScreenForm().getValues();console.log(Ext.encode(a))},onShow:function(){var a={Test1:\"A Text field\",Quantity:25.12345,ItemPrice:52625.123456789,BusPhone:\"072367672\"};this.getTestScreenForm().setValues",651553,36,638676,233,"svg\",iconCls:\"rm-backbtniconcls",638912,344,"Production\",value:\"production\"},{text:\"Pre Production\",value:\"preproduction\"},{text:\"Staging\",value:\"staging",639324,50,639300,34,639406,35,639498,1043,"});Ext.define(\"RM.view.AppStop\",{extend:Ext.Panel,xtype:\"appstop\",config:{",610192,32,658512,96,578553,39,"layout:\"vbox\",align:\"center\",items:[{xtype:\"img\",src:\"resources/images/icons/rm-update-icon.svg\",height:40,width:40,margin:\"25px auto\"},{xtype:\"component\",html:\"A new update has been released!\",cls:\"rm-update-title\",margin:\"-14 0 5 0\"},{xtype:\"component\",html:\"Click below to update for security & stability.\",cls:\"rm-update-msg\",margin:\"0 0 25 0\"},{xtype:\"button\",itemId:\"update\",text:\"Update app >\",cls:\"rm-photopreviewbtn",597856,71,739487,33,"AppStop",671440,44,"appStop:\"appstop\"},control:{\"appstop #update\":{tap:\"onUpdate\"}}},showView:function(a){this.stopErr=a;RM.ViewMgr.showPanel2({xtype:\"appstop\"})},onUpdate",437371,34,"window.open(this.stopErr.AndroidUpgradeUrl,\"_system\")}if(Ext.os.is.iOS){window.open(this.stopErr.IosUpgradeUrl",696206,32,640607,2808,"svg\",iconCls:\"rm-backbtniconcls",697856,56,"Module Signup",737952,49,643536,3376,",hide:\"onHide",646911,573,"RM.ViewMgr.regFormBackHandler(this.back,this);",647484,178,685001,44,647716,293,662088,34,"FormBackHandler()",685686,58,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getContactForm())",648006,206,";if(Ext.isDefined(b.SaveSupport)&&!b.SaveSupport){this.setEditable(false)}if(b.ViewNotice){RM.AppMgr.showOkMsgBox(b.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);this.goBack(",648238,327,"!a.Description",648582,138,"a.Email!==\"\"&&",741145,170,648765,175,"a.IsActive=true",648939,217,"RM.AppMgr.showOkMsgBox",649161,1025,"ranchName",674796,32,650185,267,650108,54,650508,49,"console.log(this.getBranchName().getValue());",648511,36,"this.getBranchName().getValue()",650175,35,650590,1172,"btniconcls",592112,53,"sv",638911,43,651860,2861,"sv",654723,495,"sv",655220,627,"sv",658670,61,673081,35,655945,996,"console.log(\"EnterPin onShow\");",656941,349,";RM.AppMgr.logoutFromServer",657288,477,"RM.AppMgr.showOkMsgBox",657770,898,"sv",658670,143,"M",658814,975,";RM.AppMgr.logoutFromServer(",659788,542,"RM.HomeSettingsMgr.getSetting(\"SignupUrl\")",660373,623,"RM.AppMgr.showOkMsgBox",661001,375,"svg\",iconCls:\"rm-backbtniconcls",748015,58,661437,2095,663560,391,",function(a){if(a.length==0){RM.AppMgr.showOkMsgBox(\"You do not have any books to select.\",RM.AppMgr.lock,RM.AppMgr)}},this,null,null,function(){RM.AppMgr.login()}",663951,344,"svg\",iconCls:\"rm-backbtniconcls",697856,56,"Custom",589568,64,664424,2129,"svg\",iconCls:\"rm-backbtniconcls",589520,42,"Budget",612895,37,666641,1510,",zeroLineItemsCheckBox:\"budgetlineitems rmcheckbox\"},control:{budgetlineitems:{show:\"onShow\"},",668162,113,"c,b){this.budgetId=c;this.budgetName=b;",668280,90,"},onShow:function(){this.hideZeroLineItems=this.hideZeroLineItems||false;this.getBudgetTitle().setHtml(this.budgetName);this.getZeroLineItemsCheckBox().setValue(this.hideZeroLineItems);var a",668409,42,"a",670656,40,"BudgetLineItems\"));a.filter(\"BudgetId\",this.budgetI",668531,54,"hideZeroLineItems=a",668650,38,"var a",668409,42,"a.removeAll();a.filter(\"IncludeZeroItems\",!this.hideZeroLineItems);RM.AppMgr.loadStore(a",675744,66,668814,2849,",noaccessCont:\"dashboard #noaccess",671658,295,560553,33,"PAndLReport\"",560507,50,"c",560558,40,"d=",562102,49,";var b=",563915,36,";if(this.getNoaccessCont()){this.getNoaccessCont().setHidden(a||e||c||d||b)}if(this.getDashboardCont()){if(a",671979,55,"}if(e||c){",672035,48,"}if(d){",672084,65,"}if(b){",672150,72,"this.getNetPosition().setHidden(!a);this.getAlerts().setHidden(!(e||c));this.getTopExpenses().setHidden(!d);this.getBudgetOverview().setHidden(!b)}",672598,372,"svg\",iconCls:\"rm-backbtniconcls",697856,56,673029,420,738143,46,673504,1364,"&&a",674864,44,674926,48,";RM.AppMgr.showInvalidFormMsg();return c}",674860,114,";RM.AppMgr.showInvalidFormMsg();return c",674974,520,"your password reset details",675531,268,"view.CustomerInvoices\",{extend:RM.component.Secure",569723,39,"permissionFor:\"Invoices\",layout:\"fit\",items:[{xtype:\"titlebar\",docked:\"top\",title:\"A Title\",itemId:\"title",619952,100,"svg\",iconCls:\"rm-backbtniconcls\",align:\"left\"},{text:\"ADD\",itemId:\"add\",align:\"right\",",577833,35,"\"Invoices",592287,39,703438,47,"Due date\",value:\"duedate",570765,33,621568,39,"sLis",697678,35,"slist\",config:{layout:\"fit\",control:{list:{itemtap:\"onItem",621776,36,"ustomerId=this.config.customerId;",677925,74,"var b=(this.config.sortVal==\"duedate\");",719488,36,"Invoices\");if(b",669479,34,"}else{a.setGroupField(null)}this.loadList(",677997,89,"b",678090,137,681881,210,"reload:function(){this.loadList()},setS",680580,53,"clearSearch",680644,47,",loadList",734144,48,"Invoices",732896,44,"Invoices\")",681583,124,720592,166,682090,192,"RM.AppMgr.showOkMsgBox(b)})",678278,2024,"Customer",680302,52,"C",675871,43,"Title:\"customer",680418,32,675958,42,"\"customerinvoices #back\":{tap:\"back\"},",676000,88,"\"onSearch\",searchclear:\"onSearchClear",676332,146,"c,d,b,e){this.invoicesTitle=c;this.customerId=d;this.customerName=b;",676480,92,681214,35,"e",713246,32,"oicesTitle().setTitle('<span style=\"text-shadow:none; font-weight:normal;\">'+this.invoicesTitle+\"</span>\"",681439,54,"CustomerInvoices()){this.activeList.reload()}",706823,35,"CustomerInvoices();a.removeAt(2);this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false,customerId:this.customerId})},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",682291,179,743376,54,"mponent.CustInvSummaryLis",715979,32,"invsummarylist\",config:{layout:\"fit\",control:{list:{select:\"onItemSelect",568736,63,570098,395,");",719488,36,"CustomerInvoices",732896,44,"CustomerInvoices\"));RM.AppMgr.loadStore(a",665501,72,676828,32,677033,70,"reload:function(){this.loadList()},setS",680580,53,"clearSearch",680644,47,",loadList",734144,48,"Invoices\"",720447,32,681674,33,"RM.AppMgr.loadStore(a);",677215,216,680291,63,"Invoices:\"invoices",680433,51,680514,72,"\"onSearch\",searchclear:\"onSearchClear\"},\"",676296,40,680732,134,"){",680934,51,640240,45,"if(!this.dataLoaded){this.onSort(\"duedate\");this.dataLoaded=true}else{this.activeList.reload()}",681440,43,"){this.activeList.reload()}",706823,35,"Invoices();a.removeAt(2);if(b==\"customer\"){this.activeList=a.add({xtype:\"custinvsummarylist\"})}else{this.activeList=a.add({xtype:\"invoiceslist\",sortVal:b,isShowCustomer:false})}},onSearch:function(a){this.activeList.setSearch(a)},onSearchClear:function(){this.activeList.clearSearch(",677100,94,"});Ext.define(\"RM.util.FormUtils\",{singleton:true,makeAllFieldsReadOnly:function(a){a",594797,122,708272,35,708317,57,682834,669,",hide:\"onHide",683502,228,"change",683742,309,",dateFld:{change:\"onInvoiceDateChange",676367,111,"c,f,a,e){this.lineItemsDirty=false;",647165,33,"f?f",684204,37,"e",721764,43,"c){var d=new Date();d.setHours(0,0,0,0);",684266,57,"InvoicesMgr.getInitialInvoiceStatus(),AmountTaxStatus:RM.CashbookMgr.getTaxPreferences().SalesFigures,Date:d,Discount:\"None\",Amount:0,DiscountTotal:0,Tax:0,Subtotal:0,Paid:0,BalanceDue:0",684395,76,"&&RM.PermissionsMgr.canAddEdit(\"Invoices\"",684470,108,"RM.ViewMgr.regFormBackHandler(this.back,this);",684578,134,684828,273,"this.detailsData;if(b.CustomerId){",687310,34,685388,44,"applyTaxRules",687646,32,685456,127,";this.getLineItems().setInvoiceDate(this.getDateFld().getValue());this.getLineItems().setTaxStatus(b.AmountTaxStatus",684705,66,"b.Status));this.dataLoaded=true}}",662086,36,"FormBackHandler(",681439,46,685004,36,685686,58,"if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getInvoiceForm())}",685887,38,"applyTaxRules:function(){var b=this.getAmountsFld();var a=RM.CashbookMgr.getTaxPreferences();b.setReadOnly(!this.isEditable||!a.AllowTaxEdit);if(this.isCreate){if(a.IsTaxTracking){b.setHidden(false);b.setValue(a.SalesFigures)}else{b.setHidden(true);b.setValue(RM.Consts.TaxStatus.NON_TAXED)}}else{var c=a.IsTaxTracking||b.getValue()!==RM.Consts.TaxStatus.NON_TAXED;b.setHidden(!c)",648006,55,685977,49,684707,64,"c.Status));",686026,282,"RM.AppMgr.formatCurrency",686330,54,"c.Notes=c.Notes?c",722429,51,"c);this.applyTaxRules",687646,32,"c.AmountTaxStatus;if((Ext.isDefined(c.SaveSupport)&&!c.SaveSupport)||this.detailsData.Paid>0){this.isEditable=false;this.setEditable(false)}",686446,59,"CustomerId(c.CustomerId);b.setTaxStatus(c.AmountTaxStatus);b.setInvoiceDate(c.Date",686649,63,684856,42,"false);this.dataLoaded=true;if(c.ViewNotice){RM.AppMgr.showOkMsgBox(c.ViewNotice)}},this,function(a){RM.AppMgr.showOkMsgBox(a);",686730,169,"this.goBack();RM.AppMgr.showOkMsgBox",686904,716,"c,b,a){if(!this.dataLoaded){return}this.detailsData.AmountTaxStatus=b;this.previousAmountTaxStatus=a;this.calculateBreakdown();this.getLineItems().setTaxStatus(b)},onInvoiceDateChanged:function(b,c,a){if(!this.dataLoaded){return}this.calculateBreakdown();this.getLineItems().setInvoiceDate(c",687689,476,"d",690425,35,"var c",688202,39,"b={CustomerId:d.CustomerId,InvoiceDate:d.Date,AmountTaxStatus:d",688280,87,"d",695950,41,"entage=d",690637,34,"d",696040,44,"d.Discount.replace(\"$\",\"\")}}if(b.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED){c=c.map(function(e){e.TaxGroupId=null;e.Tax=null;return e})}b.LineItems=c.map(function(e){return{InvoiceLineItemId:e.InvoiceLineItemId,ItemType:e.ItemType,ItemID:e.ItemId,Proje",746461,37,"UnitPriceExTax:e.UnitPriceExTax,DiscountAmount:e.DiscountAmount,DiscountAmountExTax:e.DiscountAmountExTax,DiscountAmountTax:e.DiscountAmountTax,DiscountPercentage:e.DiscountPercentage,TaxGroupID:e.TaxGroupId,Tax:e.Tax,TaxIsModified:e.TaxIsModified}}",690878,34,"Calc\",true,b,function a(e){var l=e[0];var h=this.detailsData;h.Amount=l.TotalIncludingTax;h.AmountExTax=l.TotalExcludingTax;h.Tax=l.Tax;h.Subtotal=l.Subtotal;h.DiscountTotal=l.Discount||0;h.Paid=l.AmountPaid;h.BalanceDue=l.BalanceDue;var g=this.getLineItems();g.removeAllItems();for(var f=0;f<c.length;f++){var k=c[f];var j=null;Ext.Array.some(l.Items,function(m){if(m.InvoiceLineItemId===k.InvoiceLineItemId){j=m;return true}});if(!j){c[f]=null}else{Ext.apply(k,j)}}c=Ext.Array.clean(c);g.setTaxStatus(b.AmountTaxStatus);g.addLineItems(c",689406,42,"e){RM.AppMgr.showOkMsgBox(e);this.goBack(",689458,966,"c",690425,35,"c",690461,51,"1;c.LineItems.forEach(function(d){d.lineNo=a;if(d.IsNew){delete d.InvoiceLineItemId}a+=1}",729595,40,"delete b.DiscountPerc;delete b.DiscountAmount;if(b",695950,42,"b",690637,34,"b",696040,44,"b",690717,34,"b.Discount;b",690763,42,"b)){if(c",690813,64,"b",690878,51,"b",690930,111,"d,e){RM.AppMgr.showOkMsgBox(e",691053,100,606952,220,"this.on(\"keyup\",this.valChange);this.on(\"blur\",this.numberPrecision",595246,216,",valChange:function(a,f,c){var g=this.getValue();console.log(f.browserEvent.keyCode);if(!(47<f.browserEvent.keyCode<58||f.browserEvent.keyCode==190)){f.stopEvent()}if(g===null||g===undefined){console.log(g);return}var b=g.toString();var d=b.length;if(this.config.decimalPlaces&&b.indexOf(\".\")!=-1){if(d-1>(b.indexOf(\".\")+this.config.decimalPlaces)){this.setValue(b.substring(0,d-1))}}console.log(this.getValue()",637310,49,"&&Ext.isNumber(this.config.decimalPlaces)){this.setValue(a.toFixed(this.config.decimalPlaces))}},getValue:function(){this.showValidation(true);",477264,49,691150,223,"svg\",iconCls:\"rm-backbtniconcls",691376,158,596825,32,"Invoices",691543,40,691597,71,604991,36,691834,58,604763,48,"clearIcon:true",691756,32,",permissionFor:{action:\"Select\",name:\"Projects\"},",605017,53,691915,99,"itemId:\"descriptionField",692012,41,"[\"rm-flatfield\",\"rm-flatfield-last\"],placeHolder:\"enter\"},{xtype:\"container\",itemId:\"detailsFields\",defaults:{clearIcon:false},hidden:true,items:[{xtype:\"rmamountfield\",name:\"UnitPrice",692133,70," rm-cursor-blinkbg\",placeHolder:\"enter\",decimalPlaces:8,prefix:\"$\"},{xtype:\"rmamount",592597,65," rm-cursor-blinkbg\",decimalPlaces:4,trailingZerosUpTo:0,currencyMode:false,prefix:\"",592863,58,"placeHolder:\"none\",value:0,cls:[\"rm-flatfield\"]},{xtype:\"rmamountfield\",name:\"Amount\",itemId:\"Amount\",label:\"Amount\",value:0",716618,34,"decimalPlaces:2,prefix:\"$",614077,34,"Tax code\"",692368,51,"itemId",692405,77,"autoSelect:false",738602,40,"rmamountfield\",name:\"Tax\",itemId:\"Tax\",label:\"Tax\",labelWidth:\"7em\",cls:[\"rm-flatfield\",\"rm-cursor-blinkbg\",\"rm-flatfield-last\"],decimalPlaces:2,prefix:\"$\",clearIcon:true}]}]}]},showDetailsFields:function(){this.down(\"#descriptionField\").removeCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(false)},hideDetailsFields:function(){this.down(\"#descriptionField\").addCls([\"rm-flatfield-last\"]);this.down(\"#detailsFields\").setHidden(true)},hideTaxFields:function(){this.down(\"#TaxGroupId\").setHidden(true);this.down(\"#Tax\").setHidden(true);this.down(\"#Amount\").addCls([\"rm-flatfield-last\"])},setTaxModified:function(a){var b=this.down(\"#Tax\");if(a){b.addCls([\"rm-field-warning\"]);b.setLabel(\"Tax (modified)\");b.removeCls(\"clear-icon-hidden\")}else{b.removeCls([\"rm-field-warning\"]);b.setLabel(\"Tax\");b.addCls(\"clear-icon-hidden\")}}});Ext.define(\"RM.util.PseudoGuid\",{singleton:true,currentIndex:1,guidMask:",761644,38,",next:function(){var b=this.currentIndex.toString();var a=new RegExp(\"0{\"+b.length+\"}$\");var c=this.guidMask.replace(a,b);this.currentIndex+=1;if(this.currentIndex>999999999999){this.currentIndex=1}return c",680272,37,692704,177,692888,34,":\"invoicelineitem field[name=UnitPrice]\",quantity:\"invoicelineitem field[name=Quantity]\",discount:\"invoicelineitem field[name=Discount]\",taxCode:\"invoicelineitem field[name=TaxGroupId]\",tax:\"invoicelineitem field[name=Tax]\",amount:\"invoicelineitem field[name=Amount",693091,32,693130,49,"field[name=ProjectID]\",itemId:\"invoicelineitem field[name=ItemId]\",projectName:\"invoicelineitem field[name=ProjectName]\",",693207,174,",unitPrice:{valueChange:\"unitPriceChanged\"},tax:{valueChange:\"taxAmountChanged\",clearicontap:function(){this.taxAmountChanged(null,null)}},taxCode:{change:\"taxCodeChanged\"},quantity:{valueChange:\"quantityChanged\"},discount:{change:\"discountChanged\"},projectName:{change:\"projectChanged\"}}},isTaxInclusive:function(){return this.taxStatusCode===RM.Consts.TaxStatus.INCLUSIVE},showView:function(e,f,d,g,a,c){this.ignoreEvents=false",693441,42,"taxStatusCode=d.taxStatus;this.invoiceDate=d.invoiceDate",684207,34,"c;if(g){this.detailsData=g}else{this.isCreate=true;this.detailsData={IsNew:true,InvoiceLineItemId:RM.util.PseudoGuid.next(),UnitPriceAccuracy:2,Quantity:1,TaxGroupId:null,TaxIsModified:false",693768,131,"b",693900,70,"getAdd",722060,47,684828,37,"Tax().setReadOnly(!RM.CashbookMgr.getTaxPreferences().AllowTaxEdit);if(!this.initShow){b.reset();b",726752,37,"DiscountDisplayValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);var a=RM.util.MathHelpers.roundToEven(this.isTaxInclusive()?this.detailsData.UnitPrice:this.detailsData.UnitPriceExTax,this.detailsData.UnitPriceAccuracy);this.getUnitPrice().setValue(a);if(this.taxStatusCode===RM.Consts.TaxStatus.NON_TAXED){this.getItemDetail().hideTaxFields()}this.setTaxModified(this.detailsData.TaxIsModified);if(this.detailsData.ItemId){this.getItemDetail().showDetailsFields()}this.initialFormValues=b.getValues();this.initShow",722672,73,"Item",647422,44,"setEditable:function(a){if(!a){RM.util.FormUtils.makeAllFieldsReadOnly(this.getItemForm())}},setTaxModified:function(a){this.detailsData.TaxIsModified=a;this.getItemDetail().setTaxModified(a)},setDiscountDisplayValue:function(b,a){var c;if(b){c=b+\"%\"}else{if(a){c=RM.AppMgr.formatCurrency(a,2)}else{c=\"\"}}this.getDiscount().setValue(c",694609,133,"||0,function(c){b.setValue(c==0?\"",694788,304,"this.itemChanged(c[0])},this)}}}}},go",640544,34,728477,105,"add",724079,51,695341,108,"UnitPriceExTax){this.getUnitPric",648528,37,695616,105,"delete c.Amount;delete c.UnitPrice;delete c.Tax;delete c.Discount;var b=Ext.apply(this.detailsData,c);b.ItemType=a;b.Quantity=b.Quantity||1;",696124,85,",itemChanged:function(a){this.detailsData.ItemName=a.Name;this.detailsData.UnitPriceExTax=a.UnitPriceExTax;this.setTaxModified(false);this.ignoreEvents=tru",695134,39,"a.ItemId,ItemName:a.ItemPath,TaxGroupId:a.SaleTaxCodeID,Description:a.SalesDescription,UnitPrice:this.isTaxInclusive()?\"\":a.UnitPriceExTax});this.ignoreEvents=false;var b=this;this.getServerCalculatedValues(\"Item\",function(){b.getItemDetail().showDetailsFields()})},unitPriceChanged:function(b,a){if(this.ignoreControlEvents()){return}var c=b.toString().split(\".\");if(c.length==2&&c[1].length>1){this.detailsData.UnitPriceAccuracy=c[1].length}else{this.detailsData.UnitPriceAccuracy=2}if(!this.isTaxInclusive()){this.detailsData.UnitPriceExTax=b}this.getServerCalculatedValues(\"UnitPrice\")},discountChanged:function(c,b,a){if(this.ignoreControlEvents()){return}this.detailsData.DiscountAmount=null;this.detailsData.DiscountAmountExTax=null;this.detailsData.DiscountPercentage=null;if(b.indexOf(\"%\")>-1){this.detailsData.DiscountPercentage=parseFloat(b.replace(\"%\",\"\"))}else{if(b.indexOf(\"$\")>-1){if(this.isTaxInclusive()){this.detailsData.DiscountAmount=RM.AppMgr.unformatCurrency(b)}else{this.detailsData.DiscountAmountExTax=RM.AppMgr.unformatCurrency(b)}}}this.getServerCalculatedValues(\"Discount\")},taxAmountChanged:function(b,a){if(this.ignoreControlEvents()){return}if(!b){this.detailsData.TaxIsModified=false}else{this.detailsData.TaxIsModified=true}this.getServerCalculatedValues(\"Tax\")},taxCodeChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Tax\")},projectChanged:function(c,b,a){if(this.ignoreControlEvents()){return}if(!b){this.getProjectId().setValue(null)}if(this.getItemId().getValue()){}},quantityChanged:function(){if(this.ignoreControlEvents()){return}this.getServerCalculatedValues(\"Quantity\")},getServerCalculatedValues:function(f,b){var d={AmountTaxStatus:this.taxStatusCode,PreviousAmountTaxStatus:this.taxStatusCode,CustomerId:this.customerId,InvoiceDate:this.invoiceDate,LineItems:[]};var c",746269,36,"e={ChangeStatus:2,ItemId:c.ItemId,Quantity:c.Quantity||1,TaxGroupID:c.TaxGroupId,TaxIsModified:this.detailsData.TaxIsModified,Tax:this.detailsData.TaxIsModified?c.Tax:null,UnitPriceExTax:this.detailsData.UnitPriceExTax};if(this.detailsData.DiscountPercentage){e.DiscountPercentage=this.detailsData.DiscountPercentage}else{e.DiscountAmountExTax=this.detailsData.DiscountAmountExTax;e.DiscountAmountTax=this.detailsData.DiscountAmountTax}switch(f){case\"UnitPrice\":e.UnitPrice=this.getUnitPrice().getValue();e.UnitPriceIsModified=true;break;case\"Quantity\":e.QuantityIsModified=true;break;case\"Discount\":if(!e.DiscountPercentage){e.DiscountAmount=this.isTaxInclusive()?this.detailsData.DiscountAmount:this.detailsData.DiscountAmountExTax;e.DiscountAmountExTax=this.isTaxInclusive()?null:this.detailsData.DiscountAmount;e.DiscountAmountTax=null}e.DiscountIsModified=true;break}d.LineItems.push(e",690878,34,"Calc\",true,d,function a(j){var g=j[0].Items[0];this.ignoreEvents=true;this.detailsData.UnitPriceExTax=g.UnitPriceExTax;this.detailsData.UnitPrice=g.UnitPrice;this.detailsData.Amount=g.Amount;this.detailsData.AmountExTax=g.AmountExTax;this.detailsData.AmountTax=g.AmountTax;this.detailsData.Tax=g.Tax;this.detailsData.DiscountedTaxAmount=g.DiscountedTaxAmount;this.detailsData.DiscountedTaxExclAmount=g.DiscountedTaxExclAmount;this.detailsData.DiscountAmount=g.DiscountAmount;this.detailsData.DiscountAmountExTax=g.DiscountAmountExTax;this.detailsData.DiscountAmountTax=g.DiscountAmountTax;this.setDiscountDisplayValue(this.detailsData.DiscountPercentage,this.detailsData.DiscountAmount);this.setTaxModified(g.TaxIsModified);var h=RM.util.MathHelpers.roundToEven(this.isTaxInclusive()?g.UnitPrice:this.detailsData.UnitPriceExTax,this.detailsData.UnitPriceAccuracy);this.getItemForm().setValues({UnitPrice:h,Amount:RM.util.MathHelpers.roundToEven(g.Amount,2),Tax:RM.util.MathHelpers.roundToEven(g.Tax,2)});this.ignoreEvents=false;if(b){b()}},this,function(g){alert(g)},\"Working...\")},ignoreControlEvents:function(){if(!this.initShow||this.ignoreEvents){return true",696207,1482,"RM.component.Secure",697693,40,"permissionFor:\"Invoices",604080,60,747920,62,"svg\",iconCls:\"rm-backbtniconcls",697856,4073,"display:inline",707190,70,"Time",707263,38,702051,1212,"svg\",iconCls:\"rm-backbtniconcls",697856,60,703326,3854,"display:inline",707190,2570,"svg\",iconCls:\"rm-backbtniconcls",697856,56,709819,580,710426,146,"Subt",710573,53,"{0",711136,56,710685,68,"{1}</span></div></tr>'+(a.AmountTaxStatus===RM.Consts.TaxStatus.NON_TAXED?\"\":'",711024,48,"Total (excluding tax)",710704,49,"{2",711136,56,710812,63,"{3}</span></div></tr>')+'",711024,48,710572,54,711134,58,711061,72,"{5",711136,127,"{6",711266,40,"Currency(a.Subtotal),this.formatCurrency(a.DiscountTotal),this.formatCurrency(a.AmountExTax),this.formatCurrency(a.Tax),this.formatCurrency(a.Amount),this.formatCurrency(a.Paid),this.formatCurrency(a.BalanceDue)))},formatCurrency:function(a){return RM.AppMgr.formatCurrency(a,2",675744,55,711611,229,"svg\",iconCls:\"rm-backbtniconcls",697856,56,711899,224,"svg\",iconCls:\"rm-btniconsize",712126,274,"svg\",iconCls:\"rm-btniconsize",712403,147,"svg\",iconCls:\"rm-btniconsize",712553,804,"var a=!(",713391,59,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",713354,36,"a);var b=!(",713574,58,"&&RM.PermissionsMgr.canApprove(\"Invoices\"",713538,35,"b",713450,90,713633,171,"slidenavigationview\");RM.AppMgr.showSuccessMsgBox(\"Invoice \"+this.invoiceData.InvCode+\" was Approved.\")},this,function(a,b){RM.AppMgr.showOkMsgBox",713840,1157,"RM.AppMgr.loadStore(this.getHistory",668731,72,715961,190,"svg\",iconCls:\"rm-backbtniconcls",716154,179,"secureformpanel\"",716353,42,"component\",height:1},{xtype:\"rmamountfield2",716407,46,"decimalPlaces:4,prefix:\"",608175,50,"enter\"},{xtype:\"rmamountfield2",716547,52,"decimalPlaces:2,prefix:\"$",608175,50,"enter",597856,71,739487,33,716829,249,"rmamountfield2\":{focus:\"onFieldFocus",717184,150,"console.log(\"CustomDiscount showView\")",717333,339,"RM.AppMgr.unformatCurrency(b",717711,33,"Focus:function(a){console.log(\"focus\"",717487,40,717915,105,"validateForm:function(){console.log(\"validateForm\");",718329,321,"RM.AppMgr.formatCurrency",718683,38,",2)}",735744,34,718760,2709,",hide:\"onHide",721468,499,"RM.ViewMgr.regFormBackHandler(this.back,this);",721967,713,662088,34,"FormBackHandler()",726862,67,722745,1647,"RM.AppMgr.showSuccessMsgBox(\"Timesheet saved\"",713740,35,"timesheet\");this.goBack()},this",724404,57,"RM.AppMgr.showOkMsgBox(d)})}",695339,41,724513,837,"text",725356,170,",hide:\"onHide",725525,538,"RM.ViewMgr.regFormBackHandler(this.back,this);",726063,403,722390,146,726627,237,662088,34,"FormBackHandler()",726862,258,"sv",727122,59,"sv",727183,3635,";RM.AppMgr.itemUpdated(\"expense\"",730817,1337,"var f=Ext.decode(e.responseText);if(f.success){",730753,55,"RM.AppMgr.itemUpdated(\"expense\");this.goBack()},this)}else{RM.AppMgr.showOkMsgBox(f.eventMsg)}},failure:function(e){",630777,34,"e)",732189,5690,"svg\",iconCls:\"rm-backbtniconcls",697856,56,737938,119,"secure",738057,149,",labelWidth:\"4",613934,33,738236,169,"svg\" style=\"margin-right: 10px; width: 18px; height: 18px;",738435,197,",permissionFor:{name:\"SalesPreferences\",action:\"View\"}",738632,228,",listeners:{focus:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)},keyup:function(b){var a=b.getValue().split(\"\\n\").length;b.setMaxRows(a+2)}}",738860,2168,"&&a.Subject",674864,44,740975,33,741211,36,"FormMsg();return b}",741014,127,";RM.AppMgr.showInvalidFormMsg();return b",741141,452,",\"Sending...\"",741593,730,"svg\",iconCls:\"rm-backbtniconcls",697856,50,666606,35,623278,72,742483,831,"var a=this.getNoteText().getValue();if(a",743312,32,"a)}else{RM.AppMgr.showOkMsgBox(\"Please enter some text for the note\")}",743374,3616,"itemTypeFld:\"createitem #itemType\",itemNameFld:\"createitem #itemName",746988,125,"createitem:{show:\"onShow\"},",747113,57,"save",659534,33,659579,34,747243,181,"how:function(){this.initialFormValues",747444,37,"},s",747424,73,"RM.Consts.ItemStatus.ACTIVE",741439,52,747596,92,"RM.AppMgr.showOkMsgBox(c)})",726861,68,"CreateItem",647422,44,695341,46,"Type){this.getItemType",690320,40,"a.Name",695389,60,"SaleCategoryID){this.getAcctCat",690320,84,"go",640544,34,728477,160,748604,36,747770,212,"svg\",iconCls:\"rm-backbtniconcls",748862,67,612912,40,748092,767,"svg\",iconCls:\"rm-backbtniconcls",748862,223,"sv",749087,182,"sv",749087,62,749333,117,"sv",749087,62,749514,6365,"idProperty:\"AcctCatName\",",755879,7072,"TestScreenC\",\"CoreSettingsC\",\"AppStop",762963,1357,55391,32,".prototype.isNotPreventable=/^(select|a|input|textarea)$/i",764320,191,"svg\",iconCls:\"rm-backbtniconcls",697856,56,764570,432]